<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:taxo="http://purl.org/rss/1.0/modules/taxonomy/" xmlns:activity="http://activitystrea.ms/spec/1.0/" ><channel><title>명월의 개발 일기</title><link>http://www.nowonbun.com</link><description>어두운 밤길을 비추는 달빛처럼.. 어둡고 외로운 개발의 길을 걷는 이들의 밝은 달빛이 되길 바라는 개발자... 프로그램 개발 간의 고민, 문제점을 해결하는 방법 등의 노하우를 일기 형식으로 공유하는 블로그.</description><language>ko</language><pubDate>Thu, 18 Apr 2019 15:22:08 GMT</pubDate><generator>nowonbun blog editor</generator><managingEditor>nowonbun@gmail.com</managingEditor><webMaster>nowonbun@gmail.com</webMaster><item><title>[Tistory Blog Editor -8] 관리 페이지 - 동기화(2)</title><link>http://www.nowonbun.com/Dialy/201904191221.html</link><description><![CDATA[동기화 기능 설계와 화면 디자인이 되었으면 이제부터는 코딩이다. 먼저 동기화 전용 패키지를 만들고 응답받는 서블릿과 상태 타입과 프로세스 모듈은 아래와 같이 구성했다.먼저 blogapiconnection.java 파일은 tistory와 httpconnection을 위한 클래스이다. 형태는 클래스 내부에 httpconnection를 선언하여 어댑터 패턴처럼 구현하였다. 이 blogapiconnection 클래스는 blogapiconnectionbuilder로 의해 클래스 할당 및 생성되고 builder에 의해 커낵션 접속이 완료되면 응답받은 값은 blogapiconnection 안에 가지고 있는 형태가 된다. blogapiconnectionbuilder는 builder 패턴의 node 생성 클래스이고 url과 파라미터를 받으면 blogapiconnection을 생성, url에 접속까지 이루어 진다.servlet의 경우는 editer에서 최초 pull 또는 push 요청이 왔을 때 syncstart.auth를 요청하게 되고 페이지에서는 tistory oauth화면으로 redirect를 한다. redirect되고 난 tistory 화면에서 인증이 완료되면 tistory.auth화면으로 돌아오는데 이때 정상적인 return이 되었으면 blogapithread를 요청한다.blogapithread에서는 state 패턴으로 blogstatus 열거형으로 가지고 있다여기서 thread 상태가 wait이 아니면 아무런 실행없이 리턴한다. 이 상태값은 blogapithread안의 값을 확인하는 것으로 상태를 조회할 수 있다.여기까지 기본 동기화 모듈의 프로그램 구조는 만들어졌다. 특히 blogapithread의 singleton 패턴에다가 쓰레드 풀을 통한 독립적인 쓰레드로 운영되어야 하는 게 중요하다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/201904191221.html</guid><pubDate>Fri, 19 Apr 2019 00:21:14 GMT</pubDate></item><item><title>[Tistory Blog Editor -7] 관리 페이지 - 동기화(1)</title><link>http://www.nowonbun.com/Dialy/a4167b57525249dfac5518f344631b87.html</link><description><![CDATA[tistory blog editor는 글을 쓰고 수정, 삭제하는 것은 기본적으로 로컬 데이터 베이스를 사용한다. 그러나 화면을 개시하는 것은 로컬이 아닌 티스토리 블로그에서 합니다. 즉 처음에 티스토리로부터 데이터를 수집, 가져오는 것부터 로컬에서 수정, 삭제를 하면 다시 티스토리에 적용을 해야한다. 일단 티스토리에서도 글쓰기와 수정, 삭제가 되는 데 불구하고 로컬에서 하는 이유는 데이터를 백업하는 의미도 있지만, 직접적인 데이터 등록보단 이차적인 데이터 등록을 통해서 좀 더 유연한 데이터 관리를 위해서이다.그렇다면 동기화 작업은 어떻게 할까? 나는 우리가 자주 쓰는 svn이나 git 형식이 생각났다. 먼저 티스토리로 부터 pull를 통해 데이터를 가져오고 수정된 것은 push를 통해 등록하는 것이다. 또 pull를 할때에는 수정된 것이 있으면 티스토리로부터 받는 데이터가 적용이 되지 않는다.push를 할 때는 먼저 유저 정보를 받아오고 그 다음은 블로그 정보 -&gt; 카테고리 정보 -&gt; 블로그 리스트 -&gt; 마지막으로 블로그 정보를 읽어 드리는 방법으로 만들 생각이다.그리고 이 동기화 모듈은 별도의 쓰레드와 싱글톤 패턴 형식으로 처리를 해서 push나 pull이 작업 중일 때는 두번 중복처리가 되지 않도록 처리할 생각이다. 화면에는 상태 정보를 표시해서 현재 동기화 처리 과정을 볼 수 있도록 할 예정이다.위의 형태처럼 만들 생각에 있다.화면은 위의 형태처럼 생각하고 있다. 먼저 위에는 pull post와 push post를 실행시키는 타일 박스와 상태 메시지를 나타내는 텍스트 박스, 서버로 부터 정보 수신된 시간(0.5초 단위로 정보를 계속 확인 할 생각이다.)를 나타내는 텍스트 박스, 마지막으로는 현재 진행상태를 볼 수 있는 프로그래스바를 만들었다.여기까지 동기화 기능 설계화와 화면 디자인에 대해 생각했다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/a4167b57525249dfac5518f344631b87.html</guid><pubDate>Wed, 17 Apr 2019 23:29:42 GMT</pubDate></item><item><title>[Tistory Blog Editor -6] 전체 디자인 설정</title><link>http://www.nowonbun.com/Dialy/2c3df1eae14548359f9f3372617a46d5.html</link><description><![CDATA[로그인 기능까지는 완료가 되었고 이제는 메인에서부터 전체적인 디자인을 설정을 해야한다. 디자인은 따로 새로 만들기 보다는 명월일지 스킨 디자인에서 가져와서 사용할까 생각한다. 그리고 이 에디터는 기본적으로 pc에서 사용할 생각이다. 그래서 신경이야 쓰겠지만 pc화면에서 제대로 나오면 모바일에서 조금 깨져도 그냥 넘어갈까 생각한다. 물론 명월일지가 블로기이 때문에 예전에 디자인 설계할 때 모바일도 생각하고 만들기는 했었기 때문에 모바일 환경에서도 크게 차이가 나지는 않을 듯하다.디자인 프레임 워크는 bootstrap 3.3을 썼다. 그 밖의 font-awesome/4.5, toastr등도 설정했다.명월일지 블로그도 현재 디자인 스킨을 변경 중이라서 이전 디자인에서 나타났던 버그는 많이 개선했다. 위 두 이미지를 보면 블로그 디자인에서 에디터의 디자인은 오른쪽 메뉴를 삭제했다.그리고 옆의 오른쪽 메뉴는 현재 관리밖에 없는데 blog api의 동기화가 끝나면 blog 메뉴에서 아래 관리 메뉴가 추가되는 형태로 개발할까 구상 중이다. 그리고 이전에 있던 메일보내기, 즐겨찾기는 블로그에서도 삭제했다. 또 왼쪽 아래에 있던 메뉴도 모두 제거했다. 현재 에디터 디자인를 수정해 가면서 블로그 안의 디자인도 조금씩 수정해가고 있다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/2c3df1eae14548359f9f3372617a46d5.html</guid><pubDate>Wed, 17 Apr 2019 00:29:04 GMT</pubDate></item><item><title>[Tistory Blog Editor -5] 데이터 베이스 설계 변경과 기본 로그인 화면</title><link>http://www.nowonbun.com/Dialy/6991b4b84ecd43eaae454b1b22b116ed.html</link><description><![CDATA[사실 이전에 데이터 베이스 설계는 끝났다. 그러나 tsn_post를 보면 contents_path의 컬럼이 있는데, 블로그의 내용을 api로 받으면 파일로 만들고 그 파일 경로를 데이터 베이스에 넣어서 관리하려고 했었다. 이 블로그의 프로그램도 현재 그런 형식으로 관리되고 있다.이게 나는 데이터 베이스 공간을 아낄 수 있고 효율적이라고 생각했다. 곰곰히 생각해 보니 데이터 베이스도 파일 시스템이니 굳이 파일로 만들 필요가 없을 것 같다. 괜히 파일로 만드므로 해서 관리만 귀찮아지고 검색도 어렵고 프로그램도 어려워지는 게 아닐까 생각했다.그래서 아래와 같이 수정을 했다.er은 위와 같이 수정을 하고 jpa entity와 dao도 추가했다. 여기까지 기본 프레임 워크까지 만들었고 다음은 로그인 화면을 만들었다.위 화면은 이전 가계부에서 쓰던 로그인 화면을 그대로 가져왔다. 딱히 여러사람이 쓰는 툴이 아니고 나만 서버에 올리고 사용할 프로그램이기 때문에 복잡하게 회원관리 기능을 제외하려고 하기 때문이다. 화면은 html은 다음과 같은 소스로 구성했다.서버사이드에서의 소스는 다음과 같다.이 서버 내요을 보면 index 함수를 보면 config 파일에서 login 기능이 false로 되어있으면 그냥 세션을 new해서 넣는다. 이 기능은 로그인을 확인하지 않고 세션에 클래스를 할당을 해서 등록시키므로 로그인이 되어있는 효과가 나온다. 즉, 비 로그인 기능이다. 프로퍼티에 login파라미터를 true 해놓으면 로그인이 필요 없어진다. 다시 돌아와서 login이 true로 되어 있으면 로그인을 확인한다. html화면에서 google.api를 호출해서 로그인이 확인되면 login.html로 redirect된다. 그럼 프로퍼티의 id와 email, 파라미터의 id와 email를 확인해서 로그인이 가능하게 한다. 여기서 또 id, email파라미터가 null인경우, 체크없이 로그인이 가능하게 만들어 졌다. 로그아웃은 session를 비우므로해서 처리된다. 그러나 실제로는 프로그램상에 로그아웃 기능을 구현할 생각은 없다.여기까지 로그인기능까지 완성했다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/6991b4b84ecd43eaae454b1b22b116ed.html</guid><pubDate>Tue, 16 Apr 2019 00:20:40 GMT</pubDate></item><item><title>[Tistory Blog Editor -4] 시스템 사양 설계 및 구축</title><link>http://www.nowonbun.com/Dialy/e59659777b2444f48113c69dffb6c1d8.html</link><description><![CDATA[데이터 베이스 설계는 끝났고, 이제 프로그래밍을 하기 전에 프레임 워크 설정과 orm 구축을 먼저 할 것이다. 프레임 워크나 orm이라고 해서 이전 blog 에디터나 가계부와 완전 다르게 만드는 게 아니고 같은 사양으로 만들 생각이다. 먼저 항상 그랬듯이 pom 설정부터 시작하겠다.이번 프로젝트에서도 필요한 라이브러리는 spring과 jpa, mysql connector, log4j 정도이다. tistory blog api를 연결시켜주는 라이브러리는 따로 있지 않는데 그건 내가 전부 구현할 생각이다. 그렇게 딱히 어렵지도 않으니깐. 여기까지는 기존 프로젝트들과 차이가 없다.위 화면은 spring xml 설정 파일이다. 특이 사항은 파일 확장자는 .html, .ajax, .auth인데 .auth 경우에는 tistory api에서 호출받을 때 쓸 웹페이지이다. 여기 설정도 이전과 크게 다른 건 없고 기존과 거의 비슷하다.이전처럼 이클립스에서 데이터 베이스부터 entity의 generate를 이용해서 생성했다. 그렇게 하면 자동으로 class 파일들이 생성된다. 이렇게 생성된 entity 파일들은 아직 완벽하지 않다. 이전에도 이 부분에 대해서 설명한 적이 있는데 나는 항상 다음과 같은 규칙을 정해 놓고 수정한다.1. one many =&gt; cascade = cascadetype.all, fetch = fetchtype.lazy2. many one =&gt; fetch = fetchtype.lazy이전에 er도를 작성했었는데 그걸 참조하면서 1 : n의 관계 테이블에서 1의 위치에 있는 테이블은 위처럼 casecade와 fetch를 양쪽 다 설정했다. 반대의 경우는 fetch만 설정되게 작성했다. 그리고 tistory blog editor는 트랜젝션 테이블 밖에 없기 때문에 전부 generatedvalue 어노테이션을 추가했다.여기까지 나는 jpa orm과 spring 구축이 끝났다. 다음 단계는 구글 로그인 기능을 만들 것이다. 구글 로그인 기능은 blogeditor이나 가계부에 있는 기능을 그대로 옮겨 쓸 예정이다. 그리고 servlet 상위 클래스, 추상 클래스 또 util 관련 공통 클래스들을 개발할 생각이다. 관련 공통 클래스를 개발한다고는 하지만 가계부의 공통 함수를 거의 가져다 쓸 생각이다.github address -  https://github.com/nowonbun/tistoryeditor]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/e59659777b2444f48113c69dffb6c1d8.html</guid><pubDate>Thu, 11 Apr 2019 00:53:22 GMT</pubDate></item><item><title>[Tistory Blog Editor -3] 데이터 베이스 설계</title><link>http://www.nowonbun.com/Dialy/f37373ceab90456f89e281a0380662ae.html</link><description><![CDATA[요즘 나는 이런 저런 일로 참 바쁘다. 지금 tistory blog editor도 만들고 있지만 집에서 사용하는 서버도 window에서 centos로 바꿨다. 예전에 dev환경 구축해서 할 때는 큰 문제없이 설치되더니만 본방에서는 크고 작은 에러들이 많이 발생했다. 가계부를 디플로이하기 위해서 jenkins도 설치했는데 한참 헤매고 있다. 이렇게 헤맬꺼 블로그 포스팅하면서 좋았을 것을.. 기회 되면 jenkins 설치법에 대해서도 포스팅 해야겠다.그건 됐고, tistory blog editor로 돌아와서 저번에는 open api까지 조사를 했다. 일단 머리 속에는 전체적으로 어떻게 만들어 가야겠다라는 구조가 있지만 그 전에 데이터 베이스를 설계를 해 놔야 나중에 덜 헤매니 순서대로 데이터 베이스 설계를 먼저 했다.데이터 베이스의 구조는 크게 두가지를 생각했다. tistory oauth 인증을 하고 토큰을 저장하는 테이블과 블로그 + 카테고리 + 포스트 데이터를 가지고 있는 테이블이다. 회원 테이블은 어차피 나만 접속할 것이니 필요없고 그냥 property로 대체할 생각이다.위는 데이터 베이스 er도이다. 빨간선으로 되어있는게 tistory oauth와 관계된 테이블이고 아래가 파란선이 블로그 + 카테고리 + 포스트 데이터이다. 여기 보면 statistics와 user테이블이 있다.위 블로그 정보를 보면 블로그 데이터는 id + userid &gt;&gt; blogs &gt;&gt; statistics 구조로 되어있다. 그러므로 er를 보게 되면 user에서 blog가 1:n 관계이고 blog와 statistics 와 1:n 관계이다. 그리고 당연하겠지만 blog : category : post도 1 : n : n*n 관계된다.위 스크립트를 보면 특별히 마스터는 필요없을 것같고 모두 transaction 테이블이니 increment int 타입을 키로 만들었다. 그 외는 blog api 정보와 거의 일치하게 만들었다. 여기까지 설계는 완료가 되었다. 다음은 기본 프레임 워크 구축이 되겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f37373ceab90456f89e281a0380662ae.html</guid><pubDate>Wed, 10 Apr 2019 00:29:54 GMT</pubDate></item><item><title>[Tistory Blog Editor -2] Tistory Open API 조사</title><link>http://www.nowonbun.com/Dialy/3b763d5ae217468eb25f227a8906af49.html</link><description><![CDATA[먼저 시스템 설계 및 데이터 베이스 설계하기 전에 내가 tistory로부터 정보를 받고 등록할 open api를 조사했다. tistory open api 등록과 가이드를 확인하려면 tistory 사이트 가장 아래쪽을 보면 open api 링크가 있다.클릭해서 들어가면 제일 먼저 나오는 화면이 바로 앱등록 화면이다. 등록이야 나중에 해야하겠지만 우선은 사양 확인하고 등록을 할 것인지 말 것인지 결정할 것이므로 우선은 우측 상단의 오픈 api 가이드로 이동했다.가이드 메뉴를 보면 메뉴 구성이 상당히 심플하다. open api를 사용하기 위해서는 인증 token이 필요한데 oauth2.0 방식으로 취득하게 되어있다. 그중 authorization code 방식과 implicit 방식이 있는데 이 용어는 무슨 뜻인지 잘 모르겠다. 하지만 내용 상 authorization code는 바로 http redirect로 해서 token 값을 얻는 방법인 것같고, implicit는 client에서 javascript으로 접속하여 redirect를 server-side로 전환하고 거기에서 token을 얻는 방법인 듯 하다. 로그인시 사용하는 google oauth2와는 implicit와 가장 비슷한 흐름인 듯하니 나는 implicit방식으로 구현해야 겠다.v1 카테고리에는 블로그 정보와 글, 카테고리, 댓글로 4가지 메뉴로 구성되어 있다. 댓글의 경우는 일단은 필요없으니 생략하고 가장 메인이 되는 것은 글인데 그중 글 읽기, 작성, 수정이 가장 중요하겠다. 파일 첨부는 뭐지? 이건 일단 우선순위를 빼서 에디터에서 글 작성 및 수정시에 다시 조사 해야 겠다. 먼저 사이트의 메뉴와 리스트를 만들기 위해서는 카테고리와 글 목록을 읽어 들여야 한다. 글 목록과 카테고리의 필수 파라미터를 확인해 보니 blogname이 있다.이 blogname이 어디서 왔나 찾아보니 이게 블로그 정보의 값이다. 이걸 찾는데 한참 해멨다. 어찌된 영문인지 사양서에서는 name이 없는데 예제에는 name이 있다. 사양서 오류인가? 아직 실제 이게 매핑이 되는지는 모르겠고 얼추 흐름을 보니 먼저 블로그 정보를 읽고 카테고리를 읽어드려서 거기에 맞게 글 목록을 읽는다. 그리고 글 읽기로 포스트 내용을 가져오면 될 것같다.데이터 베이스는 블로그 정보, 카테고리 글 목록의 테이블을 만들어서 관리하면 될 것같고, 포스트 내용은 파일로 관리하면 될 것같다.이 정도면 사전 조사는 된 것같고 다음은 데이터 베이스 설계를 좀 더 디테일하게 해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/3b763d5ae217468eb25f227a8906af49.html</guid><pubDate>Fri, 05 Apr 2019 01:26:37 GMT</pubDate></item><item><title>[Tistory Blog Editor -1 ] 개요</title><link>http://www.nowonbun.com/Dialy/c28fb4b9737544349680ae491094841c.html</link><description><![CDATA[지금까지 가계부 프로젝트는 어느정도 완료가 되었고 집에 있는 윈도우 서버를 리눅스 서버로 이전만 하면 되는데 평일에 하기에는 시간이 조금 촉박하고 주말에 하는 걸로 해서 일단은 다음 프로젝트를 진행했다.이번 프로젝트는 제목 그대로 tistory blog editor이다. 이 블로그를 처음 기획할 때 여기는 진짜 일기 형식의 블로그를 만들고 tistory 블로그를 여러가지 정보를 모아논 블로그를 만들 생각했다. 아직 지금 개발 일기 블로그도 완벽하지 않고 조금 더 키워야 하는 수준이지만 내가 생각하기에는 가장 우선 순위는 역시 tistory를 빨리 정상 궤도로 올려 놓는게 급선무 일듯 싶다. 처음에는 쉬엄쉬업하려고 했었는데 하다보니 해야할 게 너무 많아진다.tistory blog editor는 물론 tistory에 직접 글을 작성하고 송고해도 전혀 문제가 없다. 그러나 나는 조금 더 이 부분을 로컬에서 데이터를 관리 및 백업하고 master 형식으로 만들어서 좀 더 블로그 포스트를 관리하기 위한 툴을 작성하기로 했다. 예전에 내가 이와 비슷한 프로그램을 만든 적이 있다. 그 때는 java가 아닌 c#으로 작성했고 web이 아닌 window 프로그램으로 만들었었다. 지금은 어디로 갔는지 찾아봐도 없네..그 때 당시에는 tistory에서 blogapi의 프로토콜을 지원했으며 blogapi는 아마 ms-word와 연결하기 위한 api였던 걸로 기억한다. 그리고 c#의 라이브러리 저장소(nuget)에서 관련 라이브러리가 제공했었기 때문에 c#으로 작성했었다. 그런데 지금 찾아보니 blogapi는 더 이상 지원하지 않는다고 한다. 이유인 즉, 보안에 취약하기 때문이라는 이유인데, 대신에 현재는 open api를 지원한다고 한다.그래서 간단히 살펴보니 oauth2.0기반의 rest 방식으로 블로그 데이터를 제공한다고 한다. oauth2.0 방식이야 여태 만들었던 가계부에 붙어있는 google 로그인 기능과 같으니 무리없이 잘 만들 수 있을 것같다.api 구성을 보니 크게 글(포스트), 카테고리, 댓글 형식으로 제공한다. 나는 blog editor를 만들 것이니 댓글은 일단 필요하지는 않을 것같고 크게 카테고리와 글(포스트) api를 사용해서 프로그램을 만들면 되겠다. 여기까지 자료 조사는 끝냈고 시스템 사양으로는 역시 blog editor도 java로 웹버젼으로 만든다. 아직 내부 서버가 구축 전이기는 하지만 거기에 올려서 외부에서도 글을 작성하고 송고할 수 있는 기능을 만들 예정이다. 데이터 베이스는 mysql를 이용한다.여기까지 어느 정도 개요와 계획을 세웠다. 다음 포스트에서는 tistory open api 구성과 등록과정을 조금 자세히 조사해야 겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/c28fb4b9737544349680ae491094841c.html</guid><pubDate>Tue, 02 Apr 2019 23:42:01 GMT</pubDate></item><item><title>블로그 다시 시작..</title><link>http://www.nowonbun.com/Dialy/e078b31b72da41dab7414f7c2001da46.html</link><description><![CDATA[ 작년 11월부터 시작해서 분발하기를 3개월... 그러다 2월 초부터 건강이 조금 안 좋아지더니, 엎친데 덥친격으로 2~3월은 업무가 엄청 늘었다. 그러다 보니 블로그를 운영할 수 있는 시간이 상대적으로 부족해서 본의아니게 2개월 쉬어 버렸다.4월이 되었으니 다시 시작하는 마음으로 시작한다. 다시 시작하면서 조금 룰을 바꿨다.예전에는 품질 좋은 글을 만든다고 항상 포스트 글 1000자 이상, 항상 맞춤법 검사에 글을 내보내면서 정성을 많이 쏟기는 했는데.. 다시 생각해, 그렇게 하다 보니 너무 강박에 잡히고 글 품질도 좋지도 않다. 가끔 글이 맞춤법은 확실히 맞는데 무언가 어색한 느낌을 지울 수가 없네..자연스럽게 쓰는게 좋을 것같다는 생각에 이런 룰을 없애기로 했다. 오늘 시간이 있어 쭉 전체적인 포스트를 둘러보니 다행히도 가계부 프로젝트까지 딱 완료를 한 느낌이다. 이것도 뭐랄까 굉장히 급하게 끝낸 느낌이네..아직 서버를 윈도우에서 centos로 변경을 하지 않았으니 딱 지금 시점이지 않을까 싶다. 다행이도 내 pc에 예전에 linux dev 환경을 만들어서 연습한 프로시저(절차)가 아직도 있다. 먼저 본 서버를 백업 후 자신있게 밀어버리고 centos로 갈아타야겠다.드디어 window 서버와 안녕인가. window 서버가 딱히 나쁜 서버는 아닌데 리소스(사양)을 너무 많이 사용한다는 느낌이 강하다. 그 느낌이라는 건 역시 느리고 버벅거림이 많다는 것이다. 리눅스는 어떨까? 예전에 업무용으로 사용하기는 했었지만 내 개인 서버로는 처음인가? 예전에 잠깐 사용한 기억이 있기는 하다.. 왜 윈도우 서버로 다시 돌아왔는지는 기억이 나질 않네... 무언가 불편해서 였을 텐데..어쨋든 다시 linux로 옮겨 타야겠다.. 오늘은 일단 서버 백업부터..]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/e078b31b72da41dab7414f7c2001da46.html</guid><pubDate>Mon, 01 Apr 2019 23:55:59 GMT</pubDate></item><item><title>한국 개발 문화와 외국(미국, 일본) 개발 문화의 차이</title><link>http://www.nowonbun.com/Experience/8882edc4333f41c896988d5a9dda6246.html</link><description><![CDATA[한국 개발 문화와 외국(미국, 일본) 개발 문화의 차이.나의 개발 경험은 거의 경력의 초반부는 한국에서의 경험이 많고 지금은 일본, 그리고 미국 개발경험이 많다. 미국 개발 경험이라고 해서 정말 미국에 가서 개발한 것이 아니고 미국 사람들로 조직된 개발팀에서 일한 경험을 말한다. 그래서 경험의 차이가 조금씩 있을 수 있고 한국에서의 개발은 아르바이트나 신입 시절의 경험뿐이니 조금 틀릴 수도 있다.내가 한국에서는 si의 경험이 조금 있는데, 소수 몇 명의 팀 또는 혼자서 개발한 경험이 대다수이다. 분명 팀이 존재하기는 했었는데 업무 분장의 이름으로 서로간에 업무가 침범하지 않는 형식으로 일했던 걸로 기억한다. 즉 5개의 프로젝트가 있으면 내가 담당하는 것은 2~3개이고 사수가 있거나 아니면 혼자서 담당해야 하는 프로젝트들이었다. 그러다 보니 프로젝트 중에 이탈(휴가나 연차)하기가 매우 힘들었던 걸로 기억한다. 왜냐하면, 내가 쉬면 그날 그 업무를 담당할 사람이 없어진다. 지금 생각해보면 이런 방식이 매우 비효율적이고 왜 이렇게 일할까 고민을 하겠지만, 그때는 그게 당연하다고 생각했던 걸로 기억한다.일본의 개발문화는 보통 공정 이론 중심과 fm으로 움직인다. 즉 전통적인 워터폴 공정대로 움직이는 경우가 많고 나의 담당은 그 공정 안에서 부분 할당을 받아서 작업한다. 그렇기 때문에 개발 초기에 설계서씨름이 많고 팀 내 개발자들과 그에 대한 충분한 대화와 회의가 많다. 그렇게 여러 회의와 검증을 거쳐 설계서를 완료시킨 상태에서 개발이 가는 경우가 많기 때문에 중간에 개인 사정 이탈(휴가나 연차)이 발생해도 다른 사람이 내 영역을 어느 정도 알고 있기 때문에 업무 대체가 가능하고 여러 검증을 설계단계에서 거쳤기 때문에 실제 개발 상태에서는 레뷰 이외에는 서로 간섭할 여지가 없다.(이 부분은 한국이랑 비슷해서 실제 개발 중간에는 서로 대화도 없이 썰렁하게 진행하는 경우도 있다.) 그래서 그런지 완성도가 꽤 높은데 문제는 아무리 작은 프로젝트도 시간이 엄청나게 걸린다. 최소 6개월에서 심하면 2~3년 가는 프로젝트도 많다. 이게 전부 워터폴 공정으로 움직이는 건 아니고 최근에는 이런 개발 기간이 너무 길어서 애자일도 도입하는데 드물다.미국의 개발문화는 조금 자유스럽다. 땅덩어리가 커서 그런지 각자 업무시간이 다른 경우가 많아서 flexible 형식이 많다. flexible이란 업무시간이 정해지지 않아서 그냥 할당량을 정해 놓고 완수하는 것으로 하루 업무가 종료된다. flexible 스타일의 업무다 보니 서로 간의 회의나 토론은 보통 jira나 레드마인을 이용하고 업무 흐름을 마일드스톤 형식으로 정해서 일을 한다.그렇게 하다 보니 애자일 공정이 굉장히 발달되어 있고 서로 간의 불필요한 대화보다는 코드 레뷰등이 굉장히 많다. 한번은 if 문하나 가지고 일주일 동안 토론한 적도 있다. 이런 방식이 마냥 좋은 것만은 아니다. 개발자들 간의 실력 차가 비슷하면 전혀 문제없는 최고의 형태인데 이게 차이가 있으면 이야기가 달라진다. 이런 공정이 flexible이라 해서 결코 느리지가 않다. 미국 방식은 문서를 따로 만들지 않고 소스 주석으로 처리하거나 많은 리팩토링을 통해서 최적의 코드를 찾아놓는 경우가 많기 때문에 코드만 봐도 사양이 이해가 되는 경우가 많다. 그렇다 보니 업무속도가 엄청나게 빠르고 조금만 어어 하고 일주일 정신 놓고 있으면 프로젝트 공정은 이미 저 앞으로 날아간 경우도 많다. 그렇다 보니 이런 흐름를 따라갈 실력이 되지 않으면 개발이 전혀 되지 못한다. 또 미국은 해고를 엄청 나게 쉽게 해서 한 달 정도 어리바리 타면 바로 fire!다.이건 순전히 나의 경험이고 어느 개발 문화가 좋다고는 이야기할 순 없다. 개인적으로는 초급개발자에서 성장하기에는 일본식 개발 환경이 좋기는 하다. 일본 개발 분위기는 전부다는 아니지만 정말 표준대로 움직인다. 그러다 보니 경험이 쌓였을 때는 이런 방식이 좋다 안 좋다는 자신만의 기준을 세우는 데 좋은 경험된다. 한국식은 아마 메이져 it회사(네이버, 다음등등)는 분명 표준 공정대로 움직일 것이다. 그 점이 관리 면이나 공정시간이 가장 효율적이기 때문이다. 그러나 대다수의 si업계는 아까 이야기한 것처럼 한두 명의 개발자에게 프로젝트 독박을 씌운다. 이건 진짜 고쳐져야 할 부분이라고 생각한다. 그 사람이 휴가를 가거나 퇴사하면 회사 업무가 정지한다. 이런 건 정말 있을 수 없는 공정이기 때문에 이런 문화는 없어져야 하는 게 맞다.]]></description><category>개발경험</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Experience/8882edc4333f41c896988d5a9dda6246.html</guid><pubDate>Thu, 07 Feb 2019 23:19:19 GMT</pubDate></item><item><title>[가계부 프로젝트 19일차] 데이터베이스 데이터 이행작업</title><link>http://www.nowonbun.com/Dialy/51d7aff0edde4f43addcd387fe830bed.html</link><description><![CDATA[가계부 프로젝트에 대한 소스 코딩은 어느 정도 마무리된 듯하다. 앞으로 이 프로젝트를 단순한 가계부 프로젝트로 끝낼 생각은 없고 지금 해야 하는 프로젝트가 어느 정도 만들어 지면 포털 시스템을 구축해서 가족끼리 정보를 공유할 수 있는 사이트를 구축할 예정이다. 우선은 가계부만 하는 거로.내가 원래 이 가계부 프로젝트를 하게 된 이유는 집에 있는 내부 피시가 window 서버인데 centos로 변경하려고 하는 과정에 이전에 만들었던 가계부 프로그램을 옮기려고 시작한 것이다. 이전 버전은 c# + php로 작성되어있기 때문이다. 물론 .net core를 이용하면 linux로 c# 프로그램도 옮길 수 있는데 이번에 가지고 있는 c#프로그램을 좀 정리하고 전부 java로 교체하려는 계획도 있었기에 겸사겸사 가계부 프로젝트를 시작했다. 하면서 데이터베이스도 새로 갈아엎었기 때문에 이전 데이터베이스 구조와 현재 java로 만든 데이터베이스 구조는 다르다. 그렇다고 예전 데이터를 없애고 새로 데이터를 작성하는 것도 안된다. 실제 지금까지 약 5년 넘게 가계가 잘 쓰였는데 갑자기 모두 초기화가 돼버리면 여태 이걸 사용하던 마나님께서 대로하신다.그래서 데이터베이스 이행작업을 해야 한다. 실제 이행작업은 서버를 옮길 때 할 거고 그전에 이행 배치프로그램이나 스크립트 혹은 sql query문을 만들어놔서 실제 데이터 이행할때는 순식간에 되도록 준비하는 작업이다. 그전에 이행작업을 하는 데 내가 자주 사용하는 방법에 대해 설명하겠다. 먼저 데이터를 이행할 때 배치프로그램을 이용하는 방법이다. 이 방법은 가장 시간이 오래 걸리는 작업인데, 왜냐하면 프로그램을 하나 만들어야 하기 때문이다. 이 방법은 이전 데이터베이스 구조와 새로운 데이터베이스 구조가 완전히 다르거나 도저히 스크립트나 query만으로는 이행이 어려울 것 같은 작업에서 사용한다. 예를 들면 마스터 구조가 전혀 다르다던가, 트랜잭션 테이블이 reference 작업이 적어서 좀 하드코딩적인 데이터가 많을 때 사용한다. 다음 방법은 스크립트를 이용하는 방법이다. 스크립트를 이용하는 방법이라서 어떻게 보면 배치프로그램을 만드는 것과 비슷한데 조금 다른 것은 배치프로그램은 이전 데이터베이스에서 데이터를 읽어드려서 다음 데이터베이스에 insert 하는 형식으로 하는데 스크립트는 insert sql쿼리를 만들어 내는 것이다. 내가 자주 사용하는 방법에는 데이터베이스를 엑셀로 내려받아서 엑셀의 매크로를 이용해서 insert sql 문을 만든다. 그 sql문 bulk insert를 통해서 일관 입력하는 방법이다. 첫 번째 배치프로그램보다는 작성하는데 시간이 덜 걸리지만 그래도 어느 정도 동적인 데이터를 제어할 수 있기에 단순히 query로 이행하는 것보다는 좀 더 유동적으로 작업을 할 수 있다.마지막으로 sql query로 이행하는 방법이다. 이전 데이터를 백업 후 새로운 데이터베이스에 복원을 시킨 후 insert select를 이용하여 이행하는 작업이다. 작업 준비 시간으로는 가장 적게 걸리고, 빠르게 할 수 있는 장점이 있는데 데이터 검증이 되지 않는다. 배치프로그램이나 스크립트의 경우는 이전 데이터베이스에서 데이터를 읽어드리고 한 번의 검증을 거쳐 다시 insert하거나 스크립트를 만들어 낼 수 있다. 그러나 insert select의 경우는 그냥 조건에 맞추어서 전부 insert 돼버리는 것이니 혹시 구조를 잘못 이해하거나 잘못된 데이터가 있어도 그대로 insert가 되어 버린다.나는 이중 요번에는 sql query를 이용해서 이행을 하려 한다. 이유는 일단 이전 데이터베이스를 살펴봤는데 현재 데이터베이스와 90% 이상 비슷하다. 가계부는 결국은 타입, 카테고리, 내용, 돈이 주요 데이터 이기 때문에 크게 달라질 것도 없어 보인다. 그래서 이전 데이터에 맞게 insert select를 만들면 될 것 같다.지금 작성한 데이터베이스 구조가 예전보다는 좀 더 구체적이고 정형화되어 보입니다. 그러나 가계부와 관계되어 있는 테이블만 본다고 했을 때는 타입, 카테고리, 가계부 데이터 이렇게 같은 형태로 만들어져 있네요. 그래서 굳이 복잡하게 프로그램 만들 것도 없이 sql insert 문으로 처리 될 것 같다.여기까지 쿼리를 만들어 놓고 이제 dev 환경에 tomcat과 mariadb, jenkins를 구축하고 테스트하고 본 서버에 가계부를 설치하면 무사히 이행작업은 완료된다. 아직 dev환경에도 구축이 되지 않았으니 주말에는 본격적인 서버 변경작업을 해야겠네.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/51d7aff0edde4f43addcd387fe830bed.html</guid><pubDate>Wed, 06 Feb 2019 23:38:58 GMT</pubDate></item><item><title>[가계부 프로젝트 18일차] 로그인 기능 - 쿠키 설정기능 추가하기</title><link>http://www.nowonbun.com/Dialy/c0ded19e5dcd421abab4724ec3189921.html</link><description><![CDATA[가계부를 실제 작업한 기간은 하루에 한 두 시간씩 작업해서 약 한 달 정도 걸린 듯하다. 가계부 프로그램 자체는 꽤 단순한 프로그램인데 화면 디자인에서 시간이 너무 많이 걸렸다. 아직 css를 통한 디자인이 베테랑처럼 숙달되지 않아서 이리저리 시행착오가 많아서 시간이 오래 걸린다.가계부를 완성하고 남은 보강 숙제는 로그인 세션을 쿠키로 연장하는 것을 만들려고 한다. 로그인 세션을 쿠키로 연장하는 것이 무엇이냐 하면 로그인을 할 때 현재는 구글의 oauth를 접속해서 로그인되어 있는 것을 확인한 후 가계부 프로그램에 접속한다. 이게 생각보다 느리다. 일단 구글로부터 인증시간이 약 0.5초 정도 그리고 가계부 서버의 로그인 이 0.1~2 초정도 걸리는데 유저가 느끼기에는 접속할 때 로그인 화면이 꽤 상당히 오랫동안 정지한 듯한 느낌이 든다. 그래서 최초 로그인은 어쩔 수 없이 인증절차가 필요하지만 한번 로그인이 되면 그 세션 정보를 쿠키 + 데이터베이스에 넣어두고 두번째 부터는 쿠키로 디비 검색을 해서 구글 인증을 생략하고 로그인하는 기능을 추가할 생각이다. 위의 로직은 로그인을 할 때 쿠키 키를 만들고 그 키를 데이터베이스에 넣고 쿠키에 등록시키는 내용이다. 그런 다음 두 번째부터 로그인할 때는 쿠키에서 키를 가져와서 데이터베이스와 비교하여 키값이 맞으면 로그인하도록 만들 생각이다. 이 뜻은 다른 디바이스 즉, 다른 기기에서 접속할 경우 최후에 접속한 기기만이 쿠키가 살아있는 뜻이 된다.아까 이야기한 것처럼 처음 index 페이지에 접속이 되면 먼저 쿠키를 확인하고 쿠키가 null이 아니면 키를 취득해 데이 베이스에서 검색을 한다. 해당 키가 없으면 null이 리턴이 되므로 기존처럼 구글 oauth 인증을 하고 로그인을 한다.확실히 로그인 속도가 이전보다 빨라졌다.여기까지 가계부 프로젝트는 완료할 생각이다. 이제 프로젝트는 완료되었는데 이전 가계부에서 새로운 가계부로 데이터를 이동시킬 마이그레이션 작업해야 한다. 마이그레이션 작업은 분명 예전 데이터베이스 구조와 현재 새로 만든 데이터베이스 구조는 다르다. 그렇기 때문에 값의 오차가 최대한 없는 한도 내서 데이터를 새로운 데이터베이스로 이전하는 게 마이그레이션이다. 이걸 프로그램을 만들어서 이행을 시킬까? 매크로나 배츠를 만들까? 아니면 스크립트로 처리가 가능할까는 좀더 생각을 해야봐야곘다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/c0ded19e5dcd421abab4724ec3189921.html</guid><pubDate>Tue, 05 Feb 2019 23:53:52 GMT</pubDate></item><item><title>[가계부 프로젝트 17일차] 가계부 페이지 작성하기 - 3</title><link>http://www.nowonbun.com/Dialy/f67cf69e47224b09aeb7528ae9883a8a.html</link><description><![CDATA[실질적인 메인 설계와 프로그래밍은 가계부 페이지로 끝났다. 그 밖에 로그인 기능 보강과 세션 설정, 그리고 자잘한 테스트만 남아있을 뿐이다. 그전에 중간점검할 겸 포스트를 남긴다.가계부 프로젝트를 처음 할 때는 조금 자세하게 소스 설명까지 남겨가며 글을 남겼었다. 그렇게 글을 남기다 보니 글이 쓸데없이 길어지기만 하고 지루해져서 블로그 질이 떨어진 것 같다. 그래서 지금은 소스 설명보다는 프로그램 설명과 프로젝트를 하면서 느낌 점을 기술하려고 한다.내가 가계부 프로그램은 정말 많이 만들어 봤다. 이유는 예전에 간략하게 설명했었는데 내가 아닌 다른 사람이(유저)가 사용하면서 그에 대한 프로그램에 대한 사용 시 느낀 점을 들을 수 있고, 또 하나는 게시판만큼이나 프로그램 설계가 간단하고, 돈 계산을 저장하는 프로그램이기 때문에 여러 가지 응용을 하면서 모듈을 파생할 수 있다. 예를 들면 일 년 예산, 예산 사용 추이 등등.. 진짜 가계부는 프로그램 공부를 위한 프로젝트로써는 최고가 아닐까 싶다.이번 프로젝트의 포인트는 모바일 화면과 최대한 간결한 프로젝트를 중심으로 만들었다. 그래서 그런지 권한 설정 부분은 아직 부족한 부분이 많고 매인 대시보드도 아직 어떻게 만들까 구상도 하지 않았다. 내 생각에는 일단 여기까지 하고 마무리하고 블로그 프로젝트(명월일지 블로그)로 뛰어들어서 블로그를 재활성화 시킨 후에 가계부를 좀더 업그레이드할까 생각하고 있다. 항상 나는 화면 디자인을 할 때 화면 라이브러리는 bootstrap을 사용했다. bootstrap이 조금 무거운 감이 없지 않아 있지만 제일 편하고 화면을 편하게 설계할 수 있기 때문이다. 그래서일까 화면 설계 전체가 귀찮아서 sb-admin의 무료 템플릿을 가져와서 사용하는 경우도 많았다. 가계부의 카테고리와 관리페이지가 그 예이다. 템플릿을 가져와서 쓰다 보니 문제점이 있다. 내가 화면에 직접 css를 설계해서 만들게 되면 템플릿 css과 충돌이 나는 경우가 있다. (sb-admin.css 에서 label css를 important 해버린다거나 등등.) 이전에는 pc 환경에만 맞추어서 설계할 때는 그런 것을 많이 못 느꼈었는데 모바일을 화면 설계를 하니 확 느껴진다. 이번 프로젝트에서 느낀 가장 큰 수확(?)은 sb-admin 다신 안쓰겠다하는 다짐이다.테이블 설계는 이제는 마스터와 트랜잭션으로 분리 설계가 편하다는 걸 이제는 느끼는 단계를 넘어서 내 설계 표준으로 고착된듯하다. 마스터, 트랜잭션으로 테이블을 나누어서 설계하면 데이터베이스 설계만으로도 프로그램이 어떻게 돌아가는지 느껴지고 데이터베이스 정규화도 정말 편하다. 그밖에 여러 가지 디자인 패턴을 적용해서 나에게는 앞으로 자바 웹 프로젝트에서는 지금 프로젝트가 가장 기본이 되는 설계로 정의해도 좋을 만큼 간결하게 만들어졌다. 아직 완성은 되지 않았지만..이번 프로젝트의 큰 수확이면 수확이다. 아직 몇몇 기능추가가 남아있지만 프로젝트 완료하고 이전 프로그램에서의 데이터 마이그레이션까지 하고 centos 서버전환까지 목표로 2월까지는 완료하려고 마음 먹고 있다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f67cf69e47224b09aeb7528ae9883a8a.html</guid><pubDate>Mon, 04 Feb 2019 23:51:16 GMT</pubDate></item><item><title>[가계부 프로젝트 16일차] 가계부 페이지 작성하기 - 2</title><link>http://www.nowonbun.com/Dialy/2823d2335fbb437ebb28611863765f82.html</link><description><![CDATA[지금까지 완성된 부분은 입력과 검색 부분이다. 데이터를 입력하면 그 데이터가 ajax로 서버에 전송되고 서버에서는 그걸 데이터베이스에 insert 한다. 그리고 다시 client로 입력완료의 결과 메시지를 보내고 client에서는 ok의 결과 메시지를 받으면 다시 검색 요청을 해서 가계부의 검색 결과를 표시하는 형식까지 처리했다. 오늘은 검색된 결과를 클릭하면 입력 폼에 클릭한 데이터가 입력되고 등록 버튼이 취소, 수정, 삭제로 변경되었다.먼저 이 세 버튼 중에서는 취소가 가장 쉽다. 취소 버튼은 클릭하면 실제 서버로 전송하는 부분은 없고 입력 폼을 초기화시키고 버튼을 다시 등록 버튼으로 전환하면 되는 것이다.그다음은 나는 삭제처리를 만들 생각이다. 이전에도 이야기한 적이 있었지만 나는 웹을 작성할 때 입력 -&gt; 검색 -&gt; 삭제 -&gt; 수정 순으로 작성한다. 그편이 중복적인 처리를 줄이고 가장 빠르게 만드는 나만의 노하우이다.삭제 버튼의 경우는 먼저 검색할 때의 값을 생각해야 한다. 화면에는 표시되지 않지만 나는 검색을 한 결과를 각 row의 input.payment-value[type=text]의 element에 json형식으로 데이터를 넣어 놓는다.위 이미지를 보면 첫 번째 아이템 &lt;tr&gt; 아래의 input element 안에 데이터를 json형식으로 넣어놓았다. 이 데이터를 이용해서 클릭하면 입력 폼에 데이터를 표시하는 것이고 여기에 있는 idx값으로 수정 또는 삭제를 할 예정이다. 나는 일단 삭제처리만 할 것이기 때문에 idx값을 가지고 서버로 ajax를 호출하여 데이터를 삭제했다.처음 등록 부분과 마찬가지로 데이터를 삭제하면 데이터 상황이 변경되기 때문에 데이터를 전체 갱신을 했다. 그리고 데이터 삭제가 완료되면 입력 폼은 초기화가 되어 등록 버튼을 표시하고 입력폼에 있는 데이터를 없앤다.다음은 수정처리이다. 수정처리는 삭제와 마찬가지로 idx값을 가져오고 입력 폼에 있는 데이터를 ajax로 서버 측에 전송하면 해당 idx 데이터가 수정되는 형식이다. 여기에서 로직은 등록과 비슷하지만 하나 다른 점은 데이터에 idx값이 포함하여 수정하는 것이다.수정도 마찬가지로 완료되면 데이터 상황이 변경되기 때문에 데이터를 전체 갱신한다. 그리고 수정이 완료되면 입력 폼을 초기화시켜서 등록 버튼을 표시하고 입력 폼에 있는 데이터를 없앤다. 여기까지 등록과 검색, 삭제, 수정 부분을 완성했다.가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/2823d2335fbb437ebb28611863765f82.html</guid><pubDate>Thu, 31 Jan 2019 23:10:31 GMT</pubDate></item><item><title>[가계부 프로젝트 15일차] 가계부 페이지 작성하기 - 1</title><link>http://www.nowonbun.com/Dialy/08d939a6ca44405ca7cf17f1c94afa5c.html</link><description><![CDATA[드디어 본격적인 가계부 페이지를 작성한다. 지금까지는 회원관리와 카테고리 관리였는데 이제는 유저가 가계부 데이터를 넣고 조회하는 페이지를 만들 생각이다. 웹프로그램의 구성은 게시판의 연장선과 같다. 입력, 수정, 삭제, 조회로 이루어진다.먼저 화면 디자인을 설명하자면 카테고리 페이지와 회원관리 페이지의 경우는　부트스트랩의 sb-admin의 프레임 워크를 써서 만들었으나 이 가계부 페이지의 경우는 하나부터 열까지 css로 작성했습니다. 특히, select 컨트롤자체는 css로 꾸밀수가 없어서(색상이 든지, 화살표 표시 등) select 버트을 감추고 span 태그로 그 위를 감싸는 형식으로 해서 select 컨트롤를 작성한 부분이 가장 어려웠던 것 같네요.그리고 카테고리와 관리페이지는 실제로 나만 보는 페이지인데, 가계부의 경우는 가족이 실제 사용하는 페이지이기 때문에 pc 화면보다는 모바일 화면에 초점을 두고 설계했다. 그래서 오히려 pc 화면에서는 조금 어색하게 보인다. 입력화면이 지나치게 크네..;;일단 입력화면에서 데이터를 입력하고 저장 버튼을 누르면 ajax으로 form의 값을 json 형식으로 보내서 server-side에서 해당 데이터를 받아 payment 테이블에 insert를 한다.입력이 끝나면 서버로 부터 ok메시지를 받고 입력화면을 초기화한다.검색화면에서는 입력되면 데이터 상황이 변경되기 때문에 리스트를 재갱신할 필요성이 있다. 리스트 테이블은 두개가 존재하는데 가계부와 저축현황이다. 이 둘다 데이터를 갱신하는 부분을 코딩해서 입력된 데이터를 볼 수 있도록 했다.검색의 경우는 입력시에 갱신을 해서 보여줄 필요가 있지만 처음 페이지가 처음 열렸을때 위 달력이벤트를 받고 조회 년월이 바뀌었을때, 검색 조건인 초기화, 타입, 일이 바뀌었을 때이다.여기까지 등록화면과 검색화면을 만들었다. 다음은 수정과 삭제를 만들 예정이다.가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/08d939a6ca44405ca7cf17f1c94afa5c.html</guid><pubDate>Wed, 30 Jan 2019 22:51:49 GMT</pubDate></item><item><title>[가계부 프로젝트 14일차] 카테고리 페이지 작성하기</title><link>http://www.nowonbun.com/Dialy/0c24762406544076b6a0288a1601c3b8.html</link><description><![CDATA[지금 가계부 프로젝트 포스트를 하고 있지만 사실 이 프로그램은 이미 다 작성이 되었다. 가계부 프로젝트를 원래 목표는 12월까지 완료해서 1월 초 정도에 내 개인 서버를 centos로 교체하려고 할 계획이었으나 그 계획에는 실패했다. 실패 이유에 대해서는 먼저 프로젝트의 시간 분배 실패였다. 시간 분배 실패는 사실 평소의 프로젝트라면 중간중간 메뉴얼을 작성하기도 하지만 보통 빠른 결과를 내기 위해 나는 프로젝트 설계와 코딩에만 집중한다. 그러나 가계부 프로젝트는 초반에 블로그 포스트와 속도를 맞추려다 보니 점점 늦어지게 되고 블로그 포스트 내용도 점점 엉망이 되었다. 그래서 일단 프로젝트를 완성을 해야겠다고 생각해서 포스트 양을 줄이고 프로젝트부터 완료했다. 프로젝트를 완료하고 보니 역으로 블로그에 쓸 포스트 내용이 없어졌다. 무슨 내용을 써야 좋을지.이번에는 카테고리 페이지를 소개하겠다. 카테고리 페이지는 가계부를 쓸 때 수입, 지출, 저금, 출금의 타입에서 세부 카테고리를 말한다. 즉, 수입의 월급, 지출의 생활비, 용돈 등등을 말한다. 데이터 베이스 테이블 er은 다음과 같이 작성된다.low_category는 수입, 지출 등의 타입이다. 이 타입의 하위 테이블로 카테고리는 트랜잭션 테이블로 만들었다. 그리고 이 타입과 카테고리는 메인 트랜잭션인 가계부 테이블에 연결되어있다. 그러면 이 카테고리 트랜잭션을 입력하는 폼을 만드는 것이다.화면 디자인은 다음과 같이 했다.위에서부터 수입, 지출, 저금, 출금 타입이다. 이 타입의 경우는 변하지 않는 마스터 테이블의 값이기 때문에 동적인 페이지를 만들지 않고 정적으로 4개를 나누어서 만들었다. 관리자 페이지에서는 각 항목을 ajax로 저장할 수 있게 나누었었다. 즉, 유저 관리 저장버튼, 뷰 권한 저장버튼, 액션 관리 저장버튼이 따로 있었지만, 카테고리의 경우는 버튼을 하나로 만들어서 그냥 ajax가 아닌 page request 방식으로 데이터를 저장했다.(사실 용어적 표현만 다를 뿐 사실 동작 원리는 똑같다.)add 버튼을 누르면 새로운 아이템이 나오는데 셀렉트 선택화면에서 delete를 누르면 그 아이템은 사라진다.그러나 새로 추가하는 아이템이 아니고 테이터 베이스에 있는 데이터라면 그냥 물리 삭제하면 안 되기 때문에 delete를 해도 아이템은 사라지지 않고 논리 플러그 isdelete가 true가 된다.기존에 있는 데이터를 왜 물리 삭제하지 않고 논리 삭제, 즉 실제 데이터를 삭제하지 않고 삭제 플러그를 1로 수정하느냐면 카테고리는 가계부 테이블에 foreign key로 참조되어있다. 그럴 경우 상위 카테고리가 삭제되면 하위 가계부 테이블에 연결된 데이터를 모두 삭제해야 한다. 그렇게 되면 테이블의 값이 바뀔 수가 있기 때문에 카테고리는 삭제되어도 가계부 테이블은 변함이 없이 일관성을 유지하기 위해 논리 삭제를 하는 것이다. 기존 데이터는 삭제되지 않고 앞으로는 추가되지 않는 카테고리이다.가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/0c24762406544076b6a0288a1601c3b8.html</guid><pubDate>Tue, 29 Jan 2019 23:04:21 GMT</pubDate></item><item><title>UI(화면 디자인)의 중요성</title><link>http://www.nowonbun.com/Experience/f2b7848827664a14acda2bf72f18a6e1.html</link><description><![CDATA[개발자들끼리 프로젝트 이야기를 하다 보면 처음에는 프로젝트 공정과 시스템 사양, 프로그램 내부에 대해서 많은 이야기를 한다. project manager의 성격에 따라 많이 달라지는 부분이기는 하지만 많은 개발자가 화면 디자인 부분을 깊게 생각하지 않는 경우가 많다. 그렇다면 화면 디자인 부분이 중요하지 않은 걸까? 내 생각의 경우는 프로젝트 공정과 사양만큼 중요한 부분이 화면(ui) 디자인이라고 생각한다. (아래의 내용은 웹을 기준으로 작성했다. 그러나 cs프로그램도 어느 정도 비슷한 내용이다.)프로그램을 구매하는 사람 또는 이용하는 사람들은 개발자가 아닌 경우가 많다. 프로그램의 입장에서 같은 가격이면 화려한 기능과 편리성이 있으면 좋다. 하지만 그렇게 하면 많은 유저들이 프로그램의 기능을 다 못 쓰는 경우가 많다. 특히 그중 본인이 이해하는 부분만 쓰게 된다. 그런 가운데 개발자의 욕심으로 많은 기능과 편리성을 넣어봤자 사용하지 못하는 경우가 대부분이다. 그렇기 때문에 기능 면의 평가는 제대로 이루어지지 않는 경우가 많다. 반대로 기능보다는 화면 디자인에 대해서는 프로그램을 잘 모르는 사람도 평가할 수 있다. 예로, 어떤 프로그램은 자동화 기능이 많고 많은 기능이 탑재되었지만 화면은 윈도우 기본 디자인에 마치 90년대 프로그램 같은 색상을 가진 프로그램과 기능은 거의 없고 정말 필요한 기능만 있어도 화면은 메테리얼 디자인에 깔끔하고 심플한 디자인이 있는 프로그램이라고 하면 아마도 많은 사람이 후자의 프로그램에 좋은 평가를 내리고 선택할 것이다.그럼 많은 개발자들은 이런 이야기를 할 수 있다. 디자인은 디자이너가 있고, 디자인을 담당하는 파트가 있는데 개발자가 굳이 디자인까지 신경을 써야 하나? 확실히 나의 경험으로도 불과 10년까지만 해도 디자이너가 없으면 프로그램 개발이 되지 않았다. 왜냐하면 내가 만드는 프로그램 디자인은 너무 형편이 없었기 때문이다. 그러나 지금은 많은 오픈 소스 디자인 플랫폼이 생겼고, 또 이전처럼 포토샵이나 드림위버를 이용한 화면 설계가 필요 없이 프로그램 코딩처럼 css만으로도 화면설계가 가능하다. 오히려 트래픽등을 고려하면 이미지를 이용한 화면 디자인보다 css를 이용한 화면 디자인이 훨씬 가볍고 깔끔하다. 나도 디자이너 없이 프로그램 개발을 한 지도 오래되서 요즘에는 웹디자이너 직종이 아직 존재하는 지도 궁금하다. 최근 많은 프로젝트에서 웹 디자이너를 못 본 지가 오래 됐다.그렇게 디자이너가 필요 없어졌을 정도로 화면 디자인 설계가 쉬워졌지만 실제 품질은 어떨까? 요즘 프로그램들을 보면 화면 디자인 품질이 점점 후퇴하는 느낌이다. 아무래도 예전과 다르게 디자이너들이 없어지고 개발자들이 주를 이루고 화면 디자인에 대해 가볍게 생각하다 보니 이렇게 된 것 같다. 좋은 플랫폼 등이 있는 데도 오히려 프로그램 화면들은 후퇴한 느낌이다. 이건 지극히 개인적은 경험에 의한 것으로 최근에는 디자이너가 필요 없는 영역의 개발만 해서 그런지도 모르겠다.그러다 보니 최근 고객들과 상대하다보면 의외로 화면 디자인에 대한 컴플레인이 많다. 특히 모바일 쪽도 생각해야 하기 때문에 반응형까지 적용하다 보면 화면이 깨지는 경우가 종종 발생하기도 하고 또 유저들이 가능하면 최신 트랜드 디자인을 제대로 쫓아가길 원하는 요청도 꽤 많이 발생한다. 이런 것을 보면 현업에 있는 개발자들이 인식하는 것보다 꽤 많게 화면 디자인에 대한 요구사항이 높다. 그런데 고객의 요청은 그렇게 많은데 프로젝트 회의 가면 화면 디자인에 관한 논의는 10%도 안 한다. 그런 것을 보면 많은 개발자가 화면 디자인에 대한 인식을 크게 신경 쓰지 않는 것 같다. 거기에서 디자인에 대해 이야기하면 지루해하거나 경력이 적은 신입에 위임해 버리는 경우도 많다. 내가 생각하기에는 화면 디자인은 꽤 중요한 부분이라고 생각하는 데도 말이다.여기까지 내 생각을 나열하다 보니 결론을 어떻게 내려야 할지 방향을 잃어버렸다. 어쨌든 프로젝트를 할 때 개발 사양과 공정보다는 디자인 쪽도 꽤 비중 있게 생각해서 프로그램 품질을 높여야 하지 않을까?]]></description><category>개발경험</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Experience/f2b7848827664a14acda2bf72f18a6e1.html</guid><pubDate>Mon, 28 Jan 2019 22:43:08 GMT</pubDate></item><item><title>[가계부 프로젝트 13일 차] 모바일 디자인 설계 변경하기</title><link>http://www.nowonbun.com/Dialy/ec8433b8f37e45878361ea5fc3a3b677.html</link><description><![CDATA[어제 작업하면서 모바일 디자인이 영 찜찜했었는데 그냥 오늘 모바일 디자인을 전체적으로 손봤다. 사실 이건 작은 프로젝트라서 작업 중에 급히 디자인을 틀어도 리스크가 적었다. 보통 큰 프로젝트의 경우는 개발 작성 중에 사양을 바꾸어 버리면 리스크가 크게 온다. 예를 들면 예전에 테스트가 ok 되서 넘어간 문제들이 변경으로 인해 다시 에러가 난다든가 dom 구조, 클래스명, id가 바뀌면서 적용 안 되는 디자인 혹은 이벤트들이 해제가 되는 등 예기치 못한 에러가 많이 생긴다. 다행히 가계부는 초반에 dom을 비교적 깨끗하게 설계했고 작은 프로젝트라 큰 리스크가 없이 넘어갔다.이번뿐 아니라 예전에도 모바일 페이지는 많이 작성해 보았는데 항상 드는 느낌이 아무리 잘 설계를 해도 무언가 비좁아 보이는 느낌이다. 이 비좁게 느껴지는 느낌이 단순히 폰트가 커서가 아니었다. 네이버나 다음 포털 사이트의 경우는 글씨가 꽤 큰데도 비좁다는 느낌이 적었는데.. 나는 아무리 봐도 비좁게 느껴지는 느낌이 강했다. 그래서 구글이나 네이버와 내가 그간 작성했던 웹사이트 등을 비교해 보았는데 나오는 하나의 공통점이 있었다.그건 바로 여백이었다. 여백을 어떻게 관리하느냐에 비좁아 보이고 넓어 보이는 효과가 있었다. 나 같은 경우는 메뉴는 그런대로 없앴지만 각 카테고리 항목을 보면 테두리의 여백이 상당히 크다. 네이버의 경우는 양옆의 여백을 전부 없애서 최대한 크게 보이는데 나는 여백만 화면의 반을 차지했다. 그러니 화면이 작아 보이는 수밖에..위 이미지는 여백을 없애고 폰트도 약간 줄이고 grid를 두 줄이 아닌 한 줄로 변경헀다. 그랬더니 화면이 꽉 차 보이고 오히려 비좁게 보이기는커녕 화면이 꽤 여유있게 보인다. 여백의 차이가 이렇게 다르다니.. 새로운 걸 또 이렇게 배웠다. 여백은 이렇게 처리했고 이번에는 모바일 메뉴를 어떻게 할까 생각했다.메뉴는 pc 화면의 경우에 화면이 넉넉하니 메뉴를 보이게 해도 좁은 느낌이 없는데, mobile 화면의 경우는 메뉴를 보이게 하니 또 엄청 비좁아 보인다. 다른 포털사이트는 메뉴를 상위에 가로형식으로 깔아 놓았는데 나는 그렇게 하기 위한 최상단 타이틀이 없기 때문에 중간에 메뉴를 깔기도 힘들었다. 그래서 나는 메뉴를 숨기기로 했다. 숨기는 것이 메뉴를 아예 안 보이게 감추는 것이 아니고 위 메뉴 버튼을 누르면 사이드 팝업처럼 나오게 했다. 이건 부트스트랩 프레임워크에도 비슷한 기능이 있는데 그 메뉴는 개인적으로 마음에 들지 않아서 내가 왼쪽 사이트 팝업처럼 나오게 만들었다.중간에 디자인 화면 설계를 바꾸니 css를 새로 작성하는 것보다 시간이 더 걸린 것 같다. 왜냐하면 이전에 만들었던 css를 보고 수정하고 없으면 추가하는 방식으로 하다 보니 새로 만드는 것보다 확인해야 할 것이 많아서 그렇다. 오늘 디자인 설계 바꾸는데 거의 하루 전체를 css 정리하는데 투자 한 것같다.그래도 아직 다 정리를 못 해서 css 추적을 못한 style등은 일단 남겨두었다. 그리고 다른 건 다 정리했는데 아직 admin의 user 화면은 정리가 안 됐네... admin은 나만 볼 거니깐 시간 남으면 정리해야지..가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/ec8433b8f37e45878361ea5fc3a3b677.html</guid><pubDate>Thu, 24 Jan 2019 22:40:44 GMT</pubDate></item><item><title>[가계부 프로젝트 12일 차] Admin 페이지 작성하기</title><link>http://www.nowonbun.com/Dialy/984b765782ca4da18d84bad4f0e2676d.html</link><description><![CDATA[가계부 프로젝트 포스트는 정말 오랜만에 쓰는 것 같다. 거의 3주일만인가? 원래 블로그를 일기형식으로 가려는 건 맞는데 너무 코딩 위주로 글을 쓰다 보니 포스트의 내용이 재미가 없어서 고민을 조금 많이 했다. 어떻게 쓰는 것이 좋을까? 프로젝트를 하면서 생기는 벽이나 문제점을 어떻게 해결하는 과정을 담고 싶은 마음이 강하다. 그러나 1일 1 포스트의 압박으로 양을 늘려야 하는 부담감으로 내용이 부실해졌다. 그래서 조금 글의 양을 줄이더라도 조금 품질 좋은 글을 쓸까해서 포스트가 늦어졌다.프로젝트를 글로 남기다 보니 한쪽에서는 프로그램 작성을 해야 하고 한쪽에서는 포스트 글을 써야 한다. 그러다 보니 하루 중 블로그에 투자하는 시간이 너무 많다. 그래서 일단 프로젝트를 어느 정도 완성한 후에 천천히 글을 남기기로 했다. 지금도 가계부 프로젝트가 완전히 완성된 것은 아니다. 그러나 기본적인 기능은 거의 완료가 되었고 지역화(localization)와 에러 메시지, 예외 처리, 로그 처리, 마지막으로 소스정리 및 주석처리가 남았다.이전 포스트를 보니 메뉴 부분까지 해설이 되어있으니 이번에는 admin 메뉴를 확인하겠다. admin 메뉴는 viewrole에서 「admn」롤을 가진 유저만 접속이 가능하고 메뉴 뿐 아니라 페이지 내에서도 권한 처리해서 url로 직접치고 들어오면 http 에러코드 403을 표시하고 접속이 되지 않도록 처리했다.먼저 화면 디자인을 보게 되면 유저 관리항목과 view-role, action-role 관리, 그리고 마스터를 데이터베이스에 직접 insert할 경우 web server에 직접 refresh가 되게 만들었다.여기서 유저 관리항목에 group에 사용된 select box는 open source인 select2를 이용해서 멀티 셀렉트가 가능하게 했다.view-role과 action-role의 경우는 group과 user에 권한을 부여할 수 있게 하기 위해 radio로 선택해서 검색하게 했고 검색이 되면 add 또는 삭제를 하고 저장할 수 있게 했다.master refresh의 경우는 클릭하면 master테이블을 재검색해서 memory factory를 재갱신하는 기능이다.전체적인 흐름은 위와 같이 만들었다. 기능이 너무 없어서 최대한 심플하게 함들었다. 그런데 이렇게 만들고 나서 생각해 보니 모바일 디자인을 생각 안 하고 만들었다. 보통 많은 개발자들이 pc환경에서 개발을 하다보니 mobile 환경을 고려하지 않고 만드는 경우가 많다. 나 같은 경우도 pc에서는 심플한데 모바일에서는 이상하게 보인다. 기본 프레임이 bootstrap이기 때문에 어느 정도 반응형에 대응이 된다. 그러기 때문에 막 심하기 보기 흉하지는 않은데 처음 내가 생각했던 디자인은 아니다. 그리고 가계부의 경우는 우선 pc환경보다 mobile환경에서 많이 쓰기 때문에 mobile 디자인을 다시 고민해야한다. 기능은 pc환경과 비슷하기 때문에 디자인만 다시 만들어야 한다.가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/984b765782ca4da18d84bad4f0e2676d.html</guid><pubDate>Wed, 23 Jan 2019 23:14:07 GMT</pubDate></item><item><title>일본 취업의 느낀 점.</title><link>http://www.nowonbun.com/JapanLife/2742d61631164435bc05759e9a2dc97e.html</link><description><![CDATA[나는 일본에서 취업해서 현재 근무 중인 개발자다. 최근에 한국에서 취업하기 힘든지 일본 내에 한국인 취업자들이 많이 늘었다. 일본은 현재 인구 절벽으로 인해 베이비 붐 세대가 은퇴하고 나서 그 공백을 메꾸지 못해 구인난이 발생했다. 실제 실업률은 0%에 가깝다. 그래서 외국인을 많이 모집하고 있고 또 그중에서 일본 업무 문화와 가장 비슷한 한국인을 선호하고 많이 채용한다. 그래서 큰 기업은 물론이고 중소기업에서도 한국인 한두 명은 쉽게 볼 수 있다. 이런 현실이기 때문에 내 생각에는 준비만 잘 된다면 어쩌면 한국보다는 일본 취업이 더 쉬울지도 모르겠다.그렇다고 일본 취업이라고 다 쉬운 건 아니다. 기본적으로 의사소통(일본어)이 되어야 하고 개발자의 경우는 프로그램 코딩이 되어야 한다. 그리고 그 두 가지만 된다면 취업할 수 있다.it 업체 기준으로 한국 사람이 일본에 취업할 수 있는 경로는 몇 가지가 있다.첫 번째는 일본기업이 한국에 가서 취업 박람회 등을 개최하는 데 그때 면접을 통해 취업할 수 있다. 두 번째는 한국에서 일본 취업을 연결해 주는 국가 지원 프로그램이 있다. 산업인력공단 주최로 일본 취업 프로그램을 통해 일본기업이 한국에 방문했을 때 면접기회를 얻고 취업할 수도 있다.세 번째 방법은 직접 일본에 와서 취업하는 방법이다. 원칙적으로는 관광비자로 일본에 와서 취업 활동을 하는 것은 불법이다. 그래서 관광 비자로 오는 경우는 우선 면접이나 기업 설명회를 듣고 인사담당관의 한국 일정을 알아본 후 한국에서 지원하는 방법이 좋다. 이런 방법은 시간이 오래 걸리나 일본 기업에서는 기업설명회를 듣고 인사담당관에게 질문을 많이 하고 회사에 적극적인 관심을 보여주면 대부분 호의적으로 받아들리기 때문에 취업확률이 높다. 네 번째는 유학이나 워킹 홀리데이로 와서 취업활동을 하는 것이다. 이 경우는 먼저 일본어와 일본 문화도 익힐 수 있고 이런 점은 취업할 때 좋은 점수를 얻을 수 있다. 그래서 계획만 잘 세워져 있다면 취업을 비교적 쉽게 할 수 있다. 나 같은 경우는 일본에 사는 지인의 추천을 통해 일본에 취업했다. 한국이고 일본이고 인맥 취업은 엔간해선 취업이 가능하다.일본 it업계에 취업을 하려면 취업하는 기업 종류는 어느 정도 정해져 있다. 물론 일본어를 잘하고 능력 있으면 어디든 취업할 수 있지만 한국에서 막 오는 경우고 일본어와 문화가 서툴다고 가정할 경우이다.첫 번째 일본 it 대기업에 취업하는 것이다. 일본 it 대기업에 취업할 수 있는 야후 재팬, 라쿠텐, line 정도이다. 야후와 라쿠텐의 경우는 사내 분위기 자체가 외국인에게 호의적이고 line은 모기업이 naver이기 때문에 어느 정도 it에 자신있고 일본어 의사소통에 자신 있다면 취업이 가능하다. 라쿠텐의 경우는 일본어를 못 해도 영어를 잘한다면 취업이 가능하다. 일본 토익기준 800이니 한국에서는 700만 넘어도 가능하다. 물론 it 실력이 되어야 한다.두 번째는 외국 자본계 기업이다. 사실 급여는 외국 자본계 기업이 가장 많이 받을 수 있다. 그리고 일본문화나 일본어가 서툴더라도 취업할 수 있다. 외자계 기업의 사내는 일본 사람보다 영어권 사람이 더 많은 경우도 있다. 그리고 취업도 첫 번째 보다는 쉽다. 그러나 기업 문화가 모기업의 문화를 따라가는 경우가 많기 때문에 회사에서 일본 문화를 익히기 힘들고 인사 제도 등도 한국과 일본하고 다르기 때문에 적응하기 힘들다.세 번째는 일본 si 대기업이다. 여기는 언제나 인력이 부족하다. 일본 개발자도 si 대기업을 피한다. 왜냐하면 업무량이 많고 힘들기 때문이다. 그러나 급여가 높은 편이고 첫 번째와 두 번째에 비교하면 취업이 쉽기 때문에 한국 사람이 많이 몰린다. 예전에는 어떤 si 일본기업을 갔을 때 한국 사람이 너무 많아서 한국 기업인 줄 착각한 적도 있다.네 번째는 일본, 한국 파견기업이다. 여기는 입사는 매우 쉽다. 일본어, it실력이 없어도 취업할 수 있다. 그러나 급여나 장래성이 좋지 않다. 그리고 파견 나가서 거의 메인 업무보다는 자잘한 업무를 하는 경우가 많아서 경력에도 도움 되기 힘들다. 회사 내부 동료도 일본인을 거의 보기 힘들고 대부분 중국인 또는 한국인이다. 그리고 급여가 매우 낮고 취업이 쉽기 때문에 보통 일본 취업비자를 따고 다른 회사로 전직하기 위한 거점으로 취업하는 경우가 많다.일본 기업문화는 대체로 한국이랑 비슷하다. 직장상사가 퇴근하지 않으면 눈치껏 퇴근하는 분위기와 한 달에 한 번은 회식이 있어 회식에 참여해야 하는 등이 생활 문화가 비슷하다. 고객 대하는 건 한국보다 좀 더 딱딱하다. 일본도 갑은 절대적이고 한국처럼 갑질도 기업 또는 사람도 있다. 그러나 폭력 행사하진 않는다. 다른 점이라고 하면 업무적으로 나제나제 문화던가 츳코미 문화가 있어서 문제가 발생하면 정말 무슨 원인이었는지 집요하게 파는 경향이 있다. 당하는 입장에서는 괴롭지만 업무적으로는 이게 맞다. 그래야 다시는 실수를 하지 않으니깐.그리고 it 기업의 경우는 거의 잔업비가 나온다. 그래서 잔업을 너무 많이 하면 욕먹는다. 욕 안 먹는 방법은 잔업하고 신청하지 않는 거다. 한국이랑 비슷하나. 근데 이것도 지나치면 관리자나 매니저가 징계받는다. 과중 업무로 쓰러지거나 심하게 과로사라도 나오면 일본 전체가 들썩일 정도로 난리 난다. 그래서 정도껏 시킨다.차별적인 문제는 한국에서 일본에 가면 많은 차별을 가질 거라고 생각하는 경우가 많은데 그런 생각보다는 없다. 그러나 생각보다 없는 것이지 없는 건 아니다. 예를 들면 업무상의 경쟁하는 동료가 있고 그 동료가 일본인이라면 나보다는 그 일본인을 밀어준다. 업무상의 경쟁하는 동료가 없으면 나를 밀어준다. 그러나 일본 문화에서 좋은 점은 일본사람들은 외국인이라도 그들이 인정하면 확실하게 밀어준다. 그러나 이 단계까지 올라가기 위해서는 많은 노력이 필요하다.내가 생각하는 일본에서 취업 생활은 한국과 많이 다르지는 않다. 오히려 좋은 점은 휴일이 한국보다 많다. 전반적인 평균 급여는 높은 반면 생활 물가는 한국보다 낮다.(야채, 고기 등의 생활물가다. 이자카야는 한국보다 5배 비싸다.) 다만 야칭이라는 월세문화가 한국보다는 조금 힘들다. 보증금 개념이 없어서 한국보다는 처음 집구하기는 편한데 월세가 조금 비싸다. 그리고 전세의 개념도 없어서 꼬박꼬박 월급의 30%는 월세로 빼야 한다.최근 일본으로 취업하려거나 준비하는 분이 많은데 이글이 조금은 도움이 되었으면 한다.]]></description><category>일본생활</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/JapanLife/2742d61631164435bc05759e9a2dc97e.html</guid><pubDate>Sat, 12 Jan 2019 00:49:46 GMT</pubDate></item><item><title>슈퍼 개발자 그리고 구루라 불리는 그들.</title><link>http://www.nowonbun.com/Experience/93a62c184de645a0883e6e45871ffc55.html</link><description><![CDATA[영화나 드라마 등에서 가끔 개발자 또는 프로그래머 직업을 가진 사람들이 나온다. 보면 대부분 집에서 정말 컴퓨터를 좋아해서 마치 오타쿠 같은 이미지 또는 하나에 너무 몰입한 나머지 주변이 지저분한 이미지, 자기 관리가 조금 부족해서 대부분 뚱뚱하거나 빼빼 마른 이미지가 많다. 실제 주변에 it와 관계없는 사람들에게 개발자 혹은 프로그래머의 이미지에 관해 물어보면 대부분 방금 이야기한 것과 크게 다르지 않을 것이다.그러나 실제와는 많이 다르다. 프로그래밍을 하다 보면 많은 소스와 데이터를 다루기에 폴더 정리와 데이터 정리가 직업병처럼 있다. 그러니 실생활도 상당히 깔끔한 사람이 많고 항상 일정과 스케줄 압박 속에 살다 보니 자기관리가 철저한 사람이 많다. 항상 최신 동향을 살피고 학습을 위해 독서나 정보 습득량도 엄청나다. 이 기준은 내가 생각했을 때 개발 프로젝트를 잘 완수하는 대부분의 상급 개발자 경우다.상급 개발자의 기준이 뭘까? 많은 사람이 회사 내에서 멀티테스킹이 가능하고 혼자서 이것저것 뚝딱뚝딱 만들어 내는 사람이라고 생각한다. 그리고 주변 사람들은 그런 사람을 어려워하고 회사에서 그 개발자가 없으면 큰일이라 생각해 뛰어난 개발자로 인식하는 경우가 많다. 실제로 아직 많은 조직이나 팀에서 그런 사람이 많다.나는 그런 사람을 가장 최악의 개발자라 생각한다. 그런 사람의 특징 중 하나가 자신의 프라이드가 엄청나게 강해서 자기 스타일대로 프로젝트를 밀고 가는 경우가 많다. 즉, 협업이 제대로 이루어 질 수도 없고 업무 공유가 제대로 되지도 않는다. 막상 소스를 보면 다른 사람이 이해할 수 없는 괴이한 방식 또는 코딩 법으로 작성된 경우도 많다. 결정적으로 작은 프로젝트는 혼자서 잘하지만 큰 프로젝트에서 헤매는 경우가 많다.모든 소프트웨어 공학이던가 많은 코딩기법은 협업을 위한 기준으로 설계되어 있다. 보통 프로그램은 생산한다고 하면 혼자서 할 수 없기 때문이다. 그렇기 때문에 협업 없이 프로젝트를 한다는 건 그런 모든 기술과 지식을 무시하는 것이고 그런 사람을 뛰어난 개발자라 생각하지 않는다. 물론 그런 사람들이 다 잘못된 개발자라고 생각하진 않는다. 주변 상황이 그렇게 만드는 경우도 많고 자신이 생각하는 개발자 모델상이 잘 못 설정되는 경우도 있다.개발자 사이에서는 개발의 신이라 불리는 구루라는 존재가 있다. 왜 구루인지 단어의 어원은 나도 잘 모르겠다. 구루의 단계는 이상적이고 생각만 해도 엄청나다.구루는 보통 자기희생적이다. 프로젝트를 하다 보면 업무 코딩, 화면 디자인, 배치등 많은 파트가 있다. 그중 공통 부품이나 코어, 프레임워크의 영역도 있는데 대개 초기 설정만 하고 넘어가는 경우가 많다. 하지만 이 코어 부품을 정말 잘 만들고 계속된 업뎃과 리펙토링을 한다면 프로젝트는 놀라울 정도로 최적화가 되고 버그 등을 상당히 줄일 수 있다. 문제는 이런 코어 영역은 단기간의 변화가 힘들고 아무리 잘 만든다 해도 엔드 유저가 체감하는 경우는 시간이 걸린다. 심하면 그런 변화를 못 느끼는 경우도 있다. 그러다 보니 실적과는 거리가 있는 개발영역이고 난이도가 높은 영역이다. 그러나 구루라 불리는 그들은 자기 영역을 소화하면서도 코어의 중요성을 알기에 실적과 거리가 멀어도 코어 개발에 상당히 신경을 쓴다. 또 코어를 수정하려면 영향이 미치는 모든 영역과의 의사소통과 확인은 필수이기 때문에 사람들과의 교류나 의사 전달 방식이 엄청나게 뛰어나고 나아가서는 프로젝트 관리에서도 상당한 카리스마와 능력을 가지고 있다.프로그램은 내부적 처리나 기능도 중요하지만, 화면 디자인도 중요하다. 화면 디자인의 중요성은 다음 포스트에서 이야기하겠다. 구루는 이런 디자인의 중요성을 잘 알기 때문에 화면 디자인에 대해 많은 시간과 노력에 많은 투자를 한다. 그리고 최신 디자인 동향에 대해서도 누구보다 빠르고 관심을 두고 있다. 그러다 보니 프로그램의 영역을 넘어서 디자인 감각 그리고 프로그램에 대한 가치를 올릴 줄 알고 크게는 영업적인 감각과 마케팅적인 감각에도 상당한 지식이 많다.구루의 영역은 이런 것보다 훨씬 더 심오하고 이상적이지만 내가 느끼는 구루의 영역은 이렇다. 실제 이런 사람이 존재는 할까? 글쎄 아쉽게도 나도 실제로 직접 구루라 불리는 개발자를 마주치지는 못했다. 하지만 스택 오버플로우나 깃 허브 등의 프로그램 커뮤니티에서 오픈소스 프로젝트를 살펴보면 그런 구루같은 개발자들이 간혹 눈에 띈다. 어느 프로젝트이든지 핵심이 되는 라이브러리이고 성능도 뛰어나며 웹의 경우는 화면 디자인에 대해서도 쉽게 접근할 수 있는 오픈 소스 라이브러리들이 있다. 그리고 그런 라이브러리 혹은 프레임워크가 가지는 시장적 가치는 초월하지만, 무료이고 오픈소스로 제공하는 개발자들이 있다. 사실 우리가 쉽게 사용하고 있는 그런 라이브러리 중에 그런 것들이 많다.구루라 불리는 그들이 있기에 실력이 부족한 나 같은 개발자가 그나마 월급 받으면서 일할 수 있고 좀 더 질 좋은 소프트웨어를 생산할 수 있다고 생각한다. 모든 개발자가 그렇지만 나도 언젠가는 구루라고 불릴 때까지 노력하고 그 위치에 올라가는 날 개발 업계에 오픈소스를 많이 제공하는 하여야 할 날이 올 것이다.]]></description><category>개발경험</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Experience/93a62c184de645a0883e6e45871ffc55.html</guid><pubDate>Fri, 11 Jan 2019 00:14:58 GMT</pubDate></item><item><title>블로그의 선택과 경험들.</title><link>http://www.nowonbun.com/Experience/e7e3aa7732b94f52b993e5f45b962c37.html</link><description><![CDATA[이 글은 블로그를 시작하시려는 분들 또는 보금자리를 옮기시려는 분들께 도움이 되었으면 한다.내가 블로그를 운영해 본 플랫폼은 네이버 블로그, 티스토리, 다음 블로그, 구글의 블로그, 일본의 아메바, 야후의 블로그(지금은 없어진 것 같다), 마지막으로 github이다. 이 블로그 중의 한 곳을 추천하고자 하면 각기의 장단점이 분명하기 때문에 선택하기 어렵다.네이버 블로그는 일단 초심자가 사용하기는 매우 좋다. 예쁜 템플릿도 많고 딱히 html에 관한 지식이 없어도 블로그를 관리하고 운영하는 데 불편이 없다. 그리고 블로그를 운영하면 검색엔진 노출에 대해 신경을 쓰게 되는데 우리나라는 naver가 대표적 포탈이고 많은 사람이 접속하므로 검색 노출도 쉽고 많은 사람이 쉽게 유입이 된다. 그렇게 많은 이점이 있는 데도 단점 또한 있다.네이버 블로그는 정해진 템플릿외로는 자신의 입맛에 맞게 블로그 수정이 어렵다. 그리고 전체적인 네이버 템플릿을 벗어날수 없으므로 페이지 어딘가에는 네이버 마크가 보이고 아무리 예쁘게 꾸미더라도 전체적인 테마나 분위기가 네이버 블로그라는 게 느껴진다. 또 네이버 블로그는 네이버 이외에 검색엔진에 대해서 노출이 어렵다. 우리나라에서는 naver가 강세이지만 세계적으로는 역시 google이 강세이다. 그런데 naver 블로그는 google 검색에서는 잘 노출이 되지 않아 접속 지역이 한국으로 한정되어 버리는 경우가 많다.그리고 javascript의 삽입이 막혀있기 때문에 네이버 툴 이외의 오픈소스와 툴을 사용할 수 없다. 네이버 애널리틱스도 분명 좋은 툴이지만 그래도 구글 애널리틱스등 여러 시점으로 접근할 수있는 툴을 사용해야 하는데 네이버 블로그에서는 그런 적용이 어렵다.그리고 블로그를 운영하면서 광고 수익 또한 무시할 수 없는 부분인데, 네이버 블로그는 애드포스트 이외의 광고는 달수 없으며 애드 포스트 수익 또한 구글 애드센스와 비교했을 때 높은 편은 아니다. 위의 네이버 정책은 내가 네이버에서 블로그 활동했을 때인 10년전 기준이므로 지금과 다를 수도 있다. 그러나 전체적인 이미지는 아마 그때나 지금이나 크게 다르지 않을 거라고 생각된다.나는 일단 네이버에서 약 2년 정도 활동하다가 템플릿 수정이 어려움을 느끼고 티스토리로 옮겼다. 지금도 명월 일지는 티스토리에서 운영 중이다. 현재는 거의 망하기 일보 직전이지만 올해 내로 꼭 다시 개편할 의지가 강하다.티스토리의 장점은 역시 html 수정이 가능해서 html 지식이 있는 사람은 자유스럽게 100% 수정할 수 있다. 그리고 javascript 삽입도 허용되어 있으므로 오픈 소스와 여러 가지 웹 툴을 적용하는 것도 가능하다. 네이버의 단점을 완벽히 보완하는 장점이지만 반대로 네이버 블로그의 장점이 티스토리에서는 단점이 된다. 먼저 네이버 검색에도 노출되기는 하지만 네이버 블로그보다 우선순위가 밀리고 티스토리 트래픽 속도가 기본 적으로 느리므로 사이트 품질로 인한 구글 검색에서도 상위 랭크를 하기가 어렵다. 물론 포스트 품질이 좋으면 상위 랭크가 가능하다. 그리고 트래픽이 느리므로 한국이 아닌 외국에서의 검색 상위 랭크는 역시 힘들다. 티스토리도 결국 네이버처럼 한국 한정으로 되어버린다.다음 블로그의 경우는 일주일정도 써봤는데 네이버와 티스토리를 섞어 놓은 듯한 느낌을 받았다. 그러나 다음 검색 포탈도 무시할만한 검색량은 아니지만, 네이버만큼은 아니기에 매리트를 느끼지 못했다.예전에 일본 블로그를 운영한 적이 있다. 지금은 관리적 어려움으로 폐쇄했다. 그때 일본 블로그는 처음 야후 재팬 블로그, 아메바, 최종적으로 구글 블로그를 이용했다.처음에 야후를 사용한 이유는 일본의 대표 포털 사이트는 야후 재펜이고 한국의 네이버처럼 쉬운 접근성과 처음 빠른 방문자를 기대했기 때문에 시작했다. 그러나 예상과 다르게 템플릿도 매우 적고 정책도 스크립트나 html 수정이 금지되어 있었다. 그리고 기본적으로 블로그에 광고가 게시되는데 그 광고수입은 내가 아닌 전부 야후재펜에서 가져가는 구조이기 때문에 야후에서 블로그를 할 동기부여를 얻지 못했다. 지금은 야후 재펜에서 블로그 서비스를 중단한 것으로 알고있다.그렇게 야후를 떠나 새로운 보금자리를 알아보던 중 일본에서는 의외로 포탈보다는 마이너 블로그가 더 활성화되어있는 걸 알고 아메바 블로그를 시작했다. 아메바 블로그는 일본 내에서 일본 연예인들이 많이 하는 블로그로 유명하다. 그래서 그런지 플렛폼에 기본적인 사람 유입량이 꽤 많고 야후보다는 정책이 까다롭지는 않았다. 그러나 아메바도 역시 기본 광고가 게시되는데 그 광고수입은 아메바에서 가져간다.일본은 블로거들이 거의 자원봉사자 수준인가? 개인이 수입을 발생시킬 블로그를 만들 플랫폼이 없는 것 같다. 그래서 다시 옮긴 곳이 구글 블로그이다.구글 블로그는 티스토리처럼 정책도 모두 열려있고 트래픽도 빠르다. 그리고 다국어 지원이 있어서 한글로 포스팅을 해도 자동으로 보는 나라에서 자동 번역이 되어서 보인다. 애드센스를 붙일 수 있어서 수익을 만들기도 좋다. 그러나 구글 블로그는 기본 템플릿은 거의 없고 있는 것도 예쁘지가 않다. 기본적으로 html과 javascript, 프로그래밍 지식이 없으면 운영하기가 어렵다. 할 수 없는 건 아닌데 예쁘게 나오기가 어렵다. 그렇다고 html 수정도 편한 것도 아니다. 많은 기능을 제공해서 그런지 정말 많은 api가 있다. 문제는 api가 너무 많아서 내가 원하는 데이터를 가져오기 위해서는 메뉴얼을 한참 뒤져야 한다. 아니 제대로 된 사이트를 만들려면 메뉴얼을 프로그램을 공부하듯이 공부해야 만들 수 있다. 즉, 난이도가 어렵다.그리고 데이터 구조도 한국식 블로그와 다르게 일기식으로 작성된다. 한국은 카테고리별 포스트 내용에 대해 분별 되지만, 구글은 카테고리 개념이 없고 단지 시간과 날짜별로 분별된다. 이쪽은 적응되면 더 편한 구조이기는 하지만 아직 나는 생소했다.지금은 github에서 블로그를 개설했다. github는 기본적으로 웹 호스트나 블로그 플랫폼 서비스가 아니고 무료 소스 관리 저장소이다. 그러다 보니 여기에서 블로그를 작성하는 것은 템플릿 등을 제공받아서 만드는 것이 아니고 개인이 웹 사이트 자체를 제작해야 한다. 즉 프로그램에 대한 전반적인 지식이 없으면 사용할 수 없다. 물론 찾아보면 github에서 블로그를 개설할 수 있는 툴들도 꽤 많다. 그러나 나는 사용해 본 적이 없다.트래픽 전체 제한이 있지만 블로그 서비스에 한에서는 제한이 없는 것과 같다. 월 100gb인데 블로그에서 월 100gb는...속도는 내가 경험한 플랫폼 중에서는 가장 빨랐다. 아무래도 정적 html이다 보니 pacing영역이 없어 빠를 수밖에 없다. 속도는 한국만 빠른 게 아니고 전 세계 어디서든 빠르다. 즉, 다국적화하기가 용이하다.여기까지 사용해본 블로그들에 대한 느낀 점을 정리해 봤다. 물론 사람마다 다르게 느끼는 점도 있을 수 있고 정책도 예전과 바뀌었을 수도 있다.. 단지 처음 블로그 하는 사람들에게는 참고되었으면 한다.]]></description><category>개발경험</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Experience/e7e3aa7732b94f52b993e5f45b962c37.html</guid><pubDate>Tue, 08 Jan 2019 23:01:17 GMT</pubDate></item><item><title>코드 리뷰에 대한 문화</title><link>http://www.nowonbun.com/Experience/6f8079e8ca7744bc8919d110539ce845.html</link><description><![CDATA[며칠 전에 한국에서 일감을 받아 아르바이트했었다. 큰 프로젝트도 아니고 단순 작업이 많은 프로젝트이다. 프로젝트를 작업하면서 프로그램 사양에 대한 정보가 너무 부족한 느낌이 있어서 다른 사람들이 작성해 놓은 코드를 직접 보게 되었다. 사실 여러 글로 된 사양서라든가 설명보다는 코드 레뷰가 개발자에게는 서로 이해하기 편한 부분이 많다. 예를 들면 문제가 닥쳤을 때 그 문제에 대한 원인과 해설도 매우 중요하지만, 많은 개발자가 그런 해설은 생략하고 코드 한 두 줄만 보고도 이해하고 해결하는 경우도 적지 않다.그렇기 때문에 나는 다른 사람이 작성해 놓은 코드를 보고 본질적인 질문을 담당자에게 했다. server와 client에 대한 사양을 맞추려면 xx 씨가 작성한 코드를 보니 이렇게 하면 되는가요?그러더니 나한테 오는 답변은 엄청 놀라웠다. 다른 사람의 코드보고 리뷰하면 안된다는 점이다. 이게 한국 문화에서는 프로젝트 안에서 위화감을 조성할 수 있기 때문에 자기가 제시한 사양만 보고 작성하라는 점이다. 그 소리를 듣고 왜 코드 리뷰를 하는 자체가 팀 내에 위화감을 조성하는 것이지? 마치 내가 다른 사람 코드를 본 게 엄청나게 잘못된 것처럼 혼이 났다.그러나 내 생각은 그렇다. 코드 리뷰가 없으면 많은 사람과 작업할 때 어떻게 사양을 정확하게 맞추지? 혹시 중간에 담당자가 퇴사하게 되면 그 코드는 누가 처리해야 하는 거지? 그 코드가 정확하고 버그가 없다는 것을 어떻게 보증하지? 이런 생각들이 들었다. 나도 구루라고 불리는 개발자의 신 급은 아니다만은 그래도 어느정도 내 코드에 대한 철학이 있고 자신도 있다. 나는 여기까지 오는 데는 수많은 코드 레뷰들이 있었다. 많은 선배가 작성해 놓은 코드를 분석하고 그 안에서 나라면 어떻게 했을까 하는 상상하며 나만의 프로그램 철학을 구축했다. 또 많은 선배와 후배들이 내 코드를 리뷰하면서 내가 잘못 생각한 점이나 수정하는 데 많은 도움이 되었다. 개인적인 배움을 떠나서도 프로젝트를 함에 있어서 코드 리뷰를 하면 이렇게 생각할 수도 있구나를 느낀 적도 있고 프로젝트 사양을 좀 더 정밀하게 확인도 가능하여 좀 더 완성된 프로그램으로 흘러간 적도 많다.그러면 왜 한국은 코드 리뷰에 대해 부정적인 이미지가 있을까 생각해봤다.　표준에 대한 인식 차이가 있는 것 같다. 나는 자바의 경우는 구글 코딩 표준에 맞추고 c++, c#의 경우는 ms에서 제공하는 코딩 표준에 맞춘다. 코딩 표준이라고 해봐야 class 명은 어떻게 선언하고 변수명은 어떻게 하고 띄어쓰기, 주석 작성법 등이 적혀있는 것이다. 한번은 이런 경험도 있었다. 기존에 있는 프로젝트에 버그가 발생한다고 해서 코드 수정 의뢰를 받은 적이 있었다. 그런데 그 안에 코드만으로 도저히 확인할 수 없을 정도로 코드가 엉망진창이었다. 코드만 보면 프로그램이 돌아가는 게 기적일 정도의 수준이었는데, 나도 주어진 업무를 해야 하고 수정해야 하니 작성자에게 해당 버그에 대해 물어본 적이 있었다. 묻다 보니 자신도 해당 로직을 잊어버리고 왜 이렇게 작성했는지 다시 물어보니 도리어 버그를 고치는 일은 당신 일인데 왜 자꾸 귀찮게 하느냐고 타박을 받은 적도 있었다.아마 표준을 정확하게 인식하고 작성했더라면 누가 리뷰를 하더라도 표준안에서 이야기하므로 서로 간에 얼굴 붉힐 일이 없다. 그러나 상대방이 표준을 모르는 상태에서 내가 표준에 대해 이야기를 하니 오히려 나에게 자기를 가르치냐며 화를 내는 분위기가 되어버렸다.내 생각은 프로그래밍하는 데에 있어서 코딩 표준뿐 아니라 많은 표준이 존재한다. 그것이 개발자간에 정해놓은 표준일 수도 있고 프로젝트안에서 정해놓은 표준일 수도 있다. 그런 표준은 개발자 간에 의사소통이 가능하게 하는 기본적인 약속이다. 프로젝트를 하기 전에 이런 표준 정책을 설정하는 게 후에 코드리뷰 문화를 만드는 데 있어서 중요하지 않을까 싶다.또 하나의 차이는 지나치게 앞선 기술, 아무도 모르는 기술을 사용하는 것이다. 가끔 프로젝트를 하기 전에 시스템 사양과 표준사양을 맞추는 게 보통이지만 가끔 튀는(?) 개발자들이 아무도 모르는 자기만 잘 아는 프레임워크를 도입하거나 라이브러리를 사용한다. 그것을 사용하는 것에 문제가 있는 것은 아니지만 많은 사람이 모르는 것을 앞서 도입하는 것은 문제가 있다. 첫째는 프로젝트 수행함에 프레임워크 학습 시간이 필요해지기 때문에 생산속도가 느려질 수 있다. 둘째는 많은 사람이 모르는 상황이기 때문에 코드 리뷰가 불가능해진다. 서로 프래임워크를 모르는 상황에서 리뷰를 해 봤자 서로 간의 의견만 달리 되고 충돌이 발생하는 것이다.이러다 보니 코드 리뷰하면서 충돌이 자주 발생하다 보니 리뷰에 대한 부정적인 생각이 자리 잡게 되고 결국에는 리뷰를 생략하는 문화가 발생하는 것 같다.내 생각에 코드 리뷰는 중요하다. 이유는 분명 프로젝트를 구성하는 pm과 작성하는 개발자 사이에는 의사소통의 차이가 존재한다. 프로젝트는 혼자 하는 것이 아니기에 여러 사람 간에 인식 차이도 분명히 존재한다. 그 차이를 줄이고 발전적으로 진행하기 위해서는 코드 리뷰는 당연하다고 생각한다. 나도 어느덧 한국에서의 프로젝트를 했던 시간보다 외국에서 프로젝트를 했던 시간의 비중이 점점 커진다. 내가 신입 때 한국에서 프로젝트를 할 때 선배들로부터 코드 리뷰를 많이 받았다. 그리고 경력이 있는 지금도 여러 선후배에게 리뷰를 계속 받고 있다. 그러다 보니 나는 이게 당연하다고 생각하고 프로젝트에서 필수적인 요소라고 생각했었는데 최근 한국 프로젝트를 하면서 이런 문화 차이가 있는 것에 대해 당황스러웠다.최근 한국 sw는 위기라고 생각한다. 여러 가지 이유가 있겠지만 한국 sw의 품질도 한몫한다. 한국 sw은 대다수가 꽤 버그가 많다. 그러기에 우리도 코드 리뷰 문화와 코드 토론 문화가 정착되어야 한다고 생각된다.]]></description><category>개발경험</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Experience/6f8079e8ca7744bc8919d110539ce845.html</guid><pubDate>Mon, 07 Jan 2019 22:35:17 GMT</pubDate></item><item><title>[Centos 개발 서버 설치] 쉘 프롬프트 설정</title><link>http://www.nowonbun.com/Dialy/b4dfd57f33fe41918e073afeb56b9acd.html</link><description><![CDATA[
table td{
	font-size:inherit;
}

 쉘 프롬프트 설정은 꼭 필요한 설정은 아니고 그냥 보기 편하고 편의에 의해 설정하는 것이다. 쉘 프롬프트 설정은 아래 이미지와 같이 딱딱한 흰색 프롬프트에서 색깔도 좀 넣고 시간 표시도 나오는 프롬프트로 수정하는 것이다. 먼저 .bash_profile을 열어서 나는 아래와 같이 넣었다.먼저 전체 코드를 보면 무슨 외계어처럼 쓰여있어서 이해가 안될 수 있다. 여기서 먼저 \033[숫자(30~37)m을 제거해 보면 「\[\a \u@$host:\w\$\]」형식의 구문이 나온다. 이러면 조금 보기는 편하다. 프롬프트 정보표는 다음과 같다.쉘변수 기호
의미

\t
24시간의 단위로 현재시각을 hh:mm:ss 로 표시

\t
12시간의 단위로 현재시각을 hh:mm:ss 로 표시

\@
12시간의 단위로 현재시각을 오전/오후 로 표시

\d
현재 날짜를 나타냄. 요일, 월, 일 형식으로

\s
현재 사용중인 쉘의 이름을 나타냄 (c쉘이면 /bin/csh, bash쉘이면 /bin/bash)

\w	
현재 디렉토리의 전체 절대경로를 모두 표시함

\w
현재 디렉토리의 전체 절대경로명 중 마지막 디렉토리명만을 표시함. 즉 현재디렉토리만 표시함

\u
사용자명을 표시함

\h서버의 호스트명을 표시함 (www.uzuro.com에서 www 부분)\h서버의 도메인명을 표시함 (www.uzuro.com에서 uzuro.com 부분)\#접속한 순간부터 사용한 명령어의 번호를 1번부터 차례대로 표시함\!사용한 명령어의 history 번호를 표시함\\$현재 사용자가 root(uid 가 0 )이면 # 을 표시하고 아니면 $ 를 표시함\\'\' 문자 자체를 표시함\aascii 종소리 문자 (07)\eascii 의 escape 문자 (033)\n개행문자 (줄바꿈)\v사용중인 bash 의 버전\v사용중인 bash 의 배포, 버전+패치수준으로 버전을 상세히 표시함\rcarrage retrun
그럼 「00:35:15 nowonbun@localhost.localdomain:~$」이렇게 표시되는 것이 이해된다. 다음에는 색상을 넣었다. 색상표는 다음과 같다.
코드
색상

30
(nomal) black

31
(nomal)red

32
(nomal)green

33
(nomal)yellow

34
(nomal)blue

35
(nomal)magenta

36
(nomal)cyan

37
(nomal)white


「\033[숫자(30~37)m」가 위에 색상정보와 관계되어 있다. 이제 최초 이미지처럼 나오는게 이해된다. 이걸 .bash_profile에 넣었고 source .bash_profile를 치면 바로 적용된다.
프롬프트 정보표와 색상표는 「uroa 개발 블로그」를 참조하였다.참조 url - http://uroa.tistory.com/116]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/b4dfd57f33fe41918e073afeb56b9acd.html</guid><pubDate>Sat, 05 Jan 2019 00:51:21 GMT</pubDate></item><item><title>[Centos 개발 서버 설치] root 계정 접속 제한 및 wheel 그룹 추가</title><link>http://www.nowonbun.com/Dialy/bf6f61376771417bae8d6ff4f244cef9.html</link><description><![CDATA[ 원래 처음 계획은 12월 말까지 centos 서버 완료하고 가계부 완성해서 딱 1월 1일부로 서버 이전이 목표였는데. 최근 슬럼프도 찾아오고 몸도 많이 안 좋아져서 일주일 정도 그대로 쉬어버렸다. 많은 사람이 그렇고 나도 그렇지만 직장인 슬럼프가 찾아오면 진짜 대책 없다. 갑자기 모든 게 하기 싫어지고 심지어 본업마저도 출근하기 싫어지는 현상이 찾아온다. 이 시기에는 의욕도 없어지고 정말 괴롭다. 그래도 힘내야지.. 이번에는 centos에서는 root계정의 ssh 접속 제한을 하고 대신 wheel 그룹의 유저를 추가해서 "sudo su" 명령어로 관리자 권한을 취득할 수 있는 형식으로 서버에 접속할 수 있도록 수정하겠다. 이렇게 수정하는 이유는 root계정은 linux의 기본 관리자 권한이므로 root 계정이 접속할 수 있으면 공격받을 수 있는 확률이 높아진다. 그러므로 root 계정을 접속 제한하고 wheel 그룹에 유저를 추가해서 그 유저가 "sudo su"를 통해 권한을 얻을 수 있도록 수정해야 한다. 먼저 wheel 그룹만 su명령어를 사용할 수 있게 수정했다. 수정 파일은 "/etc/pam.d/su" 의 auth required의 주석을 제거하면 된다. 그리고 wheel그룹에 사용자를 추가했다. 수정 파일은 "/etc/group" 파일이고 wheel:x10 부분에 추가하면 된다. su 파일의 실행 권한을 wheel 그룹이 사용할 수 있게 수정했다. 마지막으로 root 계정이 ssh 설정이 되지 않도록 수정하면 root 계정 접속이 제한된다. 수정 파일은 "/etc/ssh/sshd_config" 의 permitrootlogin을 no로 변경했다. 마지막으로 reboot로 재부팅을 하고 root로 접속해 보면 설정이 되었는지 확인할 수 있다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/bf6f61376771417bae8d6ff4f244cef9.html</guid><pubDate>Fri, 04 Jan 2019 23:53:00 GMT</pubDate></item><item><title>프로그램 개발자의 외부 시선과 현업에서 보는 시선의 차이</title><link>http://www.nowonbun.com/Experience/4baf26e0f85448eda758c5c738380b35.html</link><description><![CDATA[이 카테고리에서 이야기하는 건 순전히 개인 경험과 생각에서 나오는 글이기 때문에 개인마다 견해 차이가 있다. 즉, 내가 생각하는 게 다른 현실에서는 생각이 다를 수도 있다. 그런 점이 있으면 댓글로 이야기를 이어갔으면 하는 바람이다.지금으로부터 약 10년 전쯤인가 프로그램 개발자 폐를 잘랐다는 기사가 있다. 나는 그 기사가 잘못되었고 그 개발자가 자초한 일이라고 이야기하는 건 아니다. 실제로 어떤 분들은 엄청나게 잔업하고 몸 상할 정도로 일하는 사람도 많이 보았다. 내가 하고 싶은 이야기는 그 기사의 파급력이 꽤 상당히 강해서 그 이후로 대학생이나 어린 친구들이 프로그래머를 직업을 선택하기에 기피현상이 일어났다. 그건 현재도 마찬가지고 실제로 프로젝트를 하다 보면 신입 개발자를 보기가 예전보다 많이 어려워졌다. 그나마 있는 신입 개발자들도 전공을 택해서 프로그램 개발의 희망을 품고 선택하는 사람보다 자기가 하고자 하는 일에 취직이 잘 안 되거나 여러 이유 등으로 인해 어쩔 수 없이 택하는 경우가 많다.먼저 이야기하고 싶은 이야기는 개발자 직업이라는 게 그렇게 지옥만 있는 것은 아니다. 먼저 수익 면에서 살펴보면 우리는 직업의 수입을 결정할 때 보통 상위 1%~5%의 연봉으로 직업의 수입을 본다. 예를 들면 연예인 같은 경우도 모두가 몇십억씩 수입이 있는 게 아니고 상위 1~5%만이 고수입인 것으로 알고 있다. 변호사도 대형 로펌은 상당한 수입을 올리지만 대게는 보통 월급쟁이랑 비슷하다. 의사 같은 경우도 분야에 따라 다르겠지만 페이 닥터는 보통 월급쟁이랑 비슷하게 받는 사람도 많다. 사람들이 인식하기에 상위 레벨의 수입으로 그 직업군은 수입이 좋다라고 이야기 하는 경우가 많다. 그러나 프로그래머만은 그렇지가 않다. 일단 자신이 회사를 차려서 독립하거나 자신의 사이트를 구축해서 운영하는 사람들은 제외하자. 그 사람들도 출신은 프로그래머이긴 하지만 사업가이기 때문에 비교하기가 힘들다. 단순히 기업에서 월급 받고 일하는 사람 중의 수입을 보면 프로그래머도 상위 수입이 나쁘지는 않다. pm이나 대형 프로젝트 아키틱쳐의 경우는 성공보수로 수억을 받는 경우도 꽤 있다.그렇다면 왜 프로그래머가 안 좋은 인식이 많은 걸까? 생각해보면 잔업이 많아서 자기가 일하는 시간에 비해 적게 받는다는 인식이어서 일지도 모른다. 나는 여기서 이야기하고 싶은 게 일하는 시간이라는 것이다. 우리는 무언가를 생산하는 생산직이기 때문에 일하는 시간에 따라 소득을 책정하는 것은 잘 못된 것 같다. 예를 들면 아파트를 건축해서 올린다고 할 때, 아파트를 짓는데 한 명은 1년이 걸리고, 한 명은 1달이 걸렸다. 그럼 1년 걸린 사람은 돈을 더 받아야 하는 논리가 된다. 원래는 1달 걸린 사람이 돈을 더 받아야 하는데 말이다. 근데 이게 실제 업무에 가도 그렇다. 일을 빨리 처리하는 사람은 월급만 받고, 일은 늦게까지 하는 사람은 잔업비까지 돈을 더 받는 경우가 많다. 그리고 프로젝트가 실패했을 때, 일을 빨리하는 사람들은 실패확률이 적긴 하지만, 그래도 실패했다고 하면 사람들의 인식은 일 안 하고 매일 칼퇴근하더니 실패했다. 그러나 매일매일 잔업해서 늦게까지 한 사람은 성실하다는 인식으로 실패해도 열심히 했으니깐 결과가 안 좋아도 넘어가는 경우도 있다. 상황이 이러다 보니 일이 잘 풀리더라도 늦게까지 잔업 하게 되고, 결국은 이게 개발자들 사이에서는 늦게까지 일하는 것이 당연한 게 되어 버렸다. 개발자는 밤새우면서 일해야 더욱 생산적이라고.실제로 나도 신입 시절에 내가 받은 할당을 빨리 끝내고 집에 가려고 할 때, 엄청나게 혼난 적도 있다. 내 일을 다 했을 뿐 아니라 다른 사람들 일까지 도와줘서 전체적인 진척이 상당히 빨라졌는데도 상사가 개발자는 밤을 새워야 한다고 강요를 받았었다. 일이 더는 없는데 왜 밤을 새워야하지? 그리고 밤을 새우면 오히려 생산성이 떨어지지 않나?라는 생각이 들었었다. 아마도 그런 인식이 있고 문화가 되어버려서 많은 사람들이 기피하지 않을까 한다.그러나 최근에는 많이 달라졌다. 이전보다 프로젝트 관리 기술이 많이 발달했고 이제는 기간 내에 프로젝트가 완료되지 않으면 개발자의 탓보다는 스케줄을 설정한 pm의 잘못이 있다는 인식이 많이 생겼다. 그리고 여러 가지 관리 기법과 관련된 프로그램도 많이 생겨서 개발자의 생산력의 문제보다 무엇이 문제였는지 확인하기가 예전보다 많이 좋아졌다. 그래서 요즘은 예전보다는 잔업이 많이 줄었고 늦게까지 강요하는 일도 많이 줄었는데 외부에서는 아직 그런 인식이 많이 바뀌지 않은 듯싶다.직업의 수명에 대한 인식이다. 요즘도 인터넷에서 돌아다니는 글을 보면 프로그래머는 40대 초중반에 실직해서 치킨집을 차린다. 이런 글이 참 많다. 그러나 이건 실제로 40대 초중반에 프로그래머에서 다른 직업으로 전직하는 경우가 많다. 이건 프로그래머뿐 아니라 많은 직장인이 비슷할 것이다. 요즘에는 정년의 개념이 많이 없어졌으니깐. 그러나 나는 전문직에 속하는 프로그래머가 40대 초중반에 실직하는 하는 것일까? 외국을 보더라도 나이 많은 사람들이 현업에 종사하는 경우가 많다. 이게 국내에서는 왜 적용이 안 될까 생각해 봤다.일단 경력이 쌓이면 개발자의 단가가 비싸진다. 그러나 많은 사람이 단가가 비싸지는 만큼 생산력이 올라가는 경우가 없다. 신입 사원들만 보더라도 대학에서 최신 오픈소스와 생산력이 좋은 언어를 배우고 오는데 현업에 있는 사람들은 보통 예전 스타일을 고집하는 경우가 많다. 예전 스타일이 나쁘다는 건 아니지만 단순히 생산력만 비교했을 때 떨어지는 경우가 있다. 예를 들면 c++과 c#의 생산력의 차이라고 생각하면 좋을 것 같다. 이러다 보니 경력 있는 개발자들이 단가는 비싸고 생산력이 떨어지는 결과가 나온다. c++이나 c#의 비교글을 보면 c++이 메모리 참조의 직관성 때문에 더 좋은 품질과 성능을 만들 수 있다고 하지만 그건 개발자들 생각이고 고용주입장에서는 싸고 생산력있는 것을 좋아한다. c#이라고 품질이 안 좋은건 아니다. 애초에 각자 언어의 특성이 있는 것인데 이런 걸 논하는 것 자체가 우스운 일이다.일본에서 근무하면서 느낀 점은 나이 많은 개발자들이 단순히 프로그램을 잘하는 건 아니다. 보통 프로젝트 공정 설계를 해서 pm이나 아키틱쳐로써 활약하거나 새로운 오픈소스와 예전의 오픈소스를 잘 조화시켜 사용해서 생산력을 더 올리는 경우가 많다. 국내 실정은 정확하게는 모르겠지만 아마 오래 현업의 계신 분들도 그렇지 않을까 싶다. 그렇게 봤을 때 내 생각은 개발직종에 대해 꾸준한 공부와 생산력에 대한 고민이 있다면 40대 치킨집이 아닌 60대 70대까지도 충분히 개발일을 할 수 있다는 생각이다. 단순히 생각해도 월급 300만 원에 1000만 원을 버는 것과 월급 1000만 원에 1억 원을 번다고 하면 당연히 고용주는 월급 천만 원 개발자를 쓸 것이기 때문이다.]]></description><category>개발경험</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Experience/4baf26e0f85448eda758c5c738380b35.html</guid><pubDate>Thu, 27 Dec 2018 23:27:43 GMT</pubDate></item><item><title>프로그램 프로젝트를 성공시키는 방법</title><link>http://www.nowonbun.com/Experience/396638c83e0b4ec3bcef890c0b9a4b48.html</link><description><![CDATA[이 카테고리에 첫 글을 쓰는데 많은 고민했다. 타이틀은 개발 경험인데 어떤 글을 써야 좋을까하고 말이다. 그러다 오늘 개발 현장에서 느낀 점이 있어 한마디 적어볼까 한다.프로그램 프로젝트의 실패라는 말은 프로그램을 못 만들었다는 의미가 아니고 엔드 유저 또는 고객의 요구사항대로 만들어내지 못했거나 약속했던 기한 내에 프로그램이 완성되지 못했다는 의미이다. 프로젝트가 실패되더라도 프로그램은 완성시켜야 한다.그럼 프로젝트가 왜 실패하는 것일까 고민을 해 봤다. 내 경험으로 외부적인 요인 30%이고 자신의 요인이 70%이다.먼저 외부적인 요인에서 가장 큰 이유가 말도 안 되는 일정제시다. 이건 100% 외부적 요인이라고 할 수는 없는 게 애초에 말도 안 되는 일정은 시작하면 안 된다. 그러나 월급쟁이들은 현실적으로 이것이 힘들다.그러나 가끔 고객들이 자기 생각에 어느 정도면 될 거 같다고 제시하는 경우가 많다. 들어보면 틀린 말은 아니다. 가끔 이상한 사람들 빼고는 대부분 사람은 프로젝트를 성공 싶어 하지 일부러 실패하는 프로젝트를 하고 싶어 하진 않는다. 그래서 들어보면 나름대로 합리적인 생각으로 제시한다. 그러나 많은 엔드유저나 고객들은 프로그램 프로젝트 공정이나 개발 방법 등을 모르는 게 대부분이다. 그래서인지 설계와 개발시간은 계산한 것 같은데 테스트에 대해서는 시간을 빼고 생각하는 경우가 많다. 이런 부분은 자신이 합리적으로 다시 계산해서 제시하면 일정이 조정되는 경우가 많다. 이상한 사람이 아니고서야 합리적인 제안을 했을 때 대부분 수용한다. 그러나 애초에 자신이 공수계산과 일정 계산이 안 되면 조정이 안 된다. 그래서 이것이 100% 외부요인이라고 말하기 어려운 이유다.둘째는 잦은 사양 변경요청이다. 한번은 이런 적도 있었다. 프로젝트를 받아서 일정계산하고 작업을 착수했는데 고객이 어떤 부분을 수정해달라고 요청해 왔다. 개발 중에 사양변경은 항상 있는 일이니 어렵지는 않다. 그런데 그 다음 날 그 부분을 다시 생각해봤는데 원래 것이 맞다고 수정요청이 왔다. 그래서 알았다고 했는데.. 다음 날 다시 같은 부분 수정이 왔다. 이런 식으로 한 부분 수정만 한 달 동안 한 적도 있다. 이렇게 되면 프로젝트를 진행할 수가 없어진다. 그런데 이런 경우가 간혹 발생하는 것이 아니고 상당히 많다. 그래서 각 모듈을 독립적 개발을 해야 하고 폭포수 개발 공정보다는 애자일 공정을 선호하는 이유다. 그래서 이런 부분은 업무협조 간에 패널티를 설정해서 하는 경우도 있다. 패널티란 한번 수정협조에 개발 기간 일주일 연장이라던가 금액적인 부분이던가. 그러면 고객도 신중히 요청이 온다.여기까지가 외부적인 요인이고 내가 진짜 하고 싶은 이야기는 자신의 이유다.첫째, 프로젝트 설계와 운용 경험부족이다. 이는 많은 사람들이 어쩔 수 없다고 하는 경우가 많다. 그런데 내 경험으로 봤을 때는 어쩔 수 없는 것이 아니고 공부 부족인 경우가 대부분이다. 10년 차 20년 차여도 경험이 거의 없는 사람이 있는가 하면 3년차만 되도 웬만한 프로젝트는 뚝딱 만드는 사람이 있다. 프로젝트라는 것은 꼭 많은 사람과 협업해야만 하는 것만은 아니다. 혼자서 필요한 프로그램을 만들어 낼 수도 있고 오픈 소스에 참여하는 방법도 있다. 아무리 사이즈가 작은 프로젝트라도 완성(성공, 실패 모두)하면 느끼는게 정말 많다. 데이터베이스 설계를 쓸데없이 복잡하게 했다던가. 프로그램 언어의 이해 부족이라던가 디자인 패턴 이해부족이라던가.. 이런 경험들이 쌓이면 분명 큰 프로젝트에서도 적용된다.둘째도 어떻게 보면 경험이 쌓이면 느끼는 부분이긴 한데 바로 개발 방식이다. 여기서 이야기하는 개발 방식은 폭포수나 애자일 같은 프로젝트 공정이 아니고 자신이 개발하는 방식이다. 프로젝트 공정 선택도 프로젝트의 성패에 영향이 없는 건 아니지만 프로젝트를 잘 이끄는 사람은 어떤 공정에 맡겨도 성공으로 이끈다. 내가 이야기하는 개발하는 방식은 프로젝트를 어떻게 해야겠다는 계획에 가깝다. 많은 사람이 초반에 힘을 엄청나게 뺀다. 예를 들면 전체 개발이 1년이라고 할때 폭포수 같은 경우는 설계만 반년하고 애자일은 환경설정만 반년 한다. 그리고 설계는 그렇게 화려한데 정착 작업은 후다닥으로 엉망인 경우가 많다. 후반부로 갈수록 시간 압박에 테스트도 제대로 되지 않는 경우가 많다. 개인 프로젝트나 오픈 소스의 경우는 설계만 하고 포기하는 경우도 많다. 내 경험으로는 이런 식으로 실패하는 경우를 정말 많이 봤다. 실제 초년생때는 나도 이렇게 실패를 많이 헀다. 이게 왜 그럴까 생각해보면 처음에는 프로젝트 고민도 많이 하고, 하고 싶은 것이 많아 처음부터 엄청나게 디테일하게 작업한다. 그러다 보면 전체사양을 잊어버리는 경우도 많고 눈으로 보기에도 진도가 나가지 않아 지쳐버린다. 그러나 내 방식은 화면이면 화면, 내부 컨트롤이면 컨트롤을 정말 빠르게 만들어 낸다. 아니 버그 등도 무시하고 일단 만들어낸다. 빨리 하는 방식도 여러 번 해보면 요령이 생긴다. 일단 빨리 만들고 나서 테스트와 리펙토링으로 완성도를 올리는 방식이다. 1년 개발 기간이면, 설계 한 달 코딩 두 달 나머지는 테스트 리펙토링. 또 넣고 싶은 사양이 있으면 추가하면 된다. 이렇게 하다 보면 리펙토링시에 설계의 잘못된 점이 보이고 이것이 경험이 된다. 이런 방식을 해서 프로젝트 100% 성공 보장은 못 하지만 내 경우는 성공률이 꽤 높았다.셋째는 표준 개발 방식과 디자인패턴, 알고리즘 학습이다. 앞에 이야기하는 빨리 만들고 반복적인 리펙토링을 이야기했다. 그럼 어떻게 빨리 만들까이다. 표준 개발 방식은 변수 명명법. 함수 선언법. 주석 달기 등이 정의되어 있다. 그 뜻은 우리가 변수명을 어떻게 쓸까, 함수는 어떻게 만들까를 고민할 필요가 없다. 그냥 정해진 가이드로 만들기만 하면된다. 또 클래스 선언하는 방식이나 메모리 관리도 디자인 패턴대로 만들면 순식간에 만든다. 경험으로 디자인 패턴이 적용 안 되는 업무를 아직 본적이 없다. 그 뜻은 대부분의 프로젝트는 적용된다는 의미다. 물론 디자인 패턴 적용이 프로젝트 운용에 옳다 나쁘다는 갑론을박이 많다. 하지만 개발 속도를 상당히 올린다는 데는 다들 이견이 없다. 다음은 알고리즘이다. 가장 많이 사용되는 알고리즘은 역시 list와 cache이지만, 그 외의 알고리즘도 업무 개발하는데 많은 도움을 준다. 끝없는 변수선언보다 map이나list로 작성이 되면 그만큼 가독성도 좋고 개발이 빠르다. 나는 이런 학습도 매우 중요하게 본다. 왜냐하면 나는 내가 만든 소스도 두달만 지나도 잊어버린다. 그런데 가독마저 되지 않는다고 하면 애초에 빠른 개발, 리펙토링이 되질 않는다.여기까지 프로젝트를 성공으로 이끄는 방법을 이야기했다. 여기서 이야기하는 방법이 반드시 성공으로 이끄는 건 아니고 분명 사람마다 느끼는 경험차이가 있으므로 반드시 옳은 건 아니다. 그러나 내 경우는 항상 이런 생각과 목표로 개발을 했을 때 많은 성공을 이루어냈다. 그래서 많은 개발자가 참고가 되었으면 한다.]]></description><category>개발경험</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Experience/396638c83e0b4ec3bcef890c0b9a4b48.html</guid><pubDate>Thu, 27 Dec 2018 23:21:00 GMT</pubDate></item><item><title>[가계부 프로젝트 11일 차] 메뉴 만들기</title><link>http://www.nowonbun.com/Dialy/6e7786aceb3c4029a70982b83fe9734f.html</link><description><![CDATA[현재 구상하고 있는 메뉴 항목은 dashboard, 가계, 카테고리 그리고 admin 메뉴이다. 각 메뉴는 viewrole 체크를 해서 권한 별로 보일 것인지 안보일 것인지 결정하게 된다. 메뉴 항목은 로그인 항목을 제외한 모든 페이지에서 공통이므로 공통 클래스에서 만들기로 했다.initmenu 함수를 호출하게되면 메뉴를 만들게 되는 것이다. 먼저 메뉴를 마스터로 부터 불러와서 시퀀스 컬럼의 순서대로 나열하게 된다. 예를 들면 시퀀스가 1이면 가장 상단, 99면 가장 하단에 배치된다. 그리고 각 메뉴는 isviewrole함수를 통해 권한 체크를 한다. 먼저 메뉴에 role이 null이면 권한에 상관없이 보이게 되고 group롤이 속하게 되면 보인다. 또 유저별 권한 체크도 확인해서 개별 유저 권한이 있으면 메뉴가 보이게 된다.중간에 지역화(localization)를 통해 메뉴 name을 검색해서 user가 사용 언어에 따라 한글, 일본어, 영어로 표시된다. 이 데이터를 최종적으로 modelmap의 menu이름에 데이터를 넣었다. 현재 메뉴는 각 컨트롤의 시작하는 지점에 initmenu를 호출해서 선언한다.컨트롤 부분은 코딩이 완료가 되었다. 이제 view 부분의 html를 수정하겠다.메뉴의 부분은 main.html만 보이는게 아니고 전부 공통으로 보이는 부분이기 때문에 jsp파일도 나누어서 include를 통해 공통화하였다.공통화 된 소스에서는 컨트롤에서 넘겨준 modelmap의 menu이름으로 데이터를 받는다.메뉴를 만들고 최종 디버그를 통해 확인했다.가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/6e7786aceb3c4029a70982b83fe9734f.html</guid><pubDate>Mon, 24 Dec 2018 23:45:13 GMT</pubDate></item><item><title>[Centos 개발 서버 설치] Maria DB 설치하기</title><link>http://www.nowonbun.com/Dialy/af750c7dde634806afb0a834aff6afc1.html</link><description><![CDATA[아직 가계부가 개발 중이라 웹서버와 배포 툴은 아직 의미가 없으니 우선 데이터베이스를 설치했다. 오픈 소스 데이터베이스는 postgres, mysql 등 많이 있지만 그중 나는 mariadb를 선택했다. mariadb는 mysql하고 90% 비슷하다. 뭐 개발자가 같으니 비슷할 수밖에 없겠지만..예전에는 mysql이 무료로 배포되었었는데... 이게 oracle사에 흡수되었다. oracle에 흡수가 된 후, 현재도 무료이긴 한데 조건 무료가 되었다. 예를 들면 기업에서는 무료가 아닌 유료이고 무료로 쓰려면 mit 라이센스에 따라 무조건 공개해야 한다. 데이터베이스를 공개하는 것이 아니고 프로그램을 돈 받고 팔지 못한다는 뜻이다. 즉 무료 서비스가 되어야 한다는 뜻이다. 무료 서비스로 공개한다고 해도 불만은 없지만 강제적으로 라이센스 규약에 따라 공개 해야 하는 건 조금 꺼림칙하다. 그래서인지는 모르겠으나 mysql 개발자는 그런 자신의 이념과 다르다고 생각해서 인지 oracle를 나와 다시 만든 데이터베이스가 mariadb이다. 아무리 자기가 만들었다고 하지만 기술을 팔았는데.. 그걸 다시 나와서 만들어도 되는 건가?그래서 현재는 mariadb는 완전 무료이고 나는 이 데이터베이스를 사용할 생각이다.기본적으로 다운받아서 설치해도 되는데 그럼 나중에 update서비스 받기가 힘드니 yum으로 설치했다.설치가 완료되었으면 먼저 설정을 설정해야 한다. 설정 파일은 /etc/my.cnf에 있다.설정파일 설정을 완료하고 데이터베이스를 기동한다.그리고 mysql에 접속을 해서 root패스워드 설정과 유저를 추가했다.접속해서 mysql 데이터베이스의 user 테이블을 검색해 보면 현재 root 유저에 패스워드는 걸려있지 않다. 그 외의 유저는 없다. 먼저 root 패스워드를 설정했다.그리고 유저의 경우는 localhost만 접속이 가능하고 외부에서 접속이 가능한 유저를 추가할 것이다. 외부라고 해도 완전히 외부가 아닌 우리집 허브 안의 네트워크 환경, 즉 c-class 내부만 허용할 생각이다.다시 user 테이블을 접속해보니 유저가 추가가 되었다. 이제 유저까지 추가가 되었으니 방화벽을 오픈하고 실제 내 컴퓨터 sql 편집기에서도 접속이 되는지 확인이 되면 설치가 끝난다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/af750c7dde634806afb0a834aff6afc1.html</guid><pubDate>Sun, 23 Dec 2018 22:33:53 GMT</pubDate></item><item><title>[Centos 개발 서버 설치] Plex Media 서버 설치하기</title><link>http://www.nowonbun.com/Dialy/2ee6c45189ec4feaa7e1ef306500728f.html</link><description><![CDATA[다시 주말이 왔으므로 centos(리눅스) 삼바 설치에 이어 plex 설치를 계속했다. 내가 쓰는 내부 서버는 내부 파일 저장 서버나 웹프로그램(가계부) 등을 돌리는 것 이상으로 미디어 서버도 중요하다. 집에 있는 dvd는 lg전자 제품으로 lg smart shared이라는 프로그램으로 dlna 서버를 구축했다. 그래서 dvd를 구매할 필요 없이 인터넷으로 미디어를 다운로드만으로 각종 영화나 tv 예능 등을 텔레비전에서 볼 수 있었다.그러나 이 lg smart share 프로그램은 윈도우 프로그램이고 약 5년 넘게 사용은 했지만, 버그가 꽤 많아서 사용하기가 불편하다. 버그라고 하면 동영상 파일이 인식이 안 된다거나 서버가 갑자기 다운되는 버그가 있었다. 이번에 centos로 갈아타면서 미디어 서버도 바꿀 생각이다. 조사한 결과, plex 미디어 서버는 꽤 유명하고(그러나 나는 요번 검색으로 처음 알았다.) 커뮤니티도 제법 커서 이걸 설치하기로 했다.plex -https://www.plex.tv/ko/먼저 이 프로그램을 다운받기 전에 내 centos의 버전을 확인했다. 확인 결과, centos는 64비트이므로 wget을 이용해서 plex 64비트를 다운받았다.wget을 이용해서 64비트 plex를 다운 받았다.rpm 파일을 다운 받고 나서 yum을 이용해서 설치를 시작했다.설치가 완료되면 service start 명령어를 이용해서 프로그램을 실행시킨다.local이 아닌 곳에서 접속하기 위해서 방화벽을 열어줘야 한다.그러고 나서 관리자 페이지에 접속했다. 접속하면 로그인화면이 나오는데 나는 구글 아이디로 로그인했다.나는 집 밖에서는 접속할 필요가 없으므로 "집 밖에서도 미디어 접근 가능하도록 허용해주세요" 체크를 해제했다. 그리고 설정이 완료되면 먼저 계정 부분에 가서 바로 비밀번호부터 설정했다.라이브러리 항목을 가서 동영상을 모아둘 폴더를 설정했다. 폴더는 예전에 삼바로 설정해둔 폴더 밑에 plex라는 폴더를 만들어서 설정했다.이제 실제 동영상을 넣고 dvd에서 해당 dlna가 인식이 되는지 자막은 잘 나오는지 무료 툴이라서 한 10분 정도 보이고 구매하라고 메시지가 나오는지 확인했다.설정이 끝나고 tv에서 dlna 탐색이 이루어지지 않아서 한참을 헤매다가 포트도 열어야 한다는 글을 발견해서 방화벽 포트를 하나 더 열었다.참조 링크 - https://support.plex.tv/articles/201543147-what-network-ports-do-i-need-to-allow-through-my-firewall/실제 사용해 보니 예전에 썻던 lg smart share보다는 편의성은 조금 떨어졌다. lg smart share의 경우는 폴더 설정만으로 dvd에서 재생할 수 있었는데 plex의 경우는 라이브러리 설정도 필요하고 실제 화면에 접속할 경우 기능이 많아서 그런지 오히려 초심자가 사용하기에는 보기 어려웠다. 현재 자막도 확인을 해보니 smi 자막은 인식도 하지 않는 것 같았다. 자막이야 srt로 변환해 주는 곳이 많으니 크게 상관은 없지만..]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/2ee6c45189ec4feaa7e1ef306500728f.html</guid><pubDate>Sun, 23 Dec 2018 22:14:46 GMT</pubDate></item><item><title> [가계부 프로젝트 10일 차] 로그아웃 기능과 메뉴 설계</title><link>http://www.nowonbun.com/Dialy/05aeea7c3d2d414aa6d2a56e4a7a8b46.html</link><description><![CDATA[메인 화면이 만들어졌으니 화면 상단 오른쪽에 있는 버튼을 누르면 로그아웃 확인 팝업을 띄우고 확인이 되면 로그아웃하는 흐름으로 만들 생각이다.로그아웃의 흐름은 먼저 구글 api를 통해 구글 로그아웃을 하고 컨트롤러 호출해서 session을 초기화하면 된다.여기까지 로그인, 로그아웃 기능이 완료되었다.이제부터는 메뉴를 만들 생각이다. 메뉴를 만들기 전에 어떤 메뉴를 만들 것인지 구상을 해야 한다. 가장 먼저 생각나는 메뉴는 먼저 가계부를 입력해 넣을 가계 메뉴, 그리고 카테고리 설정을 할 카테고리 설정, 마지막으로 유저 권한설정과 유저관리를 할 관리 메뉴를 생각하고 있다.가계 메뉴는 수입, 지출, 저축 내용이 표시되는 메인 기능이다.카테고리 테이블이 두 개가 있다. 그 중 lowcategory 테이블은 마스터로 설정했지만, category는 유저가 입력하게 설정을 했다. 카테고리 메뉴에서는 그 category테이블에 데이터를 입력할 항목이다.관리 메뉴는 유저의 viewrole과 actionrole 설정을 하고, 유저의 그룹관리를 할 항목이다.그리고 마지막으로 다시 홈을 클릭을 했을 때 대쉬보드 메뉴가 보일 수 있는 대쉬보드 메뉴가 있다.먼저 메뉴를 동적으로 만들 생각하니 잠시 고민에 빠졌다. 데이터베이스에 메뉴의 정보를 넣을까? 아니면 하드 코딩으로 코드 상에서 제어를 할까이다. 역시 데이터베이스에 넣는 게 좋을 듯싶어서 테이블을 하나 더 추가했다.테이블 구성은 키, 메뉴 이름, 권한, 표시될 icon, 메뉴를 누르면 이동되는 페이지 url와 마지막으로 메뉴 순서로 구성했다. sql 쿼리로 테이블을 만들고 다시 jpa를 통한 model를 생성했다. viewrole의 경우 새로 reference가 추가되었는데, 그대로 생성하면 기존 내가 설정했던 부분이 없어진다. 그러면 또 모든 model 클래스에 영향이 가기 때문에 viewrole는 덮어쓰기를 하지 않고 수동으로 변수를 추가했다. 사실 테이블 명을 상관 안 하고 생성하면 테이블 추가할 때마다 그냥 덮어쓰면 되는데 테이블명 때문에 어쩔 수가 없다. 편의를 위해 테이블명 어미에 마스터와 트랜잭션을 구분하는 명명을 넣은 건데 작업이 더 힘들어진 느낌이다. 이 부분에 대해서는 어느 쪽이 더 효율적인지 고민해 봐야 겠다.그리고 dao 클래스도 추가했다. 메뉴 테이블은 마스터이기 때문에 다른 마스터 테이블처럼 masterdao를 상속받았다. 그리고 작성후에 factorydao에 마스터를 추가했다.테스트 클래스로 확인해 보니 예상 결과가 나왔다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/05aeea7c3d2d414aa6d2a56e4a7a8b46.html</guid><pubDate>Sat, 22 Dec 2018 01:24:20 GMT</pubDate></item><item><title>[가계부 프로젝트 9일 차] Bootstrap 화면 디자인과 설정.</title><link>http://www.nowonbun.com/Dialy/9b33bfad04354d189e291a00d9aada40.html</link><description><![CDATA[구글 oauth를 이용해 로그인하는 것과 filter부분에 로그인 체크 기능을 만들었다. filter는 나중에 role체크하는 부분을 추가해야 한다. 그 전에 화면이 만들어지고 메뉴를 만들어야 한다.화면 디자인의 경우는 사실 어떤 작업보다 시간이 가장 많이 걸리는 작업이다. html 태그 구성도 해야하고 css도 만들어야하고 동적으로 작동하는 화면의 경우는 사양에 맞게 javascript도 작성하기 때문이다. 10년 전만 해도 화면 디자인 부분은 시간이 정말 많이 걸리고 생각보다 깔끔하지 않아서 웹디자인을 전문적으로 하는 사람과 팀을 꾸려서 했었다. 요즘에는 어떤지 모르겠지만, 디자인 프레임워크가 나온 후론 그냥 프로그래머가 다 작업하는 경우도 많다. 나의 경우도 이제는 디자이너 없이 혼자서 개발한다. 내가 근무하는 곳도 ux디자이너는 있지만 웹디자이너는 없다. ux디자이너는 컨텐츠 배치 디자인을 하는 분야라 디자이너라고 하지는 않는다.가계부 프로젝트는 최근 가장 많이 사용되는 디자인 프레임워크인 bootstrap을 쓸 예정이다. bootstrap은 크롬에 최적화가 되어있는 디자인이다. 가끔 ie나 safari, opera로 확인하면 생각과 다른 디자인이 나오는 경우도 있다. 어떤 경우는 동작이 되지 않는 경우도 있다. 이럴 때는 그 브라우저에 맞게 수정하면 되겠다.최근 디자인 스타일은 material 스타일이 있다. material 스타일은 페이지에 있는 그리드와 팝업 등에 그림자를 주어서 depth를 나타내는 디자인이다. 아마도 google에서 material 디자인이 처음 시작되었다. google도 material 스타일이 적용되어있다. 사실 이 블로그도 material이 적용되어있다. bootstrap에도 4버전에 있는 material 스타일이다. bootstrap material의 pro버전은 유료이지만 share가 무료 버전이다. share라고 해서 기본기능만 있는 건 아니고 웬만한 고급디자인이 아닌 이상 사용하는 데는 괜찮다.그러나 최근 bootstrap + material 버전을 사용해서 프로그램을 많아 만들었는데 디자인이 뭉개지는 현상이 자주 일어난다. share버전이라서 그런가? 쉽게 사용하려고 bootstrap을 쓰고 깔끔하게 보이려 material를 추가했는데 버그 수정하는 시간이 많아지면서 디자인 프레임 워크를 쓰는 이유가 없어졌다.그래서 가계부는 material를 빼고 순수 bootstrap4로만 작성할 생각이다. bootstrap에는 많은 무료 템플릿이 있다. 그중 나는 가장 편하고 많이 사용하는 sb-amdin 테마로 만들 생각이다.https://blackrockdigital.github.io/startbootstrap-sb-admin/처음에 로그인된 후의 main화면에 기본 blank화면을 넣었다.먼저 상단에 있는 검색기능과 메일확인기능 알람기능은 필요가 없으므로 삭제했다. 왼쪽 메뉴는 모바일모드와 pc모드가 있다. 나는 모바일모드가 깔끔하게 보여 pc에서도 그냥 모바일 버전으로 보이게 수정했다.디자인이 끝났으니 라이브러리 링크를 전부 cdn으로 변경한다. cdn이란 웹페이지를 접속할 때 라이브러리를 해당 서버에서 접속하는 것이 아니고 다른 라이브러리를 가지고 있는 서버로부터 받는 것이다. 웹브 라우저에 한 서버에 동시에 열수있는 connection 스레드가 3~5개이다. 시스템이 크고 많은 라이브러리가 있는 경우는 이 css파일과 javascript를 다운받는 시간만 해도 무시 못 한다. 웹페이지에는 css도 있고 image도 있으므로 한 페이지를 열 때 많은 connection이 발생한다. 이때 javascript과 css는 다른 서버에서 다운받음으로 페이지가 열리는 시간을 조금이라도 단축시할 수 있다.https://www.jsdelivr.com/package/npm/startbootstrap-sb-adminsb-admin라이브러리 링크를에 접속하여 css와 javascript 링크를 설정했다.
가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/9b33bfad04354d189e291a00d9aada40.html</guid><pubDate>Thu, 20 Dec 2018 23:44:39 GMT</pubDate></item><item><title>[가계부 프로젝트 8일 차] Startup페이지와 로그인 페이지 만들기.</title><link>http://www.nowonbun.com/Dialy/29b6376cd9724bc68e601a9e705b70d4.html</link><description><![CDATA[프로그램이 처음 tomcat에 기동이 될 때 실행해야 하는 클래스들이 있다. 지금은 master테이블의 정보를 한 번에 읽어드려서 실제 유저로부터 request가 오면 master테이블을 읽을 필요 없이 참조할 생각이다. 만약 시스템 운영 중에 master테이블의 데이터가 바뀌면 reset이 되는 역할도 필요하다. 이 부분은 나중에 admin페이지에서 작성하도록 한다. startup 클래스는 spring구조를 따라가지 않고 순수 servlet 구조로 작성했다.startup클래스는 순수 servlet 구조로 작성하기 때문에 httpservlet 클래스를 상속받았다. 그리고 그 안에는 init함수를 만들고 web.xml에서 초기설정을 호출할 경우 init함수를 호출하게 된다. init함수에서는 factorydao의 master를 초기화하는 함수를 호출한다. 초기화 함수안에는 마스터를 검색해서 메모리에 마스터 데이터를 할당하는 역할을 수행하게 될 것이다. 스타트업을 시작하는 함수를 web.xml에 선언을 해주어야 한다.startup 함수가 실행가 되는지 아닌지는 디버깅으로 확인하는 수 밖에 없다. 그래서 init함수안에 sysout으로 "startup"이라고 출력했다.디버깅으로밖에 확인이 안 되지만 startup이 출력되고 그 위에 persistence접속을 한듯한 로그가 표시된다. 이로써 startup 설정은 완료되었다. 앞으로 마스터뿐 아니라 프로그램이 실행하기 전에 메모리상에 올려야 하는 데이터가 있으면 전부 init에다 추가하면 된다.여기까지 프로그램 개발을 위한 준비(?)가 끝났다고 할 수 있다. 준비라는 표현보다는 웹 프로그램에서 안 보이는 코어 부분가 완료되었다고 보면 된다. 이제부터는 화면을 만들고 그 화면을 처리하는 컨트롤 화면을 만들어야 한다. 그러기 위해서 로그인을 먼저 만들고 로그인이 되면 그 뒤에 hello world가 나오게끔 할 생각이다.로그인 화면의 경우는 이전에 사용하던 거 그대로 사용할 생각이다. 딱히 회원가입이 필요한 것도 아니고 google로그인을 통해 로그인이 되면 끝이다. 이건 이전 가계부와 사양이 같으므로 따로 만들 필요가 없다.이전 화면은 로그인 버튼도 없고 그냥 구글 로그인 버튼만 덩그러니 있다. 이 부분에 대해서는 구글이 로그인되어있는 상태라면 이 화면도 나오지 않고 바로 redirect할 생각이다. google 로그인이 되어 있지 않으면 구글 로그인 화면을 띄우면 된다. 이건 예전에 댓글 기능을 추가할 때와 비슷한 기능이다. 그냥 그 소스도 가져와서 잘 조합해서 만들었다.소스를 보면 브라우저에 구글이 로그인되어있으면 바로 form값에 id, email, name을 넣고 post submit을 한다. 로그인되어있지 않으면 아무 일도 일어나지 않고 바로 화면이 표시된다. 버튼은 만든 것이기 때문에 trigger를 통해 구글 버튼을 클릭하게 해서 로그인 화면이 나오게끔 하였다.실제로 로그인 컨트롤러를 확인해 보면 get방식은 index.jsp를 파싱해서 전의 로그인 화면이 나타난다. post 방식으로 오면 먼저 id, email, name이 null인지 체크를 한다. 이때 null이었을 때 다시 로그인 화면을 보내면 trigger로 포스트를 보낼 수가 있다. 이게 일어날 수 없는 일이지만 만약에 구글 페이지에서 로그인했을 때 그 셋에 하나가 null이 되면 그냥 403 권한에러를 보내는 게 무한루프에 빠지지 않는 것이다. 로그인 한 유저가 만약 데이터베이스에 저장되어있지 않는 유저라고 하면 user를 생성해서 insert를 했다. 그리고 최종적으로 id와 email이 다른 경우 마찬가지로 403 에러를 표시했다. 사실 셋에 하나가 null이거나 id와 email이 일치하지 않는 경우는 부정 login밖에 없으므로 그냥 에러를 내보냈다. 로그인이 완료되면 session에 user정보를 넣고 main 화면으로 redirect했다. redirect화면은 아직 작성 전이므로 hello world만 화면에 표시될 것이다.이제 login 페이지 이외의 모든 페이지는 로그인 체크를 해야 한다. 물론 각 컨트롤러 상단에 session체크를 하면 되지만 좀 더 세련되게 filter controller에 세션 체크를 했다.여기서 확인해 보면 passurl은 xml에 설정한 login화면 빼고는 모두 session체크를 한다. 만약 session체크이 null이라고 하면 최초 로그인 화면으로 redirect하도록 만들었다. 테이블을 보니 예상한 대로 user와 group map에 데이터가 들어가 있다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/29b6376cd9724bc68e601a9e705b70d4.html</guid><pubDate>Wed, 19 Dec 2018 23:16:16 GMT</pubDate></item><item><title>[가계부 프로젝트 7일 차] 프레임워크 설정하기 -3(ORM - DAO만들기)</title><link>http://www.nowonbun.com/Dialy/f4ded5e5104f42e58e3016b6ab455da1.html</link><description><![CDATA[jpa로 생성되는 부분은 데이터베이스 테이블의 형태에 맞는 entity클래스 뿐이다. 따로 jpa에서는 dao라던가 service등을 생성해 주지 않는다. 그래서 dao(database access object)를 만들어야 한다. jpa 사이트를 가면 dao를 만드는 방법에 대해 나와 있다. 예전에는 사이트의 가이드를 보고 만들었지만 이제는 나만의 dao 패턴이 생겼다. 그래서 그냥 사이트 참조없이 바로 만들었다.구조는 먼저 최상위 클래스 abstractdao와 그 밑에 masterdao와 transactiondao를 만든다. abstractdao는 데이터베이스 접속하는 "entitymanagerfactory"을 관리하고 데이터베이스 트랜잭션(테이블 트랜잭션이 아닌)을 관리하는 클래스이다. 그리고 masterdao는 마스터 테이블을 접속하는 오브젝트인데, master는 특성상 프로그램 내에서 오로지 select만 있기 때문에 모두 singleton + flyweight 패턴으로 관리할 생각이다. 그러나 관리자가 직접 데이터베이스를 insert하게 되면 프로그램에 적용되지 않기 때문에 클래스 초기화하는 옵션이 들어간다. transaction 테이블은 생각하기에 특별히 선언되는 함수는 없다. 그냥 masterdao와 구분하기 위한 클래스이다.그리고 factorydao를 만들어서 각 dao클래스를 관리할 생각이다. dao클래스들은 데이터베이스 정보와 커넥션 정보 이외에는 데이터가 없는 실행만 하는 클래스이다. 그래서 여러 번 new선언으로 할당할 필요없이 factorydao에서 처음 할당이 되면 list를 singleton화 시켜서 두 번 할당이 되지 않게 한다. 이렇게 하면 흔히 이야기하는 di의존성 패턴 형태로 구성이 된다.dao 구성은 완료되었으니 테스트 클래스 하나 만들어서 데이터를 가져오는지 확인했다.결과가 나왔다. 이제 controller에서는 factorydao를 통해 dao를 취득하면 singleton패턴과 flyweight패턴으로 인해 최초 한 번만 할당(new)가 되고 계속 같은 클래스를 사용할 수 있다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f4ded5e5104f42e58e3016b6ab455da1.html</guid><pubDate>Tue, 18 Dec 2018 23:43:49 GMT</pubDate></item><item><title>[가계부 프로젝트 6일차] 프레임워크 설정하기 -2(ORM - JPA설정)</title><link>http://www.nowonbun.com/Dialy/49d601fe0e4f47d4aa239d54b4fdfba3.html</link><description><![CDATA[프레임워크 설정이 완료되었다.이제부터는 본격적으로 프로그램과 데이터베이스 연결작업을 해야 한다.한 10년 전 만에 해도 orm 프레임워크가 없었다. 아니 없다기 보다는 많이 사용하는 프레임워크는 아니었다. orm 프레임워크란 데이터베이스의 구조적 개념을 oop의 클래스 개념으로 바꾸는 프레임워크다. 예전엔 이런 프레임워크를 실무 개발하면서 써본 기억이 없다. 보통 프로그램과 데이터 베이스를 연결해서 사용한다면 코드상에서 쿼리를 작성해 그 결과를 웹페이지에 보여주는 형태였다. 그 때 경험이 짧아서 몰랐을 수도 있겠지만, 주위에서도 그런 형식으로 개발하는 경우도 보지 못했다.최근에는 이 orm 프레임워크가 많이 발전하면서 이제는 orm이 없으면 이제는 개발이 어색할 정도이다. 왜냐하면 예전에는 객체 하나를 생성하고 다시 데이터베이스에 입력하기 위해서 데이터를 insert문으로 바꿔야만 했다. 그 것 자체만으로 코딩이 길어지고 힘들었는데 혹시라도 데이터베이스 구조가 바뀌면 관련된 쿼리를 다 수정해야 하는 작업도 있었다. 물론 디자인 패턴 적용을 잘하면 이 수정을 최소화로 할 수 있지만 그래도 관련된 쿼리문을 전부 수정해야 하는 건 변함이 없었다. orm 프레임워크를 사용하면 데이터베이스가 구조가 수정되어도 orm 매핑 클래스만 수정하면 프로그램 전체가 적용된다. 그렇기 때문에 시스템이 커져도 프로젝트 관리가 편해진다.orm 프레임워크는 java는 jpa 프레임워크가 있다. jpa 프레임워크는 hibernate가 발전해서 표준이 되었다. c#의 경우는 entity framework가 있다. 그 둘은 대표적인 프레임워크이고 다른 프레임워크로는 자바는 seasar(doma)가 있고 c#은 hibernater와 seasor(doma)가 있다. 각기 orm은 서로간의 장단점이 있지만 jpa(hibernate)가 가장 편하고 쉬운 것 같다.먼저 java에서 orm을 쓰기 위해서 mavan pom.xml에 jpa 관련 라이브러리를 링크시켜야 한다.그리고 이클립스 개발환경에서 사용하기 위해서는 jpa모드로 변경해야 한다.jpa모드을 변경하면 persistence.xml이 생성이 되는 데 여기에는 데이터베이스 정보를 넣는다. 그리고 generate하면 이클립스에서 데이터베이스부터 table를 읽어드리면 자동으로 테이블별 클래스가 생성된다.설계한 테이블을 보면 테이블명 어미에 마스터는 mst, 트랜젝션은 tsn를 붙였다. 그게 자동으로 생성하면 그대로 클래스 명으로 만들어진다. 이렇게 사용하면 프로그램 내에서 클래스명이 예쁘지 않기 때문에 클래스 명을 변환해서 생성해야 한다.이제 클래스를 생성했다. 다시 클래스 내용을 보면 reference가 연결되어 있는 변수가 테이블 명에 따라 mst혹은 tsn가 붙어있는 걸 확인할 수 있다. 이것 또한 예쁘지 않기 때문에 수동으로 수정해야 한다. jpa 프레임워크가 자동으로 클래스를 선언하고 변수명까지 자동으로 만들어 주는데 제약조건은 제대로 안 걸려 있다. c#의 entity의 경우는 자동으로 제약조건까지 깔끔하게 생성이 되는데 jpa는 조금 부족한 느낌이 많다.그래서 먼저 수정해야 할 것은 트랜잭션 테이블의 auto_increment이다. 예전에 이게 자동으로 선언되지 않아서 insert 할 때마다 오류가 난적이 있었다. 이 것 때문에 하루종일 왜 insert가 안될까 헤맸었다. 지금은 선언해야 한다는 걸 알고 있지만, 기본적인 이런 제약조건도 제대로 생성이 안되는 게 이해가 안된다.트랜잭션 파일은 user와 category, payment 테이블이 있는데 user의 경우는 id를 키로 하기 때문에 auto_increment가 필요없다. category, payment 클래스의 경우는 필요하니 "@generatedvalue(strategy = generationtype.identity)" 어노테이션을 추가했다.이렇게 추가하고 아래의 조건에 따라 reference 옵션을 추가한다.1. many many =&gt; fetch = fetchtype.lazy1.1 join table이 있는 컬럼은 map에만 데이터를 넣을 것이므로 cascade = cascadetype.all를 넣지 않는다.1.2 join table이 없는 테이블은 거의 마스터 데이터이므로 cascade = cascadetype.all를 넣는다.2. one many =&gt; cascade = cascadetype.all, fetch = fetchtype.lazy3. many one =&gt; fetch = fetchtype.lazy기본적으로 "fetch = fetchtype.lazy"는 동시 검색을 하지 않는 것이다. 예를 들면 마스터 low_category를 검색했을 경우, 하위 클래스들의 데이터를 검색할 때 select를 해서 넣는 것이 아니고 다시 list를 호출할 때 select를 하는 형식이다. 필요에 따라서는 검색과 동시에 join을 해서 검색할 수 있지만 (fetchtype.eager), 그렇게 할 경우 최상위 마스터를 검색할 때 모든 테이블의 데이터를 검색하므로 매우 느려진다. 그걸 피하기 위한 것이다. 그리고 cascade의 경우는 n:n또는 1:n은 있는데 n:1은 넣지 않았다. 왜냐하면 n:1의 경우는 n이 마스터인 경우가 많으므로 마스터에 데이터가 insert되면 안 된다. 반대의 경우는 트랜잭션이 때문에 생성옵션을 넣었다. n:n은 마스트의 반대 경우는 casecade를 넣지 않고, 트랜젝션 반대 테이블은 생성옵션이 있어야 한다.jpa를 c# entity 프레임워크와 비교하면 무언가 부족한 느낌이 많다. c# entity 프레임워크는 이렇게 클래스 생성을 하면 제약조건까지 깔끔하게 다 만들어진다. 물론 테이블명과 변수명은 변경을 해야 하지만 제약조건은 깔끔하게 나온다. 그러나 java의 경우는 모델 클래스를 생성해도 하나하나 확인해야 한다. 이게 jpa의 단점일 수도 있지만, 그렇지는 않다. entity 프레임워크는 자동으로 다 만들어주는 대신 이미 만들어진 entity에 대해 수정이 까다롭다. 그런 걸로 보면 java의 경우는 그냥 사용하라는 뜻이 아니고 기본적인 것은 생성하고 나머지 20%는 사용하는 유저가 채워 넣는 구조이다. 이렇게 보면 또 hibernate가 장점이 될 수 있다. orm은 나도 아직 개념이나 이런 특성에 대해선 왜 그런지 모르는 부분이 많다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/49d601fe0e4f47d4aa239d54b4fdfba3.html</guid><pubDate>Mon, 17 Dec 2018 23:42:50 GMT</pubDate></item><item><title>[가계부 프로젝트 5일 차] 프레임워크 설정하기 -1(Spring)</title><link>http://www.nowonbun.com/Dialy/1cb972bac45f49e8ad95a702a5036541.html</link><description><![CDATA[본격적으로 프로그램 코딩하기 전에 사전 준비로 프레임워크를 구성해야 한다.java에서는 여러 가지 프레임워크와 개념이 있다. 그 중 최근에는 spring 프레임워크를 많이 쓴다. 각 프레임워크 특징을 여기서 다 설명하기는 힘들지만 spring 가장 대표적인 특징은 di(dependency injection)이라는 의존성 주입이라고 생각한다. 이 의존성 주입이라는 개념은 프로그램 설계할 때 객체 생성,관리가 가장 편하고 이해하기 쉽다.di 의존성이란 객체 할당(new)을 개발자가 하는게 아니라 프레임워크 쪽에서 할당해서 컨트롤러에서 사용하는 것이다. 사실 di 의존성이라는 게 내 생각이지만 singleton pattern의 상속이 안 되는 문제를 보완한 것이라고 생각한다. 나도 무분별하게 객체 할당(new)를 좋아하지 않으므로 이 di 의존성의 개념은 나쁘지 않다.그러나 직접 spring 소스을 분석해 보지는 않았지만 느낌은 reflection 개념과 디자인 패턴의 flyweight pattern를 결합해 놓은 듯하다. reflection 개념은 클래스 할당을 동적으로 할 수 있는 방식이다. 개념으로는 매우 편해보이지만 사실 이게 꽤 느리고 가독성이 매우 떨어진다. singleton 패턴은 사용하는 목적은 같은 객체를 여러 번 선언하지 않고 static으로 한번 할당으로 계속 재 사용하는 패턴인데 전체적인 성능향상을 위한 것이다. 그러나 di 의존성은 refection을 통해 singleton의 상속이 안되는 단점을 보완하였지만 reflection으로 성능을 떨어트리는....이게 뭔지... spring이 di의존성 개념만 있는 것은 아니지만... 특별히 성능향상에 매우 좋은 프레임워크라고는 말하기는 어렵다.이런 이유로 평소에는 java servlet 환경에서 사양에 맞게 필요한부분은 di개념으로 할당하고 singleton 패턴으로 사용할 부분은 singleton 패턴으로 유연하게 만드는 방식을 사용한다.그러나 가계부 프로젝트는 복잡한 사양의 시스템도 아니고 빠르게 만들고 끝내고 싶기 때문에 그냥 spring 프레임워크을 사용했다. 먼저 spring 프레임워크을 사용하기 위해 maven의 pom.xml에서 dependency를 추가하여 라이브러리를 연결했다.그리고 web.xml에서 spring사양에 맞게 url에 대한 호출 클래스를 파싱한다.*.html 형태로 오면 main클래스로 *.ajax 형태로 오면 ajax 클래스를 호출하게끔 router를 만들었다. 그리고 나중에 세션 체크를 위한 공통 filter　체크로 매핑시켜놓았다. 그밖에 기본 페이지인 index.html 지정과 encoding 설정했다.이건 *.html로 호출이 왔을 경우 라우팅 되는 설정파일이다. *.html로 호출하고 string으로 return을 하면 해당 jsp를 읽어드려 데이터값을 매핑시킨다.이건 *.ajax를 호출하면 라우팅되는 설정파일이다. ajax는 json형태로 리턴을 할 예정이기 때문에 매핑시킬 jsp 파일은 필요없다.우선 개발의 시작을 알리는 hello world를 출력하기 위해 기본적인 구성만 하고 디버깅했다.디버깅이 되고 브라우저를 실행시키면 화면에 hello world가 나온다. 이렇게 기본적은 프레임 워크 설정은 끝났다.
가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/1cb972bac45f49e8ad95a702a5036541.html</guid><pubDate>Mon, 17 Dec 2018 23:27:16 GMT</pubDate></item><item><title>[Cenos 개발 서버 설치] 삼바(Samba) 설치하기</title><link>http://www.nowonbun.com/Dialy/bc17c18a6f714544b1058062a255c7f8.html</link><description><![CDATA[삼바라는 뜻은 춤의 이름이 아니고 it에서는 네트워크드라이브 프로그램 이름을 뜻한다. 원래 정식 명칭이 삼바 프로토콜 네트워크(smb://) 프로그램이다. 이게 처음에는 프린터 공유를 목적으로 만든 프로토콜 프로그램이라고 기억한다. 그러나 이제는 많은 업무환경에서 파일 공유 서버로 사용하고 있다. 삼바는 같은 c클래스(xxx.xxx.xxx.1 ~ xxx.xxx.xxx.255) ip 내부 또는 가상(vpn) 네트워크환경에서 접속을 편하게 하기 위한 목적이 있다. 그러나 보안이 조금 약하고 내부 네트워크가 아닌 외부에서의 접근 설정이 꽤 어렵다. 외부에서 접근이 어려운 것은 삼바의 설정이기보다는 os에서 외부 접근을 차단시켰다.그럼 개발 환경으로 설치한 centos에 파일을 업로드, 다운로드하기 위해 삼바 프로그램을 설치하겠다.그 전에 삼바를 설치하기 전에 사전 준비작업이 있다. centos는 프로그램을 설치하기 편하게 yum이라는 프로그램이 있다. 리눅스는 프로그램 설치 제거가 window에 비교하면 꽤 어렵다. 기본적으로 소스를 컴파일도 해야 하고 설정도 기본설정으로 되지 않는 경우도 많다. 그러나 centos는 아이폰 os의 ios처럼 app store 같은 프로그램들을 링크해 놓은 곳이 있다. 우리는 거기에 접속해서 프로그램을 내려받으면 간단하게 프로그램 설치, 삭제 그리고 업데이트를 간단하게 할 수 있다. 그떄 프로그램을 관리해 주는 프로그램이 yum이다.yum은 centos 초기설정 그대로 사용할 수 있다. 그렇지만 나는 설정을 조금 바꿨다. 바꿨다 라기 보다는 그냥 예전에 사용하던 링크와 dns 설정을 수정했다. 먼저 도메인 서버 설정을 바꿨다. 도메인 서버 설정 파일은 "/etc/resolv.conf" 에 있다. 거기서 보면 원래 centos의 기본 dns 설정이 있는데 나는 그걸 구글 dns로 바꿨다. 구글 도메인 서버는 8.8.8.8이다. 왜냐하면 내가 생각하기 구글 dns가 가장 많은 도메인을 포워딩하지 않을까 하는 개인적인 생각에서이다.그러고 나서 yum의 설정 베이스를 변경했다. 설정 베이스를 바꾼다는 것은 아까 이야기한 app store의 링크 주소를 바꿨다라는 의미이다. yum의 설정파일은 "/etc/yum.repos.d/centos-base.repo" 에 있다. 여기에 보면 초반 설정은 mirrorlist로 설정이 되어있다. 나는 baseurl로 바꾸고 mirror.centos.org를 전부 "mirror.kakao.com"으로 바꿨다. mirror.centos.org를 사용하지 않고 mirror.kakao.com로 바꾼 이유는 요즘은 어디든 빠르고 상관없을 것 같다. 그러나 예전에는 mirror.centos.org가 상당히 느렸던 걸로 기억한다. 지금은 세계 어디도 빠르지만 예전만 해도 한국 서버가 가장 빠르다고 생각해서이다. 그래서 지금은 설정을 바꾸지 않아도 잘될 것 같지만 그래도 예전에 내가 자주 사용해서 검증된 설정대로 할 생각이다.이게 잘 되었는지 확인하기 위해서는 vim을 설치해 보면 안다. 명령어는 "yum install vim"이다.vim을 설치하니 reference 프로그램이 저렇게 많다. vim이 뭐라고.. 어쨌든 이게 설치가 잘되면 yum 설정이 잘 된 것이다. 이제 원래 목적은 vim 설치가 아니므로 samba를 설치를 시작한다.samba 프로그램이라고 어렵게 설치하는 것은 아니고 그냥 "yum install samba"면 끝이다. 다만 설정이 조금 필요하다.yum을 통해 samba 설치는 끝났다. 이제 설정을 해야 하는데 먼저 samba에 접속하기 위한 방화벽 포트를 풀어야 한다. 먼저 방화벽의 설정을 확인한다.확인해 보니 역시 설치만으로는 방화벽설정을 해주진 않는다. 어떻게 보면 이렇게 하나하나 설정을 해야 하는 점이 리눅스의 장점인데 또 어떻게 보면 귀찮다. 설치하고 방화벽설정을 일일이 해줘야 한다.그리고 삼바 설정파일을 설정했다.처음에는 기본설정들이 있는데 다 필요 없어서 지웠다. 수정한 부분은 workgroup이고 추가한 부분은 shared 세션 부분이다. workgroup은 내가 윈도우환경에서 접속을 할 것이니 윈도우의 기본 group인 workgroup으로 설정했다. shared는 내가 삼바로 접속해서 파일을 업로드할 디렉터리 위치와 권한 설정이다. 그리고 삼바를 기동했다. (명령어: systemctl start smb)그리고 재부팅을 하면 접속하는 데 에러가 없다. 여기까지 삼바 서버를 설치했다. 사실 linux에서 삼바 서버 설치만 잘해도 50% 산은 넘은 거다. 자주 사용하는 프로그램은 yum을 사용해서 설치하고 그렇지 않은 것은 삼바를 통해서 복사한다음에 서버 내에서 설치하면 되기 때문이다. 다음은 lg smartshare의 dlna서버를 대신할 미디어 서버를 조사하고 설치할 예정이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/bc17c18a6f714544b1058062a255c7f8.html</guid><pubDate>Mon, 17 Dec 2018 01:50:37 GMT</pubDate></item><item><title>[Cenos 개발 서버 설치] Centos 설치하기.</title><link>http://www.nowonbun.com/Dialy/eb99142190b5471fbd44b75251fec78b.html</link><description><![CDATA[가계부 데이터베이스 설계까지 진행하다가 주말이기도 해서 먼저 centos 서버를 구성하기로 했다. 평일에는 좀처럼 시간이 나지 않아 서버를 설치할 만큼 시간을 만들기가 어렵다. 원래 내 계획은 집에서 쓰는 서버를 올해 안으로 window 서버에서 centos로 갈아타는 것이다. 그렇기 때문에 c#으로 되어있던 가계부 프로그램도 java로 다시 개발하는 것이다. 먼저 서버를 centos로 바꾸기 전에 centos의 개발환경을 만들고 본 서버의 os를 바꾸기로 생각했다. 나도 리눅스를 다룬지도 시간이 오래되어서 window서버에서 centos로 이전하는 연습이 필요하다.나는 집에서 내부 서버로 쓰는 pc와 로컬로 사용하는 pc가 있지만 사용하지 않는 pc만 집에 한 3대 정도 더 있다. 데스크 톱도 있고 노트북도 있는데 이게 전부 고 사양은 아니고 겨우 부팅될 정도의 저 사양이다. 그래서 사용하지 않고 있다. 그중 하나를 포멧하고 개발환경을 만들어 볼 생각이다. 개발환경이란 실제로 내가 사용하는 서버는 아니고 실제 서버에 사용할 프로그램 install이던가 프로그램의 업데이트를 적용하기 전에 테스트하기 위한 서버이다. 그러니 내가 원래 window서버에서 centos로 바꾸기 전에 mysql과 tomcat 등을 설치해서 가계부 프로그램을 사전 적용해보는 서버이다. 또 내가 서버를 이전할 때 dlna서버와 데이터 서버에 대해서도 미리 설치해 보고 확인해 볼 생각이다.먼저 centos를 설치하기 전에 iso 이미지를 내려받아야 하므로 centos 홈페이지로 접속했다.링크: http://isoredirect.centos.org/centos/7/isos/x86_64/centos-7-x86_64-dvd-1810.iso여기서 나는 iso를 다운받고 usb로 iso 복사했다. iso 복사라는 것은 usb로 부팅해서 os를 설치하는 부팅 usb를 만드는 것이다. 구글에서 iso 복사하는 방법을 검색해 보니 'win32diskimager' 라는 프리웨어 프로그램을 이용하여 만들면 된다고 하였다.출처: https://suwoni-codelab.com/linux/2017/05/22/linux-centos-installusb/win32diskimager: http://sourceforge.net/projects/win32diskimager/그래서 'win32diskimager' 라는 프로그램도 다운받고 usb로 부팅 usb를 만든 다음 개발 서버로 만들 pc에 centos를 설치했다.
centos를 설치하는데 총 20분 정도가 소요된 것 같다. 컴퓨터가 느려서 centos 설치하는데도 시간이 오래 걸렸다. 그냥 pc에 usb를 꼽고 usb 부팅을 한 다음, 그냥 모든 걸 기본설정으로 ok,ok만 하고 설치했다. 마지막으로 root 비밀번호는 내가 자주 사용하는 비밀번호로 설정해서 설치했다.설치가 끝나고 teraterm이라는 ssh 접속 단말기로 개발 서버에 접속한 다음 설치가 잘 되었는지 확인했다.설치가 잘 되었다. 이제부터 리눅스 시작이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/eb99142190b5471fbd44b75251fec78b.html</guid><pubDate>Mon, 17 Dec 2018 01:33:28 GMT</pubDate></item><item><title>[가계부 프로젝트 4일 차] 데이터베이스 설계-3 (가계부 설계)</title><link>http://www.nowonbun.com/Dialy/4259d3eae19b432ebd108599e92bb0c2.html</link><description><![CDATA[이제 가계부의 데이터까지 설계까지 완료되면 데이터베이스 설계는 완료된다. 프로그램상에서 데이터베이스 설계를 어떻게 하는가에 따라 프로그램이 어떻게 바뀌는지 매우 중요한 부분이다. 그래서 처음에 가능하면 앞으로 더 수정 없이 설계하는 게 최고이다. 하지만 현실적으로는 실제 프로그램 코딩이 들어가면 미처 생각지도 못한 부분이 많이 나온다. 또 여러 가지 추가사항에 의해서도 테이블을 수정할 수도 있다. 그러므로 나중에 alter table로 바꾸는 경우도 많이 생기는데 이 부분은 어쩔 수 없다고 생각된다. 그러나 가능하면 최대한 데이터베이스 설계를 잘해서 alter가 없도록 해야 한다.먼저 카테고리를 두 개로 나누었다. 하나는 마스터 로우 카테고리이고, 하나는 트랜젝션 카테고리이다. 마스터 카테고리는 마스터 테이블이기 때문에 먼저 수입, 지출, 저축으로 세 개로 나누고 입력했다. 그 밑의 하위 카테고리 개념으로 트랜젝션으로 설정했다. 수입 중에서 월급, 아르바이트 월급이다. 그리고 지출은 생활비, 공과금, 용돈 식으로 나누기 위함이다. 카테고리는 이렇게 구성하고, 다음은 가계의 데이터를 담는 payment 트랜잭션 테이블이다. 이 테이블은 마스터 로우 카테고리와 트랜잭션 카테고리를 레퍼런스로 갖고, 날짜, 내용, 금액 그리고 비고, 작성날짜, 수정날짜까지 기본으로 가지고 있는 테이블이다.마지막은 localization의 지역화이다.여기까지 내가 구상하고 있는 가계부 프로그램의 데이터베이스 설계가 완성되었다. 더 필요한게 있나.. 아직은 딱히 생각나는 부분이 없다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/4259d3eae19b432ebd108599e92bb0c2.html</guid><pubDate>Thu, 13 Dec 2018 23:00:37 GMT</pubDate></item><item><title>[가계부 프로젝트 3일 차] 데이터베이스 설계-2 (회원관리, 권한관리)</title><link>http://www.nowonbun.com/Dialy/eb81c65f55b74569aa703d879f5ec907.html</link><description><![CDATA[이번에는 가계부의 회원관리 데이터베이스 설계하겠다. 회원 관리 부분은 많은 프로그램이 기본으로 설계되는 부분이다. 최근에는 oauth를 통해 회원관리를 최소화하는 프로그램들도 간혹 있다. 하지만 oauth를 사용해서 회원 정보는 생략하더라도 회원 그룹관리, 권환관리는 필요한 부분이다. 회원관리는 처음 가입할 때 많은 정보를 수집하려고 하면 개인정보 보호법에 따라 수집의 절차가 따라야 하나다. 예를 들면 동의 절차를 받아야 하고, 보관의 기한이 있으며, 폐기할 때는 어떻게 해야 하는지, 어느 부분은 암호화를 해야 하는지등의 절차가 있다. 이를 지키지 않으면 벌금 내거나 특히 동의 없이 제 3자에게 제공하면 징역을 받을 수 있다. 그리고 사이트 강제 폐쇄까지 당할 수 있다.설명은 거창하게 했지만, 실상은 아이디 패스워드, 이름을 대신할 수 있는 별명 정도만 수집하면 개인정보에 걸리는 영역은 없다. 이번 가계부 같은 경우는 우리 가족만 쓰게 될 목표도 있어서 회원가입은 필요 없고 정보 자체도 google oauth를 통해 오는 id, email, 별명, 프로필 이미지 정도만 수집하기 때문에 크게 개인정보위배에 해당되는 내용은 없다.회원 관리의 마스터는 총 3개로 그룹, view권한, action권한이다. 보통, 프로그램들은 그룹 테이블을 마스터 테이블로 만들지 않고 트랜잭션으로 만들어 end user가 그룹관리도 가능하게끔 설계를 하는 게 보통이다. 예를 들면 end user가 사용 상황에 따라 group을 추가하고 사용하는 유저들을 그 그룹에 설정하는 것이다. 그렇게 group를 트랜젝션으로 설계하게 되면 꽤 많은 부분을 생각하고 만들어야 하는데 집에서 쓰는 가계부는 일단 사용 유저가 나 포함 두 명, 세 명으로 한정되어 있기 때문에 굳이 그룹관리를 만들어서 프로그램을 복잡하게 할 필요가 없을 듯 해서 group를 마스터로 정의했다.우리 가족이 아닌 외부에서 접속하게 되면 guest, 일반 사용 유저는 user, 나는 admin으로 슈퍼 유저 그룹의 단 3그룹으로 생각하고 있다.view권한과 action권한은 권한에 대한 정의이다. 먼저 유저에 대해 외부 유저가 로그인하면 최초에 guest그룹에 디폴트로 설정할 생각이다. 그러나 가계부는 우리 가족이 쓰는 정보이기 때문에 이게 불특정 다수에게 공개되면 조금 창피하다. 그럴 때 그룹별로 열람, 수정, 삭제할 수 있는 권한을 각기 주어 guest는 아무것도 할 수 없고 user의 경우는 일단 가계부를 작성하게는 하나 카테고리 추가 삭제 등을 할 수 없다.. admin은 모든 권한을 넣을 생각이다.그리고 user 테이블은 트랜잭션이긴 하지만 기본 키가 idx(int형식의 auto_increment 제약키)형식이 아니고 id자체가 고유키이기 때문에 id로 키를 설정했다. 사실 email까지 같이 이중키를 만들까도 했는데 괜히 테이블구조만 복잡해질 거 같아서 id만 넣었다.마지막은 그룹의 map이다. 그룹 맵이란 사용자와 그룹관계를 n:n으로 설정하는 것이다. 사실 이게 이렇게까지는 필요가 없다. 하나의 유저가 여러 개의 그룹을 속하는 게 오히려 관리 면에서 더 복잡해지기 때문이고 우리 시스템은 사실 그렇게까지는 필요 없다. 그러나 제가 요번에는 가계부에서 끝나는 게 아니고 앞으로 우리 집 스케줄 공유와 게시판 등등으로 시스템을 키워나갈 생각이다. 혹시 나중에 그룹관리가 어떻게 될지 모르니 혹시나 하는 형태로 작성해 넣었다.이번에는 권환테이블과 유저 또는 그룹의 권한 설정이다. 이 역시 n:n의 형태이기 때문에 map으로 작성했다. 내가 생각하는 권한을 이렇다. 먼저 "가"라는 인물이 "a"라는 그룹에 속해있다. 그리고 "add"의 권한을 a그룹은 권한이 없다. 그러나 "가"라는 특정 인물이 권한이 있으면 "add"를 사용할 수 있게 한다. 반대로 a그룹이 "add"의 권한을 가지고 있다. 그러면 "가"라는 인물이 권한이 있던 없든 간에 사용할 수 있다."add"권한은 하나의 그룹만 사용하는 권한이 아니기 때문에 n:n의 조건이 만들어야 한다.데이터베이스에 있는 데이터를 localization을 통해 한글 또는 영어, 일본어로 표시할 생각이다.여기까지 회원관리 및 권한 설계가 완료되었다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/eb81c65f55b74569aa703d879f5ec907.html</guid><pubDate>Wed, 12 Dec 2018 22:53:29 GMT</pubDate></item><item><title>[가계부 프로젝트 2일 차] 데이터베이스 설계-1 (지역화(Localization))</title><link>http://www.nowonbun.com/Dialy/f814f1762de44dce8281d9e16abc39b5.html</link><description><![CDATA[먼저 프로그램을 만들기 위해서는 데이터베이스 설계가 필요하다. 이전 블로그 댓글을 만들 때도 간단한 데이터베이스 설계를 했는데, 그때는 간단한 댓글 입력, 수정, 삭제만 있는 프로그램이라 설계라고 할 것도 별로 없었다. 이번에는 하나의 완전한 프로그램을 만들기 때문에 조금 더 세밀하게 설계를 해볼까 한다.데이터베이스 설계에서 크게 구분하면 먼저 회원관리와 가계부 관리로 분류된다. 그리고 가계부 사용하는 사람, end user가 한국어를 사용하지 못하는 사람도 있으므로 다국어로 만들어야 할 필요가 있다. 다시 정리하면 지역화(localization), 회원관리, 가계부 관리 순으로 데이터베이스를 설계해야겠다..

나는 데이터베이스 설계를 할 때 테이블을 마스터 테이블과 트랜잭션 테이블을 구분해서 작성합니다. 마스터는 시스템을 구성하는 데이터를 갖는 테이블, 트랜잭션은 프로그램상에 작성된 데이터를 갖는 테이블의 의미입니다. 그리고 마스터 테이블은 프로그램상에서 수정할 수 없고 오로지 sql 쿼리로만 수정할 수 있고 트랜젝션은 auto_increament와 idx를 키로 만든 테이블이다. 최근에 기회가 있어 데이터베이스 설계하는 일도 늘고 많은 설계구조를 살펴볼 기회가 있었다. 그런데 의외로 마스터, 트랜젝션 구조로 만들지 않은 프로그램이 많았다. 그래서 내 생각은 꼭 이게 정답은 아닌가 하는 생각도 든다. 다시 설계로 돌아와서 오늘은 지역화 부분을 만들 생각이다.지역화(localization)는 유저가 언어를 선택하면 해당 언어로 표시하기 위한 언어 팩이라고 생각할 수 있다. 지역화는 트랜젝션은 존재하지 않을 것 같고 마스터로서 설정을 미리 해야 하는 데이터라고 생각한다.먼저 언어의 구분으로 mst_languaue_type 테이블을 만들었다. 마스터 데이터로는 한글, 영어, 일어로 구성되어있다. mst_localization 테이블은 실제 key 별로 프로그램 화면상에 표시될 화면이다. 현재는 프로그램 타이틀 데이터를 한글, 영어, 일어를 번역해서 입력했다. 참고로 나는 마스터 테이블의 어두는 mst, 트랜잭션의 어두는 tsn으로 작성한다. 이런건 굳이 표준개발법은 아니다.여기까지 테이블 구성이 어렵지 않다.. 다음은 회원 관리영역이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f814f1762de44dce8281d9e16abc39b5.html</guid><pubDate>Tue, 11 Dec 2018 23:44:15 GMT</pubDate></item><item><title>[가계부 프로젝트 1일 차] 개요</title><link>http://www.nowonbun.com/Dialy/f3de672576d04ff4bb9179ec61e5861a.html</link><description><![CDATA[완벽하지는 않지만 일단 블로그 기능 추가 영역을 마무리한 것에 대해 약간의 성취감이 있다. 명월 일기도 점점 콘텐츠가 쌓여가는 느낌도 있고 개인적으로 무언가 되어가는 느낌이 들어 기분이 좋다.이번 프로젝트는 앞선 글에서 이야기했지만, 개인 서버의 os를 바꾸기 전에 해야 하는 프로젝트 중 하나이다. 가계부는 현재 c#+php으로 작성되어서 사용 중이다. 언어를 혼합해서 만든 프로그램이다. 그래서일까 프로그램에 버그가 많다. 그래서 프로그램을 수정 하기 보다는 새로 만들어보는 게 어떨까 하는 바람으로 시작한다.나는 아직도 개인적으로 부족한 게 많다고 생각해서 프로그램 공부를 소홀히 하지 않으려고 노력하지만, 현업도 있고 개인 생활도 있어서 공부하기가 쉽지 않다. 그래서 내가 가장 재미있게 공부하는 방법 중에 간단한 프로젝트를 만들어서 새로운 opensource가 있으면 적용하고, 운영해보고 틀리는 것이 있으면 수정하면서 공부한다. 공부하는 프로젝트를 선택하는 기준은 다음과 같다.1. 내가 아닌 다른 사람이 잘 사용할 수 있는 프로그램.2. 복잡하지 않고 빠르게 만들 수 있는 프로그램.3. 다음에 새로운 opensource가 생겼을 경우, 부담 없이 적용할 수 있는 프로그램.첫 번째 이유는 프로그램을 자신이 만들 프로그램을 테스트하고 검증을 하면 시야가 좁아져 테스트와 검증의 한계가 생긴다. 그래서 보통 프로그램 검증을 받으려고 하면 많은 사람이 사용하게 하고 검증을 받아야 한다. 많은 사람이 하나의 프로그램을 보면 많은 아이디어도 생기고, 기능에 대한 목적이 분명해서 많은 레뷰를 받을 수 있다. 두 번째는 복잡한 프로그램을 만들면 확실히 배우는 것도 많지만, 공부의 개념으로 하면 너무 어려워서 중간에 질려버립니다. 즉, 내가 끝까지 완료할 수 있을까 하는 생각에 중도 포기 헤 버린다.. 세 번째는 공부로 하는 프로젝트이기 때문에 단순히 프로그램 작성만이 아닌 여러 가지 opensource를 붙여보고 떼어보고 사용하면서 opensource 공부도 챙길 수 있기 때문이다.나는 지금까지 개발경력이 10년 정도이다.. 10년치고는 매우 뛰어난 실력은 아니다. 그래도 기본기에는 웬만큼 충실하다고 생각한다. 여기까지 오기까지 제가 가계부 프로그램을 한 10개도 넘게 만들어 본 것 같다. php, c#, java로도 만들어보고 그 외 node.js, python으로도 해보고 클라이언트는 순수 javascript, jquery+ mobile, jquery +bootstrap등등 한때는 혼합 언어 시스템에 관심이 가서 c# + php 또는 c#+java 등으로도 만들어 봤네요. 그중 최종 버전은 c#+php입니다. c#의 장점과 php의 장점만 선택해서 사용하였는데 이게 혼합 언어 다 보니 예기치 못한 버그들이 많이 생긴다.. 2년 정도 운영해보니 혼합 프로젝트는 정말 아니다는 생각이 든다.이번에는 java + spring + jquery + bootstrap + mariadb로 만들 생각입니다. 이번의 목표는 linux에 들어가는 프로그램, 그리고 유저가 더 쉽게 사용할 수 있는 프로그램이 목표이다. 단계는 데이터베이스 설계, 프레임 워크 설계, 화면 디자인, 모바일과 pc를 분리(단순 반응형이 아닌 웹 디자인을 다르게 갈 생각이다.), 서버사이드 작성, 클라이언트 작성 그리고 테스트, 릴리즈가 목표이다. 처음은 가계부뿐이지만 나중에는 포털식으로 전환해서 게시판, 일정관리 등도 추가할까도 생각하고 있으니 가능하면 회원 관리 부분도 신경 써야 겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f3de672576d04ff4bb9179ec61e5861a.html</guid><pubDate>Tue, 11 Dec 2018 23:32:33 GMT</pubDate></item><item><title>해야 할 일 정리하기</title><link>http://www.nowonbun.com/Dialy/86c439ae1577450cbbd871632b09d3d9.html</link><description><![CDATA[댓글 기능을 20일 정도 걸려서 일단은 블로그에 댓글 달 수 있도록 만들었다. 아직 내가 생각하기에는 ie에서 제대로 작동 안 하는 문제가 있고 메일 기능 추가(댓글을 작성할 때 "댓글 감사합니다(?)" 같이 작성된 메일과 리플이 달릴 때마다 리플이 달렸다는 메일 보내는 기능도 생각은 했었는데 아직 거기까지는 작업을 하지 않았다. 그리고 애드센스(광고)도 붙여야 한다. 애드센스로 블로그를 하면서 돈을 많이 벌고 싶다는 의미는 아니고 앞으로 내가 하는 개발이 있어서 서버를 렌탈을 해야 한다. 그래서 에드센스 수입이 생기면 그 걸로 서버 비용에 조금 보탤 생각이다.그러나 혹시 블로그로 수익올리려는 사람이 있으면 말리고 싶다. 노력에 비해 수입이 너무 적다. 차차리 유투부가 수입이 짭잘하다고 하는데.결론으로는 아직 남아 있는 기능에 대해서는 좀 댓글 기능을 사용해보고 사양 추가 또는 수정할 생각이다. 그리고 연속해서 20일 댓글기능만 작성하다 보니 조금 질리기도 했다. 올해 말까지 꼭 완료하고 싶은 일도 있으므로 서둘러서 마무리했다.일단 현재 내가 생각하고 해야 할 일에 대해서는 아래 항목과 같다.1. 명월일지 개편-&gt; 이것이 원조 내 블로그이다. 그러나 오랫동안 관리를 하지 않아 엉마진창이다. 그래서 나는 이 블로그를 재편하는 게 급선무이다.현재 디자인도 엉망이 되었고 포스팅 내용도 틀린 부분이 많고 보기 어려워진 부분도 많다.(highlight 소스 부분은 이상하게 표시된.) 이런 저런요건을 보건데 가~~장 우선순위가 높지 않을까 생각된다.2. 서버 os 교체-&gt; 제가 집에서 노트북을 하나 개조(?) 해서 집 nas 서버로 사용하고 있다. 이 서버는 텔레비전과 연결하여 가족들이 영화나 티비 재방송을 볼 수 있도록 했고, 가계부 등 여러 웹 프로그램들을 사용하는 서버가 하나 있다. 현재 이 서버의 버전은 윈도우 2008이고 서비스 기간은 아직 1년 정도 남았다. 내가 알기에는 2020년에 서비스 종료이다.그러나 그전에 이 서버가 너~~~~무 느려서 centos로 바꿀 생각이다.3. 그리그 서버 안에 dlna 미디어 서버(현 lg smart)가 있다. 지금은 윈도우 서버 안에서 lg smart라는 프로그램을 사용하고 있지만 centos 로 바꾸면 plex라는 프로그램을 쓸까 한다.내가 생각하기에 lg smart 프로그램은 버그가 조금 있다.내가 사용법을 잘 모르는가? 자꾸 프로그램이 오류나서 실행 종료되버린다.4. 개인 웹 프로그램 이전.-&gt; 그리고 개인적으로 사용하는 프로그램으로는 가계부 프로그램이 있다. 크고 작은 프로그램이 있지만, 현재는 그냥 삭제해버려도 괜찮을 듯싶다. 가계부는 현재도 자주 사용하고 사용한 기간도 길어서 데이터가 많다. 그래서 백업, 복구 또는 데이터 이행을 통해 프로그램을 새로 만들까, 기존 것을 수정을 할까를 생각해야 한다. 그러나 기존 프로그램은 c#이라 java로 다시 만들어야 한다.5. 그 밖에.-&gt; 지금 블로그의 글을 작성하기 위해서 blogediter의 프로그램을 작성해서 사용하고 있는데 이것을 로컬용이 아닌 서버용으로 작성하고 싶다. 그리고 또 git에 아직 미완 프로그램이 있는데 가능하면 완료하고 싶다.다시 정리해서 가장 급한 우선순위는 역시 명월 일지 재편이 먼저라고 생각한다. 이유는 서비스 블로그이기도 하고 정말 심하게 엉망진창이다. 그러나 나는 서버 os를 먼저 교체할까 생각하고 있다. 솔직히 이건 우리 가족만 사용하는 서버라 천천히 해도 상관없지만, 명월 일지 블로그 editor와 일기 블로그 editor를 개발해서 서버에서 운영할까 생각한다. 로컬 프로그램을 만들어서 사용하다 보니 외부에서는 글을 쓸 수 없는 상태가 되어버려서이다. 내가 집에 늦게 가거나 혹은 여행을 가게 되면 그날 블로그 포스팅은 쓸수가 없다. 그래서 최대한 빨리 서버 교체를 하면서 에디터를 만들까 생각하고 있다.다시 그럼, 서버 os 변경 전에 해야 할 일은 결국에는 가계부 프로그램을 다시 만들어야 한다. 지금 가계부 프로그램은 c#으로 만들었는데.. c#이 centos에서 안되는 건 아니지만 최적은 아니기에 java로 바꿀 생각이다. 그럼 우선순위는 가계부 만들기이다!!!]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/86c439ae1577450cbbd871632b09d3d9.html</guid><pubDate>Mon, 10 Dec 2018 23:07:21 GMT</pubDate></item><item><title>[블로그 구축 20일 차] 블로그 댓글 기능 달기 - 11(admin)</title><link>http://www.nowonbun.com/Dialy/59fc0910cbdb4d8f9a045f5cbe9e5b5f.html</link><description><![CDATA[블로그 댓글 기능의 메인 부분은 전부 만들었다. 댓글 기능의 흐름은 클라이언트(브라우저)에서 유저가 구글 아이디로 로그인하고 댓글을 작성하면 서버로 json 형태로 ajax 통신을 한다. 그리고 서버에서는 그 데이터를 받으면 데이터베이스에 저장한다. 그리고 클라이언트(브라우저)에서 유저가 해당 페이지의 댓글 리스트를 요청한다. 서버에서는 json형태로 작성하여 클라이언트로 댓글 정보를 준다. 이런 흐름으로 프로그램이 작성되었다. 아직은 조그마한 버그가 눈에 띄지만, 차차 조금씩 시간 날 때마다 테스트해가면서 수정할 생각이다.그리고 현재 내가 생각하기에 좀 더 필요한 기능은 댓글의 메일 수신기능과 관리자가 댓글의 내용을 일괄적으로 확인할 수 있는 관리자 페이지이다.댓글 기능 admin기능은 블로그 내에서 관리하는 게 아니고 서버측의 php에서 admin페이지를 하나 만들어서 관리할 생각이다. 그냥 관리자 페이지 없이 데이터베이스에서 직접 sql로 관리해도 문제없지만 그래도 매번 쿼리 치기도 불편하고 쿼리를 잘못 입력하면 댓글이 다 날라갈 수도 있으니 안전하게 관리가 가능한 페이지를 만들기 위해서다.
전체적인 내용은 로그인, 그리고 댓글의 내용을 표시하는 table페이지, 그리고 ajax화면으로는 검색, 수정, 삭제할 수 있는 기능이 있다. 이건 데이터베이스의 관리 페이지이므로 삭제된 데이터도 표시했다. 그리고 삭제된 데이터도 활성링크를 통해 삭제 취소도 할 수 있다. 많은 기능이 한 페이지에 넣어서 소스가 꽤 복잡하다. 사실 나는 이렇게 무식하게 프로그램을 개발하지 않는다. 그러나 댓글기능은 순수히 나만 사용할 것이고 여러 페이지로 개발을 하면 오히려 복잡하지는 않을까 생각해서 간단하게 한 페이지로 만들었다.로그인과 페이지소스는 ajax가 아니므로 응답 헤더에 「content-type: text/html;」로 설정했다. 이렇게 하면 브라우저에서는 html을 서버로부터 수신하면 우리가 볼 수 있게 파싱할 것이다. ajax의 경우는 댓글 기능에서 썼던 common 클래스의 그대로 상속 받아 결과를 json 형식으로 나타나게 했다.검색의 경우는 쿼리에 따로 쿼리에 조건절을 붙이지 않고 전체 데이터를 검색할 수 있게 만들었다. 삭제된 데이터도 보여주어야 하니깐.. 전체적으로 소스를 기존의 검색, 삭제, 수정기능을 조금씩 바꿔서 구현했다.이로써 관리자 페이지도 완성했다. 로그인 기능을 만들어서 아이디와 패스워드를 넣으면 서버에 하드 코딩한 슈퍼 유저의 아이디와 패스워드를 비교해서 로그인한다. 관리자 아이디와 패스워드를 데이터베이스에 넣어서 관리하지 않고 하드 코딩한 이유는 이 페이지를 들어갈 사람은 나밖에 없다. 굳이 데이터베이스를 만들어서 관리할 필요성을 느끼지 못했다. 댓글기능은 여기까지 마무리 지을 예정이다. 아직 메일 수신기능과 몇가지 추가기능은 작성하 지 않았는데 좀 더 이 기능을 운영해보고 필요에 따라 나중에 추가할 생각이다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/59fc0910cbdb4d8f9a045f5cbe9e5b5f.html</guid><pubDate>Mon, 10 Dec 2018 22:50:54 GMT</pubDate></item><item><title>[블로그 구축 19일 차] 블로그 댓글 시스템 달기 -10 (client 작성)</title><link>http://www.nowonbun.com/Dialy/a5bdfd0a09ad4e53a355c5009726220a.html</link><description><![CDATA[이번에는 댓글 수정과 리플을 작성한다. 댓글 수정과 리플은 추가, 삭제와 다르게 조금 복잡하다. 이유는 댓글 작성과 삭제는 달리 동적 움직임이 필요 없이 텍스트 박스에서 글을 쓰고 추가 버튼을 누르면 서버에서 댓글 추가 처리한다. 삭제의 경우는 검색된 글에 삭제 링크를 눌러서 삭제하면 된다. 그러나 수정과 삭제는 조금 내용이 다르다. 처음 댓글의 형태는 검색한 결과형태인 리스트 형식의 결과다. 거기에서 수정 링크를 누르게 되면 해당 댓글란이 텍스트 박스로 바뀌고 수정 버튼을 생성한다. 그리고 최종적으로 수정 버튼을 누르게 되면 수정된다. 리플의 경우도 마찬가지다. 검색 결과 후에는 바로 입력할 수 있는 텍스트값이 보이지 않는다. 리플 달기라는 링크를 누르면 비로소 해당 댓글의 아래에 텍스트 박스를 생성시켜 리플을 달수 있는 항목이 생기고 리플 달기라는 버튼을 누르면 생성된다.수정 링크를 누르면 텍스트 박스와 수정 버튼을 만들어야 한다. 텍스트 박스는 단순히 빈 텍스트 박스를 보여주는 게 아니고 수정할 내용을 글을 텍스트 박스안에 넣어주어야 한다. 즉, element의 nodetext를 취득하고 그 element 하위 노드에 textarea를 만들어서 val 값을 nodetext로 부터 취득한 값을 입력한다. 그런 다음, 수정 버튼을 생성했다. 수정 버튼은 동적 생성이기 때문에 클릭 이벤트를 document에 붙였다.마지막으로 수정 버튼을 누르면 서버로 데이터를 보내 해당 코멘트를 수정한다. 수정 쪽의 요구 파라미터 idx와 id, email 그리고 수정될 내용인 comment 내용이다. 수정이 문제없이 된다.다음은 리플 기능 작성이다. 리플의 이벤트 형태는 수정과 비슷하다. 그러나 동작의 형태가 조금 다른데 우선 텍스트 박스와 리플 달기라는 버튼을 만들어준다. 리플 달기는 코멘트를 새로 만드는 것과 같으므로 굳이 텍스트박스안에 값을 넣을 필요는 없다. 그리고 최종적으로 add.php로 댓글 정보를 보내 댓글을 추가한다. 여기서는 리플 대상이 되는 댓글의 idx를 parent 파라미터에 포함해 보내야 한다. 그래야 해당 리플인지를 알수있다.수정과 리플의 내용은 전반적으로 내용이 비슷하다. 비슷한데도 리플은 추가기능에 공통으로 사용하고 수정은 독립된 클래스이다. 잘 생각 해보면 이것도 고칠수 있을꺼 같기는 한데. 굳이 쿼리상의 insert와 update의 차이도 있으므로 따로 처리했다.여기까지 기본적인 댓글 기능을 완성했다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/a5bdfd0a09ad4e53a355c5009726220a.html</guid><pubDate>Sun, 09 Dec 2018 01:51:28 GMT</pubDate></item><item><title>[블로그 구축 18일 차] 블로그 댓글 시스템 달기 -9 (client 작성)</title><link>http://www.nowonbun.com/Dialy/90f51b80de17467fb55c535980313ff9.html</link><description><![CDATA[이번에는 댓글 기능 추가에서 가장 복잡할 거라고 예상되는 검색 부분이다. 검색해서 받아온 데이터를 동적으로 element를 생성하고 dom 영역에 생성해야 하는 로직이 필요하다고 생각되기 때문이다. 먼저 소스를 전체적으로 작성하고 세부적인 부분을 확인하겠다.
검색은 우리가 검색 버튼을 눌러서 발생하는 이벤트가 아니고 처음 웹페이지가 열리고 호출 또는 추가, 삭제, 수정이벤트가 끝나고 reload 할 때 호출하는 형식이다. 그러니 따로 document.ready에 넣어 이벤트로 만들 필요는 없다. 검색 버튼이 없으니 이벤트로 만들 수가 없다.검색에서 필요한 파라미터는 url, id, email이다. url은 페이지의 주소, id와 email은 로그인 했을 때의 유저 정보가 된다. 로그인하지 않아도 댓글 검색은 이루어져야 하니 id, email에 반드시 유저 정보가 있을 필요는 없다. 그러므로 checklogin의 로그인 체크는 필요가 없다.검색도 공통함수 commentajax를 호출해서 서버에서 데이터를 받아온다. 실제로 데이터를 받아보면 아래와 같은 json 형식으로 된다.구조는 전체 댓글 두 개, idx가 1인 데이터는 child도 한 개가 있다. 처음 데이터의 리스트형식을 getitem라는 내부함수에서 처리한다. getitem에서는 다시 createcomment를 호출해서 element를 작성하고 최종적으로는 id가 commentlist라는 element에 append를 한다.그리고 ismodify 파라미터가 true인 경우는 수정할 수 있게 수정, 삭제 링크를 만든다. 서버에서 ismodify가 true의 조건은 등록 댓글 id, email와 로그인한 id, email이 일치하는 경우였다. 즉, 내가 쓴 댓글을 수정, 삭제가 가능하다는 뜻이다.여기서 나는 새로 생성하는 element를 자바스크립트 안에 코딩했다. 이 방식에 대해서는 여러 방법이 있다. 웹 dom영역에서 template 태그 안에 element를 넣고 jquery의 html함수로 읽어드려 치환하는 방법이 있고 나처럼 자바스크립트 안에 넣는 방법이 있다. 일단 코딩하는 데는 template 태그 안에 넣는 방법이 편하다. 그러나 template 태그 안에 넣으면 element가 전부 노출이 되기 때문에 그걸로 악용하는 사람도 더러 있었다. 당연히 뭐 코딩하는 방법에 따라 다르지만.. 나는 자바스크립트 안에 element를 작성하는 방법을 선호한다. 최종 배포할 때 자바스크립트는 전부 압축을 해버리기 때문에 그러면 보안상으로 조금 안전해진다. 그러나 시스템 망가트리려고 마음먹으면 압축을 해도 소용없다.ㅠㅠ
삭제의 경우는 댓글 검색이 끝나고 삭제 링크를 누르면 발생하는 이벤트다. 링크의 경우는 동적으로 생성되는 element이기에 이벤트를 document에 걸었다. document는 사라지거나 하지 않기 때문에 document에 거는 것이다. 그렇게 해서 삭제 element가 없어졌다 다시 생기더라도 이벤트가 해제되거나 동작 안 하는 경우는 없다.document에 이벤트를 걸 때 생각해야 할 점은 댓글 기능은 워낙 작아서 발생할 가능성이 작지만 큰 프로젝트라면 이벤트가 중복으로 걸 수 있는 위험이 있다. 예를 들면 내용이 비슷한 페이지를 particle로 구성하고 안에 같은 document 이벤트가 있다고 가정할 시 두 번 중첩 이벤트가 걸린다. 두 번 중첩은 이벤트가 두 번 발생할 수 있는 의미다. 그러면 버그가 발생하기 때문에 off.on 형태로도 많이 구성하나 결론적으로 off.on 형식으로 코딩을 하면 그만큼 리소스를 많이 먹기 때문에 시스템이 느려진다.그렇기 때문에 이벤트 target을 정할 때는 이건 동적 소스, 정적소스를 확실히 구분해서 이벤트를 거는 게 좋다.삭제는 서버에서 요구하는 파라미터가 idx, url, id, email이다. idx는 삭제할 타깃이고 url은 정합성, id, email은 권한 체크용으로 받는다. 이 조건이 맞으면 삭제가 진행된다.이제 수정과 리플등록 부분만 작성하면 전체적인 댓글 기능은 완성된다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/90f51b80de17467fb55c535980313ff9.html</guid><pubDate>Thu, 06 Dec 2018 21:53:31 GMT</pubDate></item><item><title>[블로그 구축 17일 차] 블로그 댓글 시스템 달기 -8 (client 작성)</title><link>http://www.nowonbun.com/Dialy/c4097e40237147c696ba6c0af47a8718.html</link><description><![CDATA[앞에서 기본 디자인과 로그인에 대해서 작성했다. 이번에는 공통부분과 댓글 추가하는 부분을 만들어 볼까 한다.검색 부분은 조금 복잡하므로 다음에 한꺼번에 작성할 생각이다.웹 클라이언트에서 사용하는 스크립트는 javascript이다. 그러나 javascript의 바닐라 버전(순수 버전)으로 사용하면 꽤 복잡하다. 사실 한 10년 전만 해도 바닐라 버전만 사용했었는데 최근에는 jquery만 사용하다 보니 다시 바닐라 버전으로만은 못할 것 같다. 이유는 코드가 어마어마하게 길어질 것 같아서이다. 그래서 요즘은 바날라 버전으로 만들기 힘들어서 angularjs, jquery 등 많은 라이브러리가 있다. 그중 나는 jquery만 사용하고 있다. 예전에 angularjs로 만들어 본 적이 있는데 남들은 이게 편하다고 하는데 나는 당최 뭐가 편한지 모르겠다. 그냥 코드만 더 길어지고 복잡만 해지는 것 같던데.. 물론 onepage 시스템을 만들면 편할 거 같은데 굳이 onepage로 시스템을 통으로 만들 필요성을 아직은 느끼질 못하겠다.jquery는 javascript의 라이브러리이다. 이 뜻은 jquery라 javascript의 기반으로 함수를 좀 더 편하게 사용하기 위해 재정의를 했다고 보면 된다. 그 뜻은 jquery를 사용하더라도 javascript를 모르면 사용할 수 없다는 뜻이다.원래 나는 javascript 코드를 만들 때, model-controller로 구성하고 외부 참조변수, 내부 변수 구분해서 작성한다. 그러나 지금 만드는 기능은 워낙 사이즈가 작고 간단한 프로그램이라 오히려 model-controller로 만들어서 하면 더 복잡해질 거 같다. 그래서 그냥 public function으로 만들었다.먼저 commentajax는 추가, 검색, 삭제, 수정이 모두 ajax로 서버로 접속하기 때문에 공통으로 묶었습니다. 이번 서버측 php와 비슷한 설정이다. 서버 모두 post 형식으로 받기 때문에 타입은 post로 고정하고, 모두 json형식으로 데이터를 받기 때문에 데이터 타입도 json으로 고정했다. 성공했을 때는 cb의 콜백함수를 호출하고 댓글을 다시 reload하는 형식으로 만들었다.그리고 에러가 나면 에러 메시지가 나오고 댓글 element를 hide시킨다.checklogin은 우리가 서버로 접속하기 전에 무조건 login상태를 확인하기 위한 공통함수이다. 서버측에서 추가, 검색, 삭제, 수정할때 id와 email값을 받아야 하기 때문에 필수라고 할수 있다.여기는 댓글을 추가하는 부분이다. 기본적으로 나는 javascript를 html 구성 중 가장 밑에 배치하므로 document.ready를 기다릴 필요는 없다. 그러나 코드의 가독성과 앞으로 어떻게 수정될지 모르기 때문에 이벤트를 document.ready안에 넣는다. document.ready는 jquery에서 $(function(){ }); 의 형태로 만들어진다.댓글 추가할 때는 먼저 공통함수의 checklogin로 로그인 체크합니다. 그리고 comment영역에서 엔터를 모두 띄어쓰기로 치환했습니다. 300자 제한을 했는데 모두 엔터를 쳐서 입력하면 댓글 구조가 이상해 지니깐 입니다. 이 부분을 서버 부분에서도 체크하는 게 좋을 것같다. 여기를 만들다 보니 갑자기 체크해야 겠다는 생각이 들었다. 서버측 php도 수정해놔야겠다.그리고 파라미터는 서버 요구사항대로 url, id, email, comment를 받아서 전송한다. id, email은 구글 oauth2에서 받은 정보이다. 그리고 성공 콜백이 오면 등록 메시지 표시하고 코멘트 텍스트 박스를 초기화한다.댓글 추가는 간단해서 어려운 코드가 없다. 다음 검색 부분이 가장 복잡하지 않을까 생각된다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/c4097e40237147c696ba6c0af47a8718.html</guid><pubDate>Wed, 05 Dec 2018 22:28:41 GMT</pubDate></item><item><title>[블로그 구축 16일 차] 블로그 댓글 시스템 달기 -7(client 작성)</title><link>http://www.nowonbun.com/Dialy/commentDisign.html</link><description><![CDATA[벌써 블로그 구축 프로젝트를 시작한 지 보름이 지났다. 그러나 아직　생각처럼 진척이 팍팍 나가지 않는다. 그래서 조금 지루한 감이 없지 않아 있다. 그래도 올해 말에 꼭 하고 싶은 프로젝트가 있으므로 최대한 빨리해서 30일 차 이전에 끝내는 게 목표다.댓글 기능의 서버 쪽 구현은 약 70% 정도 완료가 되었다. 아직 테스트도 제대로 되지 않아서 버그가 많을 거 같긴 하지만, 주요 부분은 일단 구현이 되었다. client까지 빨리 만들고 서버 쪽 관리 페이지와 메일 기능을 추가해서 빨리 완성해야겠다. 블로그를 한 2~3주간 사용해보니 이곳저곳에서 버그도 조금씩 보이고 할 게 많다고 생각된다. 아직 방문자가 없어서 다행이다. ㅎㅎ 이게 진짜 다행인지...이번에는 client쪽을 구현해 볼까 한다. client 쪽이라고 하면 브라우저, 즉 제 블로그에서 javascript(jquery)를 통해 서버로 접속해서 댓글 추가, 검색, 수정, 삭제 부분을 말한다.서버 쪽은 화면 디자인은 필요 없지만 client 영역은 화면 디자인이 필요하니 우선 디자인을 먼저 했다.이 댓글 기능은 블로그에서 사용할 것이기 때문에 최대한 css와 js를 블로그와 일치시켜서 비슷한 환경으로 구성했다. 구성한 방법은 블로그를 소스 보기로 해서 복사한 다음 포스트 내용과 최신 글 내용은 개발하는 데 필요가 없으므로 다 삭제하고 댓글 영역만 복사해서 개발 환경을 설정했다. 개발 환경은 가능하면 실제 사용하는 곳과 최대한 비슷하게 구성을 해야 나중에 릴리즈할 때 어려움이 없다.client의 개발 구성은 먼저 로그인, 예전에 조사했던 google oauth2로 로그인 화면을 만들고, 그다음에는 입력, 검색, 삭제, 수정 순으로 기능을 추가할까 생각하고 있다.로그인 기능은 google의 가이드를 보고 참고했다.https://developers.google.com/identity/sign-in/web/가이드에서는 로그인 박스를 넣을 div를 선언하고 meta태그에 google client id를 넣는다. 그리고 구글에서 제공하는 js를 링크하고 onsignin함수를 넣으라고 되어있다. 그대로 쓰기에는 사양과 다르기 때문에 필요한 부분을 조금 수정했다.https://stackoverflow.com/questions/31331428/how-to-call-getbasicprofile-of-google-to-google-signin-on-only-button-click예전에 조사한 스택 오버플로우에 올린 글이다. 여기에는 div영역의 id를 바꿀 수 있고 이벤트 명도 수정할 수 있다. 구글의 oauth의 경우는 로그아웃되어 있으면 자동으로 구글 로그인 버튼이 나온다.로그인되어있지 않으면 자동으로 로그인 버튼이 hide된다. 나는 로그인되어있으면 댓글을 입력할 수 있는 text-box와 입력 버튼이 보이게끔 작성했다.뭐 여기까지 일반적인 로그인 방법과 댓글 작성하는 디자인이다. 딱히 여기에 대해서 제가 더 글을 쓸 내용이 없다.ui를 구성할 때, 나만의 특별한 기능, 특별한 디자인으로 구성하는 사람도 있지만 나는 가장 보편적인 디자인과 기능을 선호하는 편이다. 왜냐하면, 프로그램을 설계하다 보면 유저의 사용자 학습 부분도 검토해야 하기 때문이다.예를 들면 윈도우 메뉴바는 하단, 시작 버튼은 왼쪽 아래, 맥은 상단에 있다. 이렇게 있는데 나는 독특한 기능이라고 마우스 왼쪽 오른쪽 동시에 누르면 메뉴가 나오게끔 설계를 하면 많은 사람이 메뉴가 어디 갔지? 하면서 메뉴를 찾는 데 시간을 많이 소비하게 된다. 그리고 방법을 알고 있더라도 아직 익숙하지 않기 때문에 많이 헤멜 수도 있다. 그 뜻은 아무리 좋은 기능, 혁신적인 기능이라도 사용자 학습이 되지 않은 기능들은 그냥 불편한 기능일 뿐이다. 그런 면에서 보면 스티브 잡스가 대단하다. 새로운 시스템, 기능이 나와도 사람들이 많은 어려움 없이 쉽게 흡수가 되는 그런 설계를 하는 것. 이건 쉽지만, 매우 어려운 일이다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/commentDisign.html</guid><pubDate>Tue, 04 Dec 2018 23:13:59 GMT</pubDate></item><item><title>[블로그 구축 15일 차] 블로그 댓글 기능 달기 -6(server 작성)</title><link>http://www.nowonbun.com/Dialy/comment_delete_modify20181204.html</link><description><![CDATA[사람마다 설계하는 구조와 방식, 진행 방법이 전부 다르다. 보통 자기만의 경험으로 가장 최적의 방식이 있다. 그래서 내가 작성하는 방식은 반드시 최적은 아니다. 프로젝트마다 다르지만 보통 입력영역을 우선으로 만들고 그다음은 검색, 삭제, 마지막으로 수정하는 영역 순으로 개발한다. 나한테는 이런 순서가 가장 중복작업을 피하고 소스가 가장 깔끔하게 만들어진다고 생각한다.그래서 앞 포스트에서 입력과 검색영역을 만들었다. 다음은 이번에는 삭제와 수정 순으로 만들어 볼까 생각하고 있다.삭제에는 많은 파라미터가 필요 없다. 먼저 키가 되는 idx와 그걸 삭제할 수 있는 권한체크만 가능하면 된다. idx만으로 삭제를 해버리면 누구든 데이터를 삭제할 수 있으므로 아이디 체크가 필요하다. 그래서 파라미터에서 idx는 당연히 받고 url, id, email이 일치하면 그 데이터를 삭제할 수 있게 했다. 추가로 id가 super 유저라고 하면 id, email은 일치하지 않아도 삭제할 수 있게 만들었다. 전체적인 흐름은 추가 소스와 비슷하다. get방식이면 401에러를 리턴하고 등등. 그리고 완료되면 json으로 ok값을 리턴한다.내가 수정 영역을 가장 마지막에 두는 이유는 두 가지 때문이다. 입력과 삭제보다 수정은 조금 더 복잡하다. 그리고 수정은 입력과 삭제의 소스와 비슷하므로 미리 입력과 삭제를 만들면 수정 부분을 좀 더 수월하게 작성할 수 있다. 먼저 파라미터는 입력에서 받았던 파라미터와 비슷한데 그중 수정할 idx 키를 하나 더 받는다. 그리고 수정 권한을 체크하는데 이 부분은 삭제와 비슷하게 url, id, email이 일치하면 수정할 수 있고 일치하지 않으면 수정할 수 없게 한다. 역시 super 유저의 경우는 일치하지 않아도 수정할 수 있다.여기서 나는 입력, 삭제와 다르게 comment_h 테이블(히스토리 테이블)에 insert select를 했다. 이는 수정의 로그를 남기기 위한 건데, 보통은 이 부분을 소스 상에서 처리하지 않고 트리거로 처리가 일반적이다. 그러나 현재 내가 사용하고 있는 서버 호스트는 무료 호스트이고 mysql버전이 꽤 옛날 거다. 꽤 옛날 거라도 해도 triger는 있지만, 혹시나 해서 triger로 처리하지 않고 직접 소스에서 insert select로 작성했다. 덕분에 소스가 조금 지저분해졌다. 만약 이게 복잡한 프로젝트이라고 하면 이렇게 작성할 경우 프로그램 참 어렵게 한다고 하겠지만 간단한 프로그램이니 이렇게 처리했다.여기까지 서버 영역 프로그래밍이 완료되었다. 아직 내가 생각하기에는 admin과 댓글이 달리면 메일을 발송하는 부분이 더 필요한데 우선 댓글 기능을 활성화하는 게 목표이기 때문에 일단 일차 릴리즈가 완료가 되면 추가사항으로 개발할 생각이다.위 흐름표는 지금 내가 생각하고 있는 댓글 기능에 대한 설계도(?)이다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/comment_delete_modify20181204.html</guid><pubDate>Tue, 04 Dec 2018 01:47:01 GMT</pubDate></item><item><title>[블로그 구축 14일 차] 블로그 댓글 기능 달기 -5(server 작성)</title><link>http://www.nowonbun.com/Dialy/22c4b209f70d4f4b95b2bc822da6fc69.html</link><description><![CDATA[상위 common 추상 클래스와 database connection을 만들었다. 하루 만에 다 만들기에는 개인적인 시간이 충분하지 않기 때문에 단계별로 작업할 생각이다.댓글 추가 페이지는 add.php로 만들었다. add.php 안에서 contoller 클래스를 선언하고 common.php에서 만들었던 common 클래스를 상속받아서 만들었다. 소스의 흐름은 post 형식으로만 사용이 가능하게 했다. 그뜻은 get 방식으로 오면 401에러를 발생시킨다. 왜냐하면, ajax를 통해 post 메소드가 아닌 직접 접속하게 되면 에러페이지를 내보내기 위해서이다. 그리고 각 파라미터값을 변수로 변환하고 데이터 검사를 한 후에 데이터베이스에 insert했다. insert가 잘 되면 json 형식의 result를 키로 ok 값을 리턴하고 그렇지 않으면 ng를 리턴하게 설정했다.여기서 add.php만 보면 어제 추가한 common 클래스에는 없던 validateurl 함수와 validate가 있다. 이 두 함수를 common 클래스에 넣은 이유는 url검사와 데이터 null검사는 add에서만 사용하는 것이 아니고 검색, 수정, 삭제할 때도 사용할 것 같아서 공통 클래스에 작성했다. 그렇게 하면 다른 클래스에도 같은 함수를 만들지 않아도 공통으로 쓸 수 있다. 나는 copy-phase를 매우 싫어하기 때문에 가능하면 이렇식으로 공통함수를 관리하는 편이다.댓글 추가하는 부분은 데이터를 insert하는 부분이라 데이터 검사만 잘 되면 크게 어려운 부분은 없다.데이터를 insert했으니 이번에는 select 검색하는 클래스를 만들었다. 구조는 add부분과 비슷하다. post형식으로 받고 파라미터 검사하고 데이터베이스에서 select하는 것이다. 여기서는 select한 값을 comment 클래스를 할당하여 list형식으로 만들었다. 이렇게 하면 결괏값을 10개 검색했다고 하면 10개의 comment 클래스가 list에 할당되는 형태이다. 이렇게 되면 데이터베이스 구조와 클래스 구조를 비슷하게 생각할 수 있다. sort를 할 수도 있고 필요 없는 데이터는 뺄 수도 있고. 이것이 자바나 c#에서의 orm 개념이다.검색의 기준은 url로 파라미터로 요청이 오면 해당 키의 댓글만 검색하는 형태이다. 아직 클라이언트를 만들이지는 않았지만 url은 location.origin + location.pathname 형태로 오기 때문에 같은 페이지의 경우면 같은 값으로 요청된다. 그리고 결국에 reponse는 json형식으로 변환해야 하기 때문에 comment class형태에서 array 형태로 변환했다. 중간에 parent키가 null인 경우는 최상위 댓글이고 parent가 null아니면 리플의 형태이기 때문에 그것에 맞게 array를 작성했다. java나 c#은 클래스를 json으로 변환하는 내부 함수? 라이브러리가 있는데 php는 없는 듯싶어서 저런 식으로 작성됐다. 혹시 있을지도 모르겠지만.. 어떻게 보면 이게 정말 가시적인 형태라 이해하기는 편한데 소스가 길어지니 귀찮게 느껴진다.common 클래스도 수정했다. 앞에서 이야기한 추가 부분의 validate함수를 공통으로 만들었습니다. 단순히 null체크와 url이면 host 주소 검사, idx면 정수검사를 추가했습니다. 그리고 super user의 영역인데 super user는 하드 코딩으로 넣어놨습니다. 관리자는 나밖에 없으니 굳이 데이터베이스로 회원관리를 만들어 관리할 필요는 없을 것 같아서 이다.다시 검색영역으로 돌아가서 ismodify 컬럼을 보면 댓글이 본인 것이면 수정할 수 있고 본인 것이 아니면 수정할 수 없게 한 파라미터가 있다. 여기에 super 유저라면 보든 댓글의 수정이 가능하게 바꾸려고 만든 부분이다. super user도 검색뿐 아니라 수정, 삭제에서도 필요할 것 같아서 공통에 넣었다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/22c4b209f70d4f4b95b2bc822da6fc69.html</guid><pubDate>Sun, 02 Dec 2018 17:12:05 GMT</pubDate></item><item><title>[블로그 구축 13일 차] 블로그 댓글 기능 달기 -4 (server 작성)</title><link>http://www.nowonbun.com/Dialy/32d7d7135654429faf3cbdfe618bae00.html</link><description><![CDATA[데이터베이스 설계도 완료했으니 이제 본격적인 코딩이다. 본래는 프로그램 설계를 하고 코딩해야 정상적인 프로젝트 흐름이지만 복잡한 프로그램도 아니고 간단하니 바로 코딩 시작합니다.서버 스크립트 사용 언어는 예전에 무료 호스팅 우비에서 사용하기로 했으니 php로 작성했다.개인적으로 좋아하는 언어는 java와 c#같은 oop(object-oriented programming: 객체지향 프로그래밍)가 좋은데 무료 호스팅에서는 그 언어들을 지원하지 않는다. 왜 그럴까? java도 무료 언어인데. 이런 점이 참 아쉽다.그렇다고 php가 성능이 떨어지는 언어는 아니다. 가볍고 빠르고 꽤 직관적인 언어라 구현이 매우 빠르다. 메모리 직접 참조가 없는데도 메모리 릭도 거의 없다.. 꽤 편리하고 좋은 언어다. 단점은 java처럼 메모리를 직접 관리하는 영역이 없어서 디자인 패턴 적용이 쉽지가 않다. 그리고 스레드를 직접 컨트롤할 수 있는 것도 아니다. 또 댓글 기능처럼 소형 프로젝트는 괜찮으나 대형 프로젝트로 가면 소스가 엄청나게 많으므로 관리도 만만치 않다.그러나 댓글 기능은 복잡한 프로그램을 하는 게 아니고 간단하게 글쓰기, 수정하기, 삭제하기 그리고 검색하기를 ajax로 값을 가져올 수 있으면 되기 때문에 php로도 충분하다.구성은 다음과 같이 생각하고 있다.common.php - 공통 부분 (comment entity, abstract controller, db connection)add.php - 입력 부분modify.php - 수정 부분delete.php - 삭제 부분select.php - 검색 부분먼저 common.php를 만들었다.
위 클래스는 comment 클래스이다. 이 클래스의 목적은 데이터베이스의 값을 가져와서 클래스로 담을 생각이다. 댓글 하나의 정보가 하나의 클래스가 된다. 여러 개의 데이터를 가져오면 comment 클래스를 리스트에 담아서 사용할 생각이다. 그럼 sort나 값을 다루기도 편하다. orm 개념이라 java나 c#에서 많이 설계하는 형태이다. php 세계에서는 어떻게 할까? 비슷할 거 같다.추가로 데이터베이스와 다른 변수가 child가 있다. 이건 comment 클래스의 리스트를 넣을 생각인데 댓글의 하위 리플 댓글 리스트가 여기에 들어간다. php는 자료형을 선언하는 게 아니라서 소스만 보고는 어떤 데이터 형태가 들어가는지 확인하기가 어렵다.
먼저 common 클래스에는 데이터베이스 커넥션(dbconn)과 입력, 수정, 삭제, 검색의 상위 클래스(common)을 만들었다. 네 가지 기능의 공통적인 함수를 common 클래스에 넣었다. 그리고 일단 네 가지 액션 모두 데이터베이스 접속을 하는 것 같고, 웹 해더영역도 ajax로만 사용하기 때문에 header를 공통에 선언했다. 그리고 나는 cross 플랫폼이기 때문에 해더에 모든 사이트에서 허용한다고 설정했다. 이걸 안 하면 아마 ajax로 받아오는 곳에서 security 에러 난다.그리고 execute를 호출하면 하위 클래스에선 run함수가 호출하게 된다. 나는 항상 프로그램 설계를 할 때 하위 클래스(업무 영역)이 직접 호출하게 하지 않는다. 이유는 관리적인 문제 때문인데 하위 클래스를 직접 호출하는 영역이 많아질수록 에러가 발생했을 때 찾기가 어려워져서다. 이게 정답은 아니고 그냥 사람마다 설계하는 스타일인데 나는 이렇게 작성하는 것을 좋아한다. 그리고 run에서는 array값을 리턴을 받고 array로 받으면 json으로 변환하여 리턴하는 형태로 만들었다.php가 함수 return 타입과 변수 타입을 선언하지 않기 때문에 코드만으로 무슨 값이 오는지 알 수가 없다. 그런 면은 다른 언어보다 가독성이 참 떨어진다. 주석으로 설명해야 하나? 나는 코드에 주석 다는 걸 별로 좋아하지 않는데..]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/32d7d7135654429faf3cbdfe618bae00.html</guid><pubDate>Sat, 01 Dec 2018 23:02:57 GMT</pubDate></item><item><title>[블로그 구축 12일 차] 블로그 댓글 기능 달기 - 3 (DB 설계)</title><link>http://www.nowonbun.com/Dialy/commentDatabase20171130.html</link><description><![CDATA[기본적인 자료조사는 끝났고, 드디어 프로그래밍을 위한 첫 단계인 데이터베이스 설계이다. 데이터베이스는 처음 설계하면 나중에 운영하는 중에는 바꾸기가 매우 어려운 영역이다. 그래서 나는 가장 중요하다고 생각하는 부분이 설계라고 생각한다.설계 방식은 사람마다 방식이 다르고 구조도 많이 다르다. 구조를 설계하는 방법에는 데이터베이스 정규화라고 어느 정도 정해진 규칙이 있다. 그러나 실무에서는 요구사항과 차이가 있는 경우도 있고 로그나 성능을 위해서 반드시 정규화의 규칙을 따라서 설계할 필요는 없다. 상황에 따라 데이터 중복이나 레퍼런스를 연결 안 하는 경우도 있다. 그러나 가능하면 정규화에 맞추어서 만드는 것이 이상적이다. 그래서 설계는 딱 정해진 규칙이 없고 그냥 많이 만들어보고 많이 운영해보고 문제점을 느끼면 다음 설계부터는 고려해서 다시 설계하고... 데이터베이스 설계영역은 그래서 경험이 많이 중요하다.
블로그 댓글 기능을 위한 데이터베이스 설계는 일단 마스터 테이블은 만들지 않았다. 트랜잭션 테이블 하나와 히스토리 테이블이다. 두 테이블은 idx에 auto_increament 제약을 주어서 테이블 키로 설정했다. 그리고 url 컬럼은 어느 댓글 페이지인지 구분할 생각이다. 그러니깐 location.origin + location.pathname 을 넣는 다는 의미다. location.href을 안 넣는 이유는 사용하는 페이지에 파라미터가 있으면 다른 페이지로 인식돼버리기 때문이다. id와 email은 oauth로부터 받은 id를 넣을 것이고 ip는 client ip주소이. 혹시나 나중에 ddos 대책을 위해 넣어 놨다. comment는 댓글 내용이 된다. 그리고 parent는 self reference를 걸었는데 여기는 댓글의 리플을 위한 항목이다. isdeleted는 삭제할 경우 물리적 삭제가 아닌 논리적 삭제를 할 예정이다.comment_h의 테이블은 댓글 수정이 있으면 로그를 남겨놓기 위한 테이블이다. triger는 작성하지 않고 소스 상에서 insert select 할 예정이다. 왜냐하면, 무료 웹 호스팅이다 보니 mysql버전이 낮다. 그러다 보니 triger로 예기치 못한 에러가 나올 수 있으니 최대한 안전하게 처리하기 위함이다.여기까지 데이터베이스 설계가 완료되었다. 다음은 댓글 서버스크립트(php)를 만들 생각이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/commentDatabase20171130.html</guid><pubDate>Sat, 01 Dec 2018 13:30:44 GMT</pubDate></item><item><title>[블로그 구축 11일 차] 블로그 댓글 기능 달기 - 2 (구글의 oauth)</title><link>http://www.nowonbun.com/Dialy/oAuth20181130.html</link><description><![CDATA[블로그에 댓글 기능의 요구 사항은 정리되었다. 다시 정리하면, 먼저 "우버 사이트의 무료 웹호스팅을 통해서 ajax로 댓글을 만든다. 중간에 로그인 인증은 구글 oauth를 사용한다." 이다.우선 웹호스팅의 데이터베이스 설계를 하기 전에 무슨 데이터를 취급하는지 조사를 할 필요가 있다. 댓글이니 우선 댓글 내용이 필요하고 어떤 url의 댓글인지 key가 필요하고, 또 누가 댓글을 썼는지 아이디의 정보가 필요하다.그중 아이디의 정보는 대형 포털사이트를 로그인하면 oauth2의 인증시스템을 통해서 로그인에 대한 키 정보를 알려주는 시스템이 있다. 다시 말하면 회원 관리를 굳이 만들지 않아도 로그인 기능을 지원해주는 서비스이다. 회원 정보의 이름이던가 이메일주소 등등이 있다. 다른 뉴스사이트 등은 동시에 여러 인증을 사용하는데, 나는 그냥 구글 인증만 사용할 생각이다. 왜냐하면, 여러 개 관리하기도 귀찮고 나중에 지역화(localization), 다시 말해 일본어 버전, 영어 버전도 만들 생각이다. 그때 네이버나 다음의 포털사이트는 일본이나 미국에서는 사용하지 않기 때문에 필요가 없다. 또 블로그 시스템을 언어별로 각기 개발하기보단 하나의 시스템으로 통합 관리하고 싶으므로 세계적으로 가장 많이 사용되는 구글 인증을 사용할 생각이다.또 나만의 생각일 지도 모르겠는데 많은 유저들이 google 아이디 하나쯤은 가지고 있을 거라는 추측이 있기 때문이다. 왜냐하면, android의 playstore를 사용하려면 구글 아이디가 필요하므로 많은 유저가 가지고 있을 거라 생각된다.우선 구글 api를 뒤적뒤적 찾아보았다.https://developers.google.com/identity/sign-in/web/위 링크를 통해 접속해보니 딱, 내가 필요한 소스가 예제로 작성까지 되어있다. 보아하니 브라우저에 구글 아이디가 로그인되어 있으면 onsignin의 함수가 실행되고 아니면 실행이 안 되는 구조이다. 그러나 로그인이 되지 않았을 때 실행이 안 되는 건 조금 문제가 있을 것 같다. 왜냐하면, 로그인이 확인된 것은 내가 쓴 댓글과 댓글을 작성할 때 필요하지만, 로그인이 안 되어있을 때는 댓글을 쓰는 텍스트박스와 버튼을 모두 disabled 할 생각이다. 그런데 이벤트가 없다니 어떻게 해야 할지...그래서 뒤적뒤적 찾아보니 스택 오버플로우에 나와 같은 고민으로 올린 글을 발견했다.https://stackoverflow.com/questions/31331428/how-to-call-getbasicprofile-of-google-to-google-signin-on-only-button-click이 두 소스를 응용해서 사용하면 내가 원하는 구조가 나올 것 같다.다시 머릿속으로 구조를 정리해 보았다.먼저 페이지가 load 할 떄 구글 로그인이 되어있으면 등록할 수 있는 텍스트 박스, 그리고 다른 댓글에는 replay 달기 버튼이 추가되고, 내가 작성한 댓글에는 수정과 삭제까지 가능하도록 동적으로 버튼을 만든다. 다음은 로그인되어 있지 않을 때는 로그인을 요구하는 구글 버튼이 보이고 등록하는 텍스트 박스는 disabled 해버린다. 다른 댓글에도 replay 달기 버튼을 모두 숨기고, 당연히 로그인되어 있지 않으니 모든 댓글은 수정과 삭제 버튼이 숨겨져 있어야 한다. 그리고 댓글에서 로그인해서 수정하거나 삭제, 등록하게 되면 ajax를 통해 서버 단(php)로 정보를 송신한다. 그리고 서버단(php)에서는 수정하거나 삭제, 등록하는 처리하는 웹페이지를 통해 처리하면 된다.그럼 구성은 어느 정도 완료가 되었고 데이터베이스를 설계하기 위해 데이터는 무엇이 있는지 조사해야겠다.id 가 있고, full name, email, token 등이 있다. 여기서 제가 필요한 데이터는 id와 email 뿐이다. 다른 건 필요 없다.여기까지 했으면 oauth의 조사는 끝났다.여기까지 했으면 oauth의 조사는 끝냈습니다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/oAuth20181130.html</guid><pubDate>Fri, 30 Nov 2018 01:09:33 GMT</pubDate></item><item><title>[블로그 구축 10일 차] 소스 코드 보기 Grid 부착하기 highlight.js</title><link>http://www.nowonbun.com/Dialy/highlight20181128.html</link><description><![CDATA[댓글 기능 만들다가 갑자기 다른 방향으로 좀 튀었다. 앞으로 댓글 기능을 만들다가 포스팅을 하기 위해서는 소스 내용이 조금 첨부가 돼야 할 것 같아서 급히 오픈소스를 추가했다.소스 코드 보기 grid가 무엇이냐면 프로그램 개발업계에서 일하고 있는 사람들은 웹 게시판에 글을 작성하다가 보면 간혹 소스코드를 올릴 때가 있다. 근데 소스코드를 덩그러니 게시가 되면 가장 기본적인 코드 라인이던가 코드 색깔 등이 보이지 않는다. 간단히 말해, 우리가 쓰는 ide 툴처럼 소스가 보이지 않고 메모장에 작성한 것처럼 보인다. 그렇게 하면 게시한 사람도 소스가 지저분해 보이고 보는 사람도 한 번에 분석하기가 힘들다. 흔히들 가독성이 떨어진다고 이야기하는 것이다.그래서 오픈소스 중에 highlight.js가 있는 데 오픈 소스를 link를 하고 pre 태그 안에 소스를 작성해 놓으면 소스가 깔끔하게 보인다. 간단히 말해 아래와 같이 보이게 된다.딱 보기에도 보기 편해 보인다. 그럼 지금부터 제 블로그에 부착할 생각이다.highlight 홈페이지에 접속해서 사용법을 조사했다.https://highlightjs.org/usage/들어가 보니 내용이 엄청나게 심플하다. 그냥 pre 태그 안에 code 태그를 작성하고 넣으면 되는 구조다. 그러나 직접 결과 확인해 보니 내가 상상한 모습의 결과물이 아니다.내가 생각한 모습은 줄번호도 있고 좀 더 심플한 모습일 거라 생각했는데.. 그래서 다시 구글링하다가 어떤 고수가 highlight에 대해 포스팅을 해놓은 글이 있다.참조 - http://lerv.me/25그 글의 내용은 highlight는 줄번호를 지원하지 않는다고 한다. 예전에 내 기억으로는 되었던 거로 기억하는 데.. 다시 블로그를 자세히 읽어보니 누군가가 github 줄번호가 나오게끔 하여 놓았다고 한다. 그래서 github에 접속해서 확인해 봤다.https://github.com/wcoder/highlightjs-line-numbers.js/tree/master/src이번에는 줄번호가 나오긴 하는데... 나오기는 하는데... 또 내가 상상했던 그런 모습이 아니다.그래서 내가 직접 소스를 열고 확인해서 수정했다.

원래 타이틀 영역은 없었는데.. 제가 만들었습니다. 그리고 테두리도 심플하게 보라색으로 하고 번호와 소스간에 여백도 조금 넣었습니다.이제야 내가 원하는 스타일로 나왔다. 이제 이걸 써서 코드 게시를 해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/highlight20181128.html</guid><pubDate>Wed, 28 Nov 2018 23:20:06 GMT</pubDate></item><item><title>[블로그 구축 9일 차] 블로그 댓글 기능 추가 - 1 (요구분석)</title><link>http://www.nowonbun.com/Dialy/CommentSystem20181127.html</link><description><![CDATA[이제 블로그를 시작한 지 약 1주일 정도가 지났는데.. 아직 글이 어수선하다. 이번 블로그는 기술적인 내용은 생략하고 내가 프로그램 개발을 하면서 생기는 문제점과 고민을 적어서 공유하려고 했는데. 글솜씨던가 내용적인 면에서 아직 부족한 게 많다. 최근에는 블로그를 어떻게 만들어야 할까? 프로그램을 어떻게 개선해야 할까보다 글을 어떻게 써야 할까 하는 고민이 더 많은 것 같다. 아직 시작이기도 하니 시간이 지나면 조금 나아질까?이번 포스트부터는 블로그 댓글 기능을 달아볼 생각이다. 예전에 이야기했듯 내 블로그는 블로그 호스팅이나 웹호스팅에서 구축한 것이 아니다. 그러다 보니 동적 웹 시스템이 개발되지 않고 오로지 정적으로만 개발되는 형태이다.(정적 페이지라는 것은 html로 전개된 웹사이트입니다.) 그러나 포스트의 내용 같은 경우는 한번 작성만 하면 그다음부터는 수정할 내용이 거의 없으므로 정적으로만 해도 크게 힘들 것은 없는데, 문제는 댓글을 어떻게 처리할지 문제이다.댓글의 경우는 내가 작성하는 것이 아니고 내 블로그 글을 보는 불특정 유저가 글을 보고 밑에 코멘트를 작성하는 형태이다. 그러면 먼저 제일 필요한 것이 유저가 댓글을 작성할 수 있는 텍스트 박스가 우선 필요하다. 그리고 텍스트 박스에 글을 쓰고 저장하게 되면 그 내용을 받는 서버와 데이터베이스가 필요하다. 최종적으로 다시 저장된 내용을 해당 블로그 밑에 표시가 되어야한다.여기서 내가 구성하는 형태는 github 내에서는 데이터베이스가 없으므로 어떻게든 해결이 되지 않는다. 뭐 자바스크립트 내에서 github의 pull push가 가능하게 프로그래밍하면 가능하려나.. 가능하다고 하더라고 github 아이디를 가지고 있어야 하고 pull, push를 해서 모든 코멘트를 유저의 컴퓨터에 저장해야 하는 말도 안 되는 상황이 된다. 그럼 어떻게 해볼까 고민하던 중에 ajax로 데이터베이스가 있는 다른 웹 서버에서 하면 어떨까 생각해봤다. 형태는 php + mysql가 좋겠다.그럼 php + mysql의 형태로 호스팅하는 데를 찾아보니 무료로 호스팅을 제공하는 업체가 꽤 있다. 그중 내가 살펴본 무료 웹 호스팅은 우비라는 곳이다.무료로 제공하는 옵션은 다음과 같다.하드용량 100m - 나는 ajax가 가능한 페이지만 만들 생각이기 때문에 그렇게 많은 하드 용량은 필요없다.트래픽량 100m - 역시 json형태의 데이터만 주고받기 때문에 트래픽도 제약이 있어도 상관없다.mysql 무제한 제공 - 오... 이게 최고다.일일 히트 수 1만 - 이게 조금 걸리는 부분인데 1만 히트면 일단 1만 접속까지 제공하는 건데.. 아직은 1만은 꿈같은 이야기이니 그건 그때 가서 생각하는 게 낫겠다.웹 호스팅은 정해졌고 이제 어떻게 작성할 생각이냐면, 어차피 댓글 내용은 검색엔진에 걸리지 않아도 되는 영역이다. 그러니 꼭 정적으로 html에 넣을 필요 없이 동적으로 html를 작성해도 상관없다. 그럼 각 post 페이지에 ajax를 이용해서 위 댓글 사이트에 접속해서 url를 키로 댓글 데이터를 가져오면 된다. 그리고 가져온 댓글 데이터를 jquery의 append 함수를 이용해서 동적으로 생성되게 만든다. 아! 그리고 익명은 제한하고 구글의 oauth인증을 써서 로그인한 유저가 댓글을 작성할 수 있게 하면 된다.이렇게 하면 댓글 기능이 만들어질 수 있을 것 같다.우선! oauth 조사(아이디 키?)를 해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/CommentSystem20181127.html</guid><pubDate>Tue, 27 Nov 2018 23:04:36 GMT</pubDate></item><item><title>[블로그 구축 8일 차] 블로그 최적화 2 (Open graph)</title><link>http://www.nowonbun.com/Dialy/Opengraph20181126.html</link><description><![CDATA[나는 검색엔진에 필요한 매타태그를 블로그에 장착했다. 그러나 아직까진 갑자기 검색엔진에 상위 랭크되는 로또가 발생하진 않았다. 일단 블로그의 대표 url로 되는 사이트에 결정적인 글의 수가 매우 부족한 게 원인이라고 생각된다. 같은 대표 url(canonical 태그) 혹은 sitemap이나 rss에 적어도 글이 100개 정도 돼야 상위 랭크는 아니어도 조금씩 보이기 시작할 것이다. 내 경험상.. 예전에 tistory에서 운영할 때는 그랬던 거로 기억한다. 그렇다고 한 번에 포스트를 밀어 넣으면 스팸 사이트로 인식해 버리니 역시 시간이 많이 필요한 작업이다. 신문이나 뉴스사이트는 어떨까? 거기는 하루에도 수십 건의 기사가 올라오는데 검색엔진에 잘 검색되는 것 같은데.. 경험이 부족한 나는 아직 여러 테스트를 해봐야 알 것 같다.오늘은 이전과 같이 매타태그를 등록하는 건 같은데, 검색보다는 편의를 위한 매타태그를 작성할 생각이다. 일단은 이 부분도 검색과 관계가 전혀 없는 건 아니다. 사이트에 open graph가 등록되어있으면 웹 마스터로서는 사이트의 완성도가 높다고 판단하고 사이트 품질에도 점수가 꽤 올라간다.최근, it 접속 환경을 보면 예전 10년 전과 많이 다르게 모바일 사용이 많이 늘었다. 그리고 모바일을 통해 웹서핑하면서 좋은 글이 있으면 친한 친구나 지인에게 url 링크를 걸어서 알려주기도 한다.특히 카카오톡으로 url를 찍어서 보내면 링크 미리 보기 화면이 나오는데 이미지가 깨끗하게 나오는 때도 있는가 한편 이상한 이미지가 깨지거나 요약 글도 엉성하게 표시되는 때도 있다. 이것이 open graph를 설정했는지 안 했는지의 차이가 된다.나는 아직 open graph를 등록시키지 않아서 블로그의 미리 보기가 엉망으로 나오는 걸 확인할 수 있다.즉, open graph는 대표 이미지와 요약 글을 알려주는 태그이다. 먼저 open graph 태그가 무엇이 있는지 조사해 보았다.http://ogp.me/나는 open graph 태그를 전부 다 사용할 건 아니고, 필요한 것만 쓰면 될 것 같다.og:title - 표시될 제목이다.og:description - 요약내용이다.og:url - 대표 url이다.og:site_name - 키워드를 입력하는 것같다.og:type - 사이트 타입이다. 이 경우는 블로그라는 타입이 없으므로 article을 넣을 것이다.og:image - 미리 보기에 표시될 이미지이다.og:image:type - 이미지 타입이다.(예: image/jpeg)og:image:width - 이미지 너비 사이즈이다.og:image:height - 이미지 높이 사이즈이다.og:image:alt - 이미지 설명이다.그 외에도 많은 태그가 존재하는데 나는 더는 필요 없다.. 그리고 블로그에 태그를 설정했다.우와... 예상은 했지만 이렇게 깔끔하게 나오니깐 또 블로그가 성장한 느낌이 든다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/Opengraph20181126.html</guid><pubDate>Mon, 26 Nov 2018 23:01:54 GMT</pubDate></item><item><title>[블로그 구축 7일 차] 에디터 수정하기 (SummerNote Image 입력 태그 수정...)</title><link>http://www.nowonbun.com/Dialy/SummerNoteModified.html</link><description><![CDATA[이번에는 블로그를 작성하는 에디터를 수정할 생각이다. 이게 버그는 아니고 opensource 사양이 내가 현재 사용하는 블로그의 사양과 조금 차이가 있어서이다.아래의 이미지는 먼저 내가 사용하는 블로그 에디터이다.내가 사용하는 에디터는 summernote라는 에디터 오픈소스입니다.https://summernote.org/잠깐 summernote에 대해 소개를 하면, 많은 사람이 웹이라는 환경을 통해서 글을 작성하고 읽고 정보를 공유하는 데 많이 사용한다. 그냥 글을 작성하는 데는 웹 태그인 testarea를 많이 사용하지만, 글에 효과를 주기 위해서는 무언가 부족함이 있다. 그 글의 효과란 글자마다 폰트사이즈와 폰트를 달리할 수 있고, 사이즈를 변경할 수 있으며 링크를 달거나, 이미지까지 넣을 수 있는 에디트를 말한다. 흔히 리치 텍스트 박스 또는 wysiwyg 에디터라고도 이야기한다.인터넷이 찾아보면 많은 에디터 소스가 있다. 물론 가장 좋은 건 유료 에디터 소스가 가장 좋지만, 내가 유료를 쓸만할 정도의 여유는 없으니, 무료 오픈소스을 검색했다. 그렇게 무료 오픈소스를 찾던중 summernote 에디터가 가장 깔끔하고 괜찮게 보였다. 예전에는 fckeditor가 많이 사용했던 거로 기억하고 나도 그 에디터를 많이 사용했는데, 최근에는 업데이트도 없어서 흥미가 가지 않았다. 그에 반해 summernote는 최근까지 업데이트가 있고 꾸준히 버그 리포트등도 있으므로 사용하면서 문제점이 발생해도 대응할 수 있다.내가 인식하는 에디터의 문제점을 찾아보았다. 사실 문제점이나 버그가 아니고 내가 사용하는 사양에 대해 조금 버전 업을 하는 것이다.에디터를 살펴보면 이미지를 삽입할 수 있는 버튼이 있다. 이미지를 삽입하면 이미지 태그가 자동 생성된다.이미지 태그가 잘못되지는 않았는데.. 지금 블로그에서는 태그에 몇 가지 class가 추가가 되어야 한다.그럼 내가 해야 할 목표는 찾았고 어떻게 해야 할지 확인해 보았다. 먼저 min형태의 압축된 코드가 아닌 일반 소스를 다운 받아서 찾아 확인했다. summernote.js의 소스는 약 5000줄의 javascript이다. 뭐 그렇게 많은 소스는 아니지만, 우리가 img 태그하나 고치자고 4000줄 소스를 다 뒤지거나 디버깅을 할 수 없다.그렇다면 어떻게 인식하는 게 좋은지 생각해보았다. 모든 프로그램은 표준 코딩방식이 있고 디자인패턴이 있으므로 특이하게 작성할 리는 없다. 그렇다면 내가 이미지 버튼을 누르고 이미지를 누르면 이미지 태그가 생긴다는 것을 확인할 수 있다. 그럼 조금은 찾기 쉬운 방식으로는 이미지 버튼 클릭 이벤트를 찾아보는 게 빠르겠다고 판단했다.그냥 단순히 img로 해서 글자 열 검색을 해보았다. 그랬더니 이벤트 관리 함수가 한 번에 나왔다. 그리고 나는 image size를 넣는 부분을 제거하고 div를 생성하고 class를 넣었다.이번에도 크게 어려운 부분이 없어서 간단하게 수정할 수 있었다. 그래도 버그 수정과 다른 점은 내가 만든 소스가 아닌 오픈소스를 수정했다는 것이다. 사람들은 오픈소스나 표준소스를 수정하기 두려워하는 사람들이 많다. 물론 상용 중인 시스템 내의 오픈소스를 수정하는 것은 리스크가 매우 큰 일이다. 왜냐하면, 오픈소스를 사용하는 레퍼런스들은 대부분 테스트가 검증된 소스들이기 때문에 수정한다는 것은 많은 부분을 테스트해야 한다는 조건이 따른다.그러나 반대로 오픈소스라도 버그가 없다는 것을 100% 확신할 수 없으므로 표준 코딩방식과 디자인 패턴을 익혀서 많은 소스를 읽을 수 있는 능력을 더 훈련해야 겠다. 좀 더 어려운 문제가 생기면 좋겠다..그래야 조금 더 많은 것을 해볼 수 있지 않을까? 버그가 발생하면 안 되지만..]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/SummerNoteModified.html</guid><pubDate>Sun, 25 Nov 2018 23:19:03 GMT</pubDate></item><item><title>[블로그 구축 6일 차] 중간 버그 수정(IE 대응, Image, 매타태그 에러, 추가사항)</title><link>http://www.nowonbun.com/Dialy/04befa464ea84cb69ccd2706cdfdc425.html</link><description><![CDATA[원래는 블로그 최적화를 끝내고 나서 버그 수정을 하려고 했는데 너무 눈에 거슬리는 버그가 많아서 버그 수정을 먼저 했다.지금 파악한 버그 내용은 ie 브라우저에서 내 블로그를 접속했을 때다. 지금 블로그의 경우는 chrome을 주요 툴로 이용하고 있으므로 화면이 chrome에 최적화가 되어있다.chrome을 주요 툴로 이용하는 이유는 chrome 사용자가 예전보다 늘었기 때문이다. 여러 기사에서는 한국의 경우는 인증서 제도 때문에 아직 ie를 사용하는 경우도 많다고 한다.나는 ie는 주요 툴로 이용하기에는 너무 느리게 느끼고 firefox보다는 많이 사용하는 chrome을 선택했다.그러나 chrome을 최적화라고 생각한다고 해서 safari나 ie를 무시할 수 없으므로 중간중간 다른 브라우저도 확인하면서 디자인이 제대로 되나 확인해야 한다.그러다가 어제 ie에서 접속하던 중 밑의 최신 글 항목에서 chrome과 다른 형태의 디자인을 발견했다.원인은 bootstrap의 row class 때문인데. 이게 li 태그 안에서 chrome과 ie에서 동작하는 형태가 다르다... 일단 확인이 되었으니 수정했다.그다음은 image인데..현재 블로그 안에서 모든 image는 680 x 340의 형태로 고정이 되어있다. 모바일에서는 확대 축소가 pc보다는 쉬우므로 확대해서 보기 쉽지만, pc의 경우는 그게 쉽지가 않기 때문에 조금도 보기 쉽게 수정할 필요가 있었다.w3school 사이트에 가보니 bootstrap으로 된 예제 소스가 있다.https://www.w3schools.com/howto/howto_css_modal_images.asp이걸 그대로 쓰기에는 나와 환경이 다르므로 자바스크립트를 수정했다.위 이미지를 클릭해보면 이미지가 확대되어서 보이는 것을 확인할 수 있다.그리고 네이버 웹 마스터에서 메타테그가 에러가 나는 것을 확인했다.이게 내가 메타태그 사양을 잘 못 이해해서 발생한 에러이다. 내용은 제한 글자 수가 초과이다.나는 description 태그에 본문 내용을 전부 넣으면 좀 더 검색엔진에 좋을 것 같다는 생각이 들어서 입력한 것인데 오히려 에러가 발생했다.리스트에서는 컴파일러에서 정한 데이터를 넣었는데...수정내용은 포스트 태그에도 리스트와 같이 정한 데이터를 넣으면서 해결되었다.홈페이지는 수정은 완료했지만, 웹 마스터의 재등록은 아마 시간이 걸린다.블로그를 시작하고 첫 버그 수정이었다. 워낙 간단한 버그 수정이라 금방 해결했다. 아직은 개발진행에 순조롭다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/04befa464ea84cb69ccd2706cdfdc425.html</guid><pubDate>Sun, 25 Nov 2018 00:30:50 GMT</pubDate></item><item><title>[블로그 구축 5일 차] 블로그 최적화 1 (매타태그)</title><link>http://www.nowonbun.com/Dialy/c2a8d6de887a4f399d4797e5ca05ecf5.html</link><description><![CDATA[애널리틱스를 블로그에 설치했고 웹 마스터에도 블로그를 등록했다.아직 네이버와 다음에 사이트 등록은 하지 않았다. 사이트 등록은 웹 마스터와 다르게 그냥 "이런 사이트가 있습니다" 하는 등록이다. 그것은 포스트 내용이 조금 늘어난 후에 등록해도 늦지 않기 때문에 일단 우선순위를 조금 미룰 생각이다.이제 다음은 이제 구글이나 네이버에서 크롤링을 좀 더 정확하기 위해 웹사이트에 매타태그를 붙이는 것이다. 매타태그란 사이트의 내용을 요약하는 태그이다.잠깐 나는 크롤링이 어떻게 움직일까 생각해 봤다. 아마도 배치프로그램 같은 형태로 포털사이트에 등록된 사이트의 주소로 httpconnection이나 http 랜더링 엔진(예: gecko)를 통해 웹페이지를 수집하지 않을까 예상한다.이때 내가 블로그 태그를 전부 div태그를 이용해서 글을 작성하면 크롤링은 내 블로그 페이지에 작성된 글에 대해 어떤 정보를 가졌는지 파악하기 어려울 것이다.검색 최적화 내용에 따르면 우선 중요한 태그는 title과 article 그리고 h1~h6이다.title 태그는 브라우저의 창에도 표시되는 만큼 가장 중요하고 article은 기사의 내용 영역이라고 지정하는 것이고 부제목 역할을 하는 h1~h6이다. 그래야만 크롤링이 내 블로그를 스크래핑할 때 여기 영역은 포스팅 글이구나 또는 제목이 구나를 인식할 수 있다.그리고 나서 크롤링이 글들을 수집해서 분석까지 해주면 너무너무 좋겠지만, 현실적으로 세계에 퍼져있는 사이트가 엄청 많으므로 분석하기야 하겠지만, 시간이 오래 걸릴 것이다. 특히, 내 블로그 같은 경우는 이제 시작한 시기이기 때문에 우선순위가 매우 낮아서 분석하지 않을 가능성도 매우 크다. 다시 말해, 제 블로그가 매우 높은 트래픽을 유지하면 구글이나 네이버로서도 신경 쓰면서 분석을 해주겠지만, 지금 시점은 아니란 소리다.그래서 나는 크롤링이 좀 더 분석하기 쉽게 하기 위해 어느 정도 글 요약을 해줘야 한다.그 태그가 canonical, alternate, description, keyword, author, distribution, copyright, robots 태그이다.먼저 canonical은 대표 url 넣는 곳이다. 내 블로그만 보더라고 각 페이지마다 고유의 url 주소가 있다. 이렇게 각기 url이 있지만, 기본 호스트 주소가 있기 때문에 크롤링이 각기 다른 사이트로 인식하지는 않지만 그래도 명시를 해주면 빨리 인식을 할 수 있다.alternate의 경우는 rss나 sitemap의 링크 url 주소이다. 웹 마스터에 등록은 했지만 그래도 크롤링에게도 직접 알려주었다.description는 블로그의 본문 글의 요약 글이다. 이건 rss에서 썼던 description에 들어간 값이랑 같은 값을 넣었다.keyword는 검색엔진에서 좀 더 검색키워드로 캐치할 수 있게 하는 키워드 목록이다.author는 작성자태그이지만 나는 내 email 주소를 넣었다.distribution, copyright는 그렇게 중요하지는 않지만 일단 똑같이 email을 넣었다.robots는 크롤링의 허용태그인데.. 저는 무조건 all로 설정했다.이렇게 작성해 놓으면 크롤링이 내 블로그를 검색할 때 좀 더 정확하게 또 따로 분석이 없이 빠르게 검색엔진에 등록된다.실제는 어떨까요? 시간을 두고 하나하나 실험을 해봐야겠다.아직 방문자가 0이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/c2a8d6de887a4f399d4797e5ca05ecf5.html</guid><pubDate>Sat, 24 Nov 2018 00:46:01 GMT</pubDate></item><item><title>[블로그 구축 4일 차] 웹마스터 등록하기...(rss, sitemap)</title><link>http://www.nowonbun.com/Dialy/8b6c0fc7f7624c37a4e30d9e8e012230.html</link><description><![CDATA[앞에서 애널리틱스를 블로그에 붙였으니 이번에는 웹 마스터에 블로그를 등록할 생각이다. 애널리틱스는 방문객 접속 분석 툴이면 웹 마스터는 검색엔진에 내 사이트에 무슨 내용이 있다고 등록하는 것이다. 구글의 경우는 크롤링이라는 웹 수집기가 존재해서 따로 웹 마스터를 등록하지 않아도 시간이 지나면 검색엔진에 노출되고 검색된다. 그러나 그럴 경우 시간이 매우 많이 걸리기 때문에 나는 웹 마스터에 블로그를 등록할 생각이다. 그러면 크롤링이 좀 더 효과적으로 데이터를 수집하고 그 내용을 이용해서 검색엔진의 상단에 글을 올릴 수 있다.웹 마스터에 대해 구글 검색했다. 그 결과, 애널리틱스와 마찬가지로 많은 사이트들가 가장 많이 등록하는 웹 마스터는 구글이고 그다음이 네이버인 것 같다. 두 웹 마스터에 나는 sitemap과 rss를 등록할 생각이다. 먼저 sitemap을 살펴보면, sitemap은 내용의 정보보다는 사이트의 구조의 중심으로 되어있고 url, 중요도 등이 등록된 xml 문서이다.https://www.sitemaps.org/ko/protocol.htmlrss의 경우도 sitemap와 구조는 비슷하지만 sitemap보다는 조금 더 자세한 내용이 구성되어있다. 그 내용은 각 column에 description항목이 있고 각 사이트의 요약내용을 수집해 갈 수 있는 feed이다.https://validator.w3.org/feed/docs/rss2.html다시 sitemap과 ress 에대해 구글에서 검색해 보니 블로그 url를 입력하면 해당 블로그를 분석해서 sitemap과 rss를 자동으로 생성해주는 사이트도 있다. 그러나 나는 매일 글을 업데이트하는데 할 때마다 자동 생성 사이트에서 sitemap과 rss를 만드는 것이 시간이 더 걸리고 귀찮을 것같다. 나는 블로그 글을 github에 등록하기 위해서 html를 compile과 output을 해주는 배치프로그램이 있다. 그 배치프로그램에서 html를 생성할 때 rss와 sitemap도 같이 생성하게 하면 따로 sitemap과 rss를 자동 생성 사이트에서 생성하지 않아도 rss와 sitemap을 만들 수 있다.내 compile과 output을 해주는 배치 프로그램의 url주소는 다음과 같다.https://github.com/nowonbun/blogcompiler프로그램 구조를 간단히 살펴보면, entity 프레임워크로 데이터에스에서 데이터를 읽어드려서 html로 변환한다. 거기에 rss와 sitemap.xml형식에 맞게 파일 한두 개 추가하는 건 간단히 할 수 있다.프로그램 작성은 끝났고 이제 실제 github에 등록시키고 제대로 나오는지 확인해 봤다.sitemap - http://www.nowonbun.com/sitemap.xmlrss - http://www.nowonbun.com/rss이제 나는 이것을 가지고 구글과 네이버 웹 마스터에 등록까지 완료했다.웹 마스터라는 것은 rss를 등록한다고 바로 검색엔진에 상위 랭크되고 최적화가 이루어지는 건 아니다. 단지 크롤링이 작업하는 데 도움이 되는 것일 뿐.그러니 등록을 한다 해도 블로그 글들이 검색엔진에 보이기까지는 시간이 조금 걸리지 않을까..참고로 아직까지 검색엔진을 통한 방문객은 현재 0이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/8b6c0fc7f7624c37a4e30d9e8e012230.html</guid><pubDate>Fri, 23 Nov 2018 00:00:00 GMT</pubDate></item><item><title>한국어 맞춤법/문법 검사기</title><link>http://www.nowonbun.com/Favorites/speller20181122.html</link><description><![CDATA[오늘 소개할 사이트는 맞춤법 교정사이트이다.http://speller.cs.pusan.ac.kr/나는 문서를 작성할 때 또는 블로그 포스팅을 작성할 때 등등, 주위에서 글을 작성할 때가 매우 많은 것 같다. 그런 상황에서 내가 작성한 글을 다른 사람에게 확인을 받거나 맞춤법을 검사받기가 쉽지 않다. 특히 블로그에 글을 쓸 때도 맞춤법이 맞는지 확인받고 싶은데 누구에게 매일 확인 받기도 쉽지 않다. 특히 내가 작성한 글에 틀린 점을 찾기도 어렵고 다른 사람에게 부탁하자니 모두 바쁘기도 하고, 나는 블로그에 매일매일 글을 올려야 하는 상황인데 매일 누군가에게 검사를 받는 환경을 만들기가 어렵다.맞춤법은 글을 쓸 때 매우 중요하다고 생각한다. 이유는 나는 누군가의 글을 읽을 때 오타를 발견하면 그 오타 때문에 신경이 엄청나게 쓰이고 그런 오타가 몇 개 이상 발견되면 갑자기 글의 흥미가 확 떨어지기 때문이다. 그래서 나는 기본 중의 기본, 잘해야 본전인 것이 맞춤법이라고 생각한다.그래서 나는 맞춤법을 검사해주는 시스템이 있지 않을까 생각하다가 찾은 사이트가 여기이다. (이 사이트가 딱히 명칭이 없어서 여기라고 표현했다.)처음 여기 접속했을 때는 다른 사이트처럼 예쁜 디자인이나 광고 등은 전혀 없고 맞춤법 기능만 있는 사이트라는 점이 매우 인상적이었다. 나는 오히려 이런 사이트들이 기능에 더 충실하다고 생각하는 고정관념이 있다. 아래에는 부산대학교 인공지능 연구실과 함께 만든다고 쓰여있는 것을 보니, 내 생각에는 문자 인공지능과 관련된 시스템인 것 같다.여기를 찾기 전에 구글에서 맞춤법 검사의 키워드로 검색했었다. 그랬더니 많은 맞춤법 교정 사이트가 검색되었다.. 특히 인크루트 등에서 많이 제공한다. 내 생각에는 이력서 쓸 때 아무래도 맞춤법이 중요하니깐. 각기 장점은 있겠지만 타 사이트는 수정만 해주고 무엇이 틀린 지 정확한 해설이 없다. 그러나 여기는 왜 틀린 지 해설도 해주는 것이 매우 인상적이다. 국어 공부할 때도 도움이 될 것 같다.그러나 여기 사이트도 장점만 있는 것은 아니다. 단점이라고 생각하면 한 번에 많은 글을 검사를 못 하는것 같다. 최대 1000자 내외 정도. 그래서 긴 글을 검사할 때는 나누어서 검사해야 하는 불편함이 있다.맞춤법을 한번 검사해 보았다.검사를 하게 되면 왼쪽에는 교정대상이 있고 오른쪽에는 교정설명이 있다. 교정 내용이 비교적 잘 설명이 되어있어서 맞춤법 공부하는 데도 도움된다. 한글 맞춤법이라는 게 공부를 해도 해도 틀리는 게 맞춤법이니깐...이렇게 소개했는데 많은 사람이 이 사이트를 잘 활용했으면 좋겠다는 생각이 든다.]]></description><category>즐겨찾기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Favorites/speller20181122.html</guid><pubDate>Thu, 22 Nov 2018 22:29:42 GMT</pubDate></item><item><title>[블로그 구축 3일 차] 블로그 분석 툴(애널리틱스) 구성하기...</title><link>http://www.nowonbun.com/Dialy/analytics20181121.html</link><description><![CDATA[먼저 이 아무것도 없는 블로그에 내가 해야 할 일은 애널리틱스를 설치하는 것이다. 애널리틱스란 블로그에 얼마나 많은 접속자가 어디에서, 몇 시에, 어느 페이지를, 어떤 경로로 들어오는지 확인할 수 있고 분석을 해 주는 툴이다. 애널리틱스를 통해서 내 블로그에 주요 접속하는 유저는 어떤 사람이고 어떤 글에 많은 흥미를 보이는지 분석할 수 있다. 그것을 통해 관련 글을 더 보강하고 또 확장해서 그와 관련된 사람들과 소통도 할 수도 있고 더 많은 유저를 유입을 시킬 수 있다.정리하면 애널리틱스를 통해 블로그를 어떻게 홍보할 것인지 어떤 방향으로 가야 할 것인지 생각할 수 있게 도와주는 툴이리고 생각하면 된다. 나는 따로 블로그를 홍보할 생각은 없지만 적어도 어떻게 유입이 되는지 알아야 나중에 검색엔진의 상단에 어떻게 올릴지 작전을 짤 수 있다.그럼 애널리틱스를 제 블로그에 설치를 시작한다. 구글에서 검색해 보니 애널리틱스는 구글과 네이버 애널리틱스에 대한 내용이 많다. 그중 구글 애널리틱스가 가장 많이 사용하고, 그다음에는 네이버 애널리틱스가 사용되는 것같다.. 다음은 애널리틱스가 없나요? 제가 검색해 본 결과에는 나오지 않네요.그럼 구글 애널리틱스를 먼저 설치하기 위해서 먼저 구글에서 애널리틱스를 검색해서 로그인한다.그리고 블로그 사이트를 등록하면 애널리틱스에서 3~4줄짜리 코드를 준다.그 코드를 블로그 사이트 최상단에 넣으면 된다. head 태그 맡으로...두번째 네이버도 설치하겠다. 네이버 애널리틱스도 구글에서 검색한다. 먼저 사이트 등록을 하면 구글처럼 분석 스크립트를 준다.나는 이 분석 스크립트를 head 태그의 google 애널리틱스 밑에다가 넣었다.그럼 구글 애널리틱스와 네이버 구글 애널리틱스에 대해 살펴 보면, 구글의 경우는 실시간, 잠재고객, 그리고 모바일에 대한 접속 정보도 있다.내 생각인데, 구글의 경우는 너무 많은 정보가 있지 않나 생각된다. 오히려 정보가 너무 많아서 사용하기 어렵다는 느낌이 강하다. 예를 들면 메뉴 중에 벤치마킹이 있는데 이것은 무슨 의미일까? 정작 내가 필요한 오늘 접속자와 시간별, 기기별 등의 내용인데 그 정보들은 어디 있는지 모든 메뉴를 찍어봐야 알 수 있다. 다음은 네이버 애널리틱스를 살펴보겠다.내용 자체는 굉장히 심플하다. 구글에서 내가 찾기 힘들다는 부분도 확실히 찾기도 쉽고 편리하다.　그러나 이건 역으로 정보가 상당히 부족하다는 느낌이 든다. 아직은 나도 네이버 애널리틱스를 많이 사용해 보지 않아서 어떤 게 더 편하고 좋다라고 비교하기가 힘들다. 한 6개월 이상 사용해보고 기회 있을 때 리뷰를 해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/analytics20181121.html</guid><pubDate>Wed, 21 Nov 2018 22:43:11 GMT</pubDate></item><item><title>이미지 용량 줄이는 사이트 - tinypng.com</title><link>http://www.nowonbun.com/Favorites/tinypng.html</link><description><![CDATA[오늘 소개할 사이트는 이미지 용량 줄이는 사이트이다.https://tinypng.com/나는 블로그를 운영하니깐 이미지 활용이 매우 많다. 그러나 내 생각에는 꼭 블로그 운영뿐 아니라 회사 문서를 작성하거나 프로젝트 과제 작성 등을 할 때도 많은 사람이 이미지를 꽤 사용한다고 생각한다.그러나 그 이미지들이 고품질의 고화질로 사용하면 매우 좋지만, 웹사이트이니만큼 용량과 속도에도 생각을 안 할 수 없다. 꼭 웹사이트가 아니더라도 문서를 작성하는데 용량이 큰 이미지를 첨부시키면 파일 용량이 100메가 이상이 된다. 이런 용량이 큰 문서를 열면 로딩 시간이 느려지고 메일 보내기 등 많은 부분에 제약이 걸리게 된다. 단지 이미지 한두 개 때문에..내 생각에는 이미지 품질은 사진 전시회를 하지 않는 이상 고품질, 고화질 이미지가 필요 없다. 이미지의 활용은 문서 내용을 조금 더 정확하게 전달하거나 글만 있는 문서는 읽으면 질리기 쉬운데, 그런 문제를 해결하기 위해 이미지를 사용하는 경우가 많다.그래서 이번에 소개할 사이트는 tinypng이다. tinypng사이트는 이미지 파일의 용량을 줄여주는 사이트이다. 그러나 이미지 용량 줄이는 파일은 png, jpg만 취급한다. 만약 bmp 등 다른 이미지 파일이면 png나 jpg로 변환시켜야 한다.먼저 테스트해 볼 이미지를 준비하고 용량을 줄여보겠다.테스트할 이미지의 용량은 230kb 정도이다.테스트 결과 거의 50% 이상 줄어 둔다.재미로 이렇게 용량이 줄어든 파일을 계속 변환시켜보면 이미지 용량이 계속 줄어든다.이미지 용량을 계속 줄이다 보면 이미지 화질이 많이 떨어질 거로 생각했었는데 눈으로 보기에는 그렇게 차이는 없어 보인다.그러나 크게 용량이 줄어든 것은 첫 번째뿐이다. 두 번째부터는 그렇게 많이 줄어든다는 느낌이 없다. 내 생각에는 두 번째 이상은 할 필요가 없을 것 같다.]]></description><category>즐겨찾기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Favorites/tinypng.html</guid><pubDate>Tue, 20 Nov 2018 22:35:11 GMT</pubDate></item><item><title>[블로그 구축 2일 차] 블로그 구성에 대해...</title><link>http://www.nowonbun.com/Dialy/BlogStructure20181119.html</link><description><![CDATA[앞 포스팅에서 문제점을 파악하고 우선으로 해야 할 일을 정했다. 그러나 내가 앞으로 블로그 구축이라는 프로젝트를 하면서 느끼는 점을 공유하기 위해서는 먼저 이 시스템에 관해 설명할 필요가 있을 것 같다.이 블로그(www.nowonbun.com)를 운영하는 웹호스팅은 github(https://github.com/)에서 운영하고 있다. github의 원래의 목적은 웹호스팅이 아니고 소스 버전 관리 툴이다. 소스 버전 관리란 svn과 비슷한 건데.. 우리가 흔히 프로젝트 할 때 커밋 또는 업데이트하는 툴이다.그래서 원래의 목적은 소스 버전 관리인데 github.com은 html을 올리면 웹호스팅 기능까지 제공한다.그런데 나는 좋은 웹호스팅, 블로그 호스팅이 있음에도 github.com를 선택한 이유는 예전 tistory와는 다르게 해외 트래픽도 꽤 안정적으로 빠르기 때문이다. tistory가 일본에서 접속하면 꽤 느리다. 구글 웹 마스터는 사이트의 접속 속도도 체크하기 때문에 한국 구글의 검색엔진에는 무난하게 상위 랭크가 되지만 외국에서는 상위 랭크가 잘 되지 않는다. 즉, tistory에서 영어로 된 블로그를 만들어도 국내에서만 검색이 되고, 일본 구글이나 미국 구글에서는 검색되지 않을 확률이 높다. 네이버 블로그는 이유는 모르겠지만, 정책이 그런지 구글에서 검색이 잘 안 된다.나의 계획은 처음에는 한글로 된 블로그로 시작하지만, 나중에는 영어, 일본어로 만들 생각이 있으므로 github.com에 자리를 잡았다. 그렇지만 github.com는 다른 사람에게는 추천할 만한 호스팅 사이트는 아니다. 왜냐하면, 일단 github에서 블로그를 운영하기 위해서는 git에 대한 지식이 없으면 절대 사용할 수 없다. 보통 개발자들은 프로젝트를 하기 위해 소스 버전 관리가 사용하기 때문에 경력이 조금이라도 있으신 사람들은 git를 무난하게 익히고 사용할 수 있다. 그러나 프로그램을 모르는 초심자들은 git를 사용하려면 몹시 어려울 것이다. 그리고 또 그것에 관해 공부해야 할 게 많기도 하다.그리고 git의 웹 호스팅은 다른 블로그 호스팅처럼 디자인 테마나 템플릿을 제공하지 않는다. 그래서 여기서 블로그를 하기 위해서는 처음부터 만들어야 한다. 이 블로그 역시 디자인부터 제가 다 만든 것이다. 그래서 처음 구축을 위해서 한 달정도의 시간을 소비했다. 그리고 여기까지 하기 위해서는 프로그램을 잘 아는 사람도 크게 제약 없이 구축이 가능하다. 그러나 git에서 블로그를 운영하기 어려운 이유가 데이터베이스가 없다. 그리고 웹호스팅도 web api 스크립트로 이루어진 동적 페이지가 아닌 오로지 html 정적 페이지이다. 즉, 데이터를 html형태로 변환해주는 툴을 만들어야 한다. 그 모든 걸 감수해서 만들어야 하므로 추천하지 않는다.나는 이 블로그를 구축하기 위해 로컬에서 글을 쓸 수 있는 에디터를 만들었고, html로 변환하는 compile 배치프로그램을 만들었다.이런 불편함을 감수하고서라도 github를 사용하고 아래에 내가 만든 에디터와 compile 배치프로그램 소스가 있으니 참고해 봐도 좋다.여기까지가 제 블로그의 구성에 대한 간략한 설명이었습니다.이런 불편함을 감수하고서라도 github를 사용해야 한다면 아래에 제가 만든 에디터와 output하는 배치프로그램 소스가 있으니 한번 사용해 보세요.[blogeditor]https://github.com/nowonbun/blogeditor[blogcompiler]https://github.com/nowonbun/blogcompiler이제 블로그 구성에 대해 이해했으니, rss와 sitemap.xml을 살펴보고 작성해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/BlogStructure20181119.html</guid><pubDate>Mon, 19 Nov 2018 22:41:17 GMT</pubDate></item><item><title>[블로그 구축 1일 차] 현재 문제점 파악하기...</title><link>http://www.nowonbun.com/Dialy/BlogStart1.html</link><description><![CDATA[우선 일을 시작하면서 새로운 것을 만들 때는 그것을 왜 만드는지, 기존에 한 것을 수정할 때는 무슨 문제가 있어서 수정하는지를 파악하는 게 우선이라고 생각한다. 그래서 내가 가장 먼저 해야 할 일이라고 생각하는 것은 여기 블로그에 많은 방문객이 오고 오류도 없는 정상적인 블로그 사이트 버전을 만드는 것이 첫 번째 목표이다.먼저 여기 블로그의 플랫폼은 github라는 프로그램 소스 저장소에 html을 등록시켜 웹 호스팅으로 전환한 사이트이다. 이 시스템의 문제점은 웹서비스를 할 때 우리가 흔히 다루는 웹 애플리케이션 서버(was)가 아니라 단순 웹서버이다. 그러다 보니 동적 웹서비스를 구축할 수 없다. 그래서 이 시스템은 내 로컬 mysql에 포스트 내용을 editor 프로그램으로 글을 등록을 시키고 compile하는 프로그램으로 데이터를 가져와서 html을 생성한다. 그리고 생성된 html을 github에 커밋을 해서 운영하고 있다. 그렇게 사용하기 불편한 github 호스팅을 사용하는 이유는 트래픽 속도 때문이다. 현재 내가 알고 있는 플랫폼 중에는 google blog과 github가 가장 빠른 것 같다. 예전 티스토리에서 운영을 할 때 한국에서는 문제가 없었다. 티스토리가 국내에서는 빠르기 때문이다. 그러나 지금 내가 구상하고 있는 블로그는 한글뿐 아니라 일본어, 영어로도 작성할 계획이 있으므로 외국 트래픽도 신경을 안 쓸 수가 없다. 구글은 트래픽의 속도로도 검색순위를 평가하기 때문이다.그래서 github를 사용하기로 했는데 문제점은 보통 블로그 플랫폼에서 제공하는 기능이 github는 하나도 없다는 게 문제다. 그 뜻은 내가 일일히 다 설계해야 하고 화면 디자인해야 한다. 그중 가장 빨리해야 할 일은 구글과 네이버의 아날리틱스, 웹 마스터 등록, 댓글 기능 추가를 해야한다..그 중에서도 웹 마스터를 가장 먼저 해야 한다. 웹 마스터 등록을 하는 이유는 검색 포털 시스템에 제 블로그를 노출하기 위해서이다. 내가 고민해서 쓴 글들이 아무도 읽지 않는다면 의미가 없으니깐. 그래서 포털 사이트의 검색엔진에 등록을 시키는 작업이 웹 마스터 등록이다.먼저 대표적인 검색 포털 시스템인 구글의 경우는 sitemap.xml를 등록하면 웹 마스터에 등록된다. 그러나 네이버의 경우는　sitemap.xml과 rss를 제출해야 한다. 구글도 rss를 제출해도 되긴 하는데, rss에 대해서는 반영이 잘 안 하는 것 같은 느낌이 든다. 그리고 도움말에는 sitemap.xml을 제출하라고 설명되어 있으니 그대로 하는 게 좋을 것 같다.아날리틱스는 접속 현황을 분석할 수 있는 도구다. 이 도구도 구글과 네이버가 둘 다 존재합니다만 이상하게 서로 제출되는 데이터는 항상 다르다.왜 그랬는지 예전에 알고 있었는데 지금은 기억이 나질 않는다. 그래서 두 개를 등록시키면 서로간의 부족한 부분이 보안이 되었던 건 기억을 한다. 블로그가 다시 커지면 분석해봐야겠다.내가 왜 이 두 작업을 가장 먼저 하는가 하면, 2년전에 나는 일본 블로그를 운영한 적이 있다. 그때 초창기에 웹 마스터를 등록하지 않고 블로그를 운영했다. google blog여서 자동으로 될 줄 알았다. 그러나 2~3개월 운영을 한 후에 google blog여도 따로 등록을 해야하는 것을 알고 등록을 했었다.처음에 웹 마스터를 등록하지 않았는데 구글 크롤링이 어떻게 탐색한 것인지 모르겠지만, 구글 검색에 노출되기 시작했었다.　그러고 나서 웹 마스터에 등록해야겠다고 알아차렸을때 웹마스터에 sitemap.xml을 제출했었다. 그런데 갑자기 이전에 조금씩 노출되기 시작하던 검색 결과가 없어져 버렸다. 그것에 관해 이리저리 검색했는데도 명쾌한 답을 주는 곳도 없고..내 생각에는 검색엔진에 웹 사이트에 대한 검색 노출 데이터? 인텍스?가 따로 있는 거 같은데 웹 마스터를 등록해서인지 검색 데이터가 초기화되어 버린 느낌이 들었다. 어쨌든 검색엔진에서 블로그 노출이 조금씩 되던 것이 갑자기 되지 않다 보니 순간 흥미를 잃어버리고 그대로 포기해 버린 뼈아픈 기억이 있다.그래서! 이번에는 웹 마스터부터 등록해서 나중에 검색엔진에서 갑자기 빠져버리는 현상을 방지하기 위해 최우선의 작업으로 결정했다.이제 sitemmap.xml 구조를 살펴봐야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/BlogStart1.html</guid><pubDate>Mon, 12 Nov 2018 23:27:49 GMT</pubDate></item><item><title>블로그를 다시 시작하며...</title><link>http://www.nowonbun.com/index.html</link><description><![CDATA[나는 예전에 명월일지(http://nowonbun.tistory.com) 의 블로그로 활동했었다. 약 4년 만에 블로그를 다시 시작하는 것 같다. 처음 약 10년 전에 네이버에서 첫 블로그를 시작했고, 6년 전에는 티스토리로 옮기고 활동하다가 4년 전부터는 글을 거의 작성하지 않기 시작하며 활동을 접었다. 가끔 티스토리에 포스트 댓글이 달리거나 메일이 오면 답신을 했지만, 글을 올리는 게 없다 보니 접은게 맞다. 활동이 없다 보니 관리도 소홀해지고 디자인도 점점 엉망진창이 되면서 블로그도 망가지면서 현재에 이르게 되었다. 마음 같아서는 예전에 공들여서 만든 블로그를 다시 살리고 싶은데, 지금으로써는 어떻게 해야 할지 엄두가 나지 않는다. 그래서 고민한 결과, 우선 명월 일기라는 타이틀로 블로그를 다시 시작하고 예전의 블로그를 조금씩 조금씩 수정하면 어떨까 하는 생각으로 이 블로그를 시작하게 되었다.일기와 일지의 어감이 발음이 비슷하면서도 의미상으로 차이가 있다. 일기는 활동한 일에 대한 느낌과 감정을 작성하는 것이고 일지는 업무 등의 중요한 일을 좀 더 객관적으로 작성하는 것이지 않을까 싶다. 나의 생각이니 다를 수도 있다. 이렇게 생각해 보니 10년 전에 첫 블로그를 시작했을 때가 생각난다.원래 블로그를 시작하게 된 배경은 처음 사회생활에 시작할 때였다. 나름 대학교 전공으로 프로그래밍에 자신 있다고 생각했으나, 현실 실무에서는 대학에서 배우던 방식으로 흘러가지 않고 어떻게 보면 비효율적으로 그러나 매우 생산적인 형태로 프로젝트를 한다고 느끼게 되었다.그래서 실무 프로그래밍이던가 실무적인 프로젝트 등을 공부하려고 했으나 그런 부분은 따로 정리해 둔 책도 없고 들을 수 있는 것은 선배의 조언뿐인 현실에서, 내가 블로그로 정리해 보면 어떨까 하는 생각으로 시작했던 것 같다.그와 더불어 업계의 선후배들과 가능하면 많은 교류 하면서 빠르게 배우고 의견을 주고받고 싶다는 생각으로 시작했던 것 같다. 그러나 블로그라는 게 시작하게 되면 아무래도 방문 접속자 수를 신경 안 쓸 수가 없어지고, 그러다 보니 빠른 속도로 포스트 내용을 업데이트하다 보니 강좌 같은 내용으로 포스트를 채워 버렸다.나는 처음에는 원래 cs 개발자였다. 지금은 cs 개발보다는 웹 개발 비중이 월등히 높지만, 블로그를 운영하면서 웹이라는 것을 알게 되었고 그래서 웹 프로그래밍을 공부하고 나중에는 검색 최적화, http 규약 등 많은 것을 배우는 계기가 되었다. 지금 생각해보면 블로그를 통해 꼭 소통만이 아닌 개인적인 스킬 향상에도 많은 도움이 되었던 것 같다. 그러나 예전 블로그의 현재 상태를 보니 한숨만 나올 정도로 엉망진창이 되었다. 이번에는 블로그를 다시 시작한 만큼 끝까지 해볼 생각이다. 그 끝이 어디까지인가가 궁금하지만..그리고 블로그의 타이틀처럼, 일지가 아닌 일기의 형식으로 개발하면서 느끼는 고충과 고민을 적어서 많은 사람과 공감이 되는 블로그를 만들어 보고 싶다.이번 블로그 플랫폼은 github 플랫폼이다. 예전에는 티스토리였으나 티스토리는 한국 내에서는 트래픽 속도가 빠른데 외국에서는 매우 느린 단점이 있다. 그에 반해 github는 지역의 관계없이 매우 빠르다. 그러나 github는 사실 웹호스팅의 플랫폼이 아닌 프로그램 소스 관리 저장소이다. 웹호스팅은 옵션일 뿐이다. 그래서 github는 다른 플랫폼과 다르게 디자인 테마를 제공하거나 데이터베이스를 제공하지 않는다. 지금 보는 현재 디자인도 순수로 전부 제작했다. 그래서 아직 부족한 부분이 많이 보인다. 댓글 기능도 아직 개발 전이다. 이런 부족한 부분은 천천히 블로그를 운영해 가면서 채워나갈까 생각하고 있다.나의 개발 활동 무대는 일본이다. 내가 한국보다는 일본이 더 좋아서 여기에서 생활하는 건 아니고 어쩌다 보니 여기까지 흘러온 것 같다. 그러다 보니 보통사람과 조금 다른 경험도 많이 쌓이게 되었다. 예를 들면 일본에서 생활하다 보니 차별 아닌 차별을 당한 경험도 있고, 일본에 있는 한국계 회사에 다니면서 느끼는 고충들.. 그리고 외국 회사에 대한 문화 차이.. 생활하면서 느끼는 문화 차이 등등의 경험이 있다.나는 그런 경험들을 통해 한국에서 일본에 진출하려는 사람들, 또는 일본회사와 미국회사의 문화에 대해 궁금하신 사람들. 또 예전에 참 개발자에 대한 안 좋은 기사와 방송이 많아서 프로그램을 정말 좋아하는데 직업으로 망설이시는 사람들, 현업에 있으면서 앞으로 어떻게 해야 할까 하는 사람들과 경험을 공유하면서 많은 소통을 하고 싶다.아직은 블로그에 적응되지 못해서 글이 어수선하고 두서가 없다. 원래 글재주가 뛰어난 편은 아니었지만, 간만에 쓰다 보니 더 어수선한 것 같다. 어쨌든 앞으로 블로그를 어떻게 운영해 나갈지에 대해 또 많은 고민이 시작되겠지만, 열심히 해 볼 생각이다.]]></description><category>홈</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/index.html</guid><pubDate>Mon, 12 Nov 2018 21:17:52 GMT</pubDate></item></channel></rss>