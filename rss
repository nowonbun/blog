<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:taxo="http://purl.org/rss/1.0/modules/taxonomy/" xmlns:activity="http://activitystrea.ms/spec/1.0/" ><channel><title>명월의 개발 일기</title><link>http://www.nowonbun.com</link><description>어두운 밤길을 비추는 달빛처럼.. 어둡고 외로운 개발의 길을 걷는 이들의 밝은 달빛이 되길 바라는 개발자... 프로그램 개발 간의 고민, 문제점을 해결하는 방법 등의 노하우를 일기 형식으로 공유하는 블로그.</description><language>ko</language><pubDate>Mon, 24 Dec 2018 14:46:17 GMT</pubDate><generator>nowonbun blog editor</generator><managingEditor>nowonbun@gmail.com</managingEditor><webMaster>nowonbun@gmail.com</webMaster><item><title>[가계부 프로젝트 11일 차] 메뉴 만들기</title><link>http://www.nowonbun.com/Dialy/6e7786aceb3c4029a70982b83fe9734f.html</link><description><![CDATA[현재 구상하고 있는 메뉴 항목은 dashboard, 가계, 카테고리 그리고 admin 메뉴이다. 각 메뉴는 viewrole 체크를 해서 권한 별로 보일 것인지 안보일 것인지 결정하게 된다. 메뉴 항목은 로그인 항목을 제외한 모든 페이지에서 공통이므로 공통 클래스에서 만들기로 했다.initmenu 함수를 호출하게되면 메뉴를 만들게 되는 것이다. 먼저 메뉴를 마스터로 부터 불러와서 시퀀스 컬럼의 순서대로 나열하게 된다. 예를 들면 시퀀스가 1이면 가장 상단, 99면 가장 하단에 배치된다. 그리고 각 메뉴는 isviewrole함수를 통해 권한 체크를 한다. 먼저 메뉴에 role이 null이면 권한에 상관없이 보이게 되고 group롤이 속하게 되면 보인다. 또 유저별 권한 체크도 확인해서 개별 유저 권한이 있으면 메뉴가 보이게 된다.중간에 지역화(localization)를 통해 메뉴 name을 검색해서 user가 사용 언어에 따라 한글, 일본어, 영어로 표시된다. 이 데이터를 최종적으로 modelmap의 menu이름에 데이터를 넣었다. 현재 메뉴는 각 컨트롤의 시작하는 지점에 initmenu를 호출해서 선언한다.컨트롤 부분은 코딩이 완료가 되었다. 이제 view 부분의 html를 수정하겠다.메뉴의 부분은 main.html만 보이는게 아니고 전부 공통으로 보이는 부분이기 때문에 jsp파일도 나누어서 include를 통해 공통화하였다.공통화 된 소스에서는 컨트롤에서 넘겨준 modelmap의 menu이름으로 데이터를 받는다.메뉴를 만들고 최종 디버그를 통해 확인했다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/6e7786aceb3c4029a70982b83fe9734f.html</guid><pubDate>Mon, 24 Dec 2018 23:45:13 GMT</pubDate></item><item><title>[Centos 개발 서버 설치] Maria DB 설치하기</title><link>http://www.nowonbun.com/Dialy/af750c7dde634806afb0a834aff6afc1.html</link><description><![CDATA[아직 가계부가 개발 중이라 웹서버와 배포 툴은 아직 의미가 없으니 우선 데이터베이스를 설치했다. 오픈 소스 데이터베이스는 postgres, mysql 등 많이 있지만 그중 나는 mariadb를 선택했다. mariadb는 mysql하고 90% 비슷하다. 뭐 개발자가 같으니 비슷할 수밖에 없겠지만..예전에는 mysql이 무료로 배포되었었는데... 이게 oracle사에 흡수되었다. oracle에 흡수가 된 후, 현재도 무료이긴 한데 조건 무료가 되었다. 예를 들면 기업에서는 무료가 아닌 유료이고 무료로 쓰려면 mit 라이센스에 따라 무조건 공개해야 한다. 데이터베이스를 공개하는 것이 아니고 프로그램을 돈 받고 팔지 못한다는 뜻이다. 즉 무료 서비스가 되어야 한다는 뜻이다. 무료 서비스로 공개한다고 해도 불만은 없지만 강제적으로 라이센스 규약에 따라 공개 해야 하는 건 조금 꺼림칙하다. 그래서인지는 모르겠으나 mysql 개발자는 그런 자신의 이념과 다르다고 생각해서 인지 oracle를 나와 다시 만든 데이터베이스가 mariadb이다. 아무리 자기가 만들었다고 하지만 기술을 팔았는데.. 그걸 다시 나와서 만들어도 되는 건가?그래서 현재는 mariadb는 완전 무료이고 나는 이 데이터베이스를 사용할 생각이다.기본적으로 다운받아서 설치해도 되는데 그럼 나중에 update서비스 받기가 힘드니 yum으로 설치했다.설치가 완료되었으면 먼저 설정을 설정해야 한다. 설정 파일은 /etc/my.cnf에 있다.설정파일 설정을 완료하고 데이터베이스를 기동한다.그리고 mysql에 접속을 해서 root패스워드 설정과 유저를 추가했다.접속해서 mysql 데이터베이스의 user 테이블을 검색해 보면 현재 root 유저에 패스워드는 걸려있지 않다. 그 외의 유저는 없다. 먼저 root 패스워드를 설정했다.그리고 유저의 경우는 localhost만 접속이 가능하고 외부에서 접속이 가능한 유저를 추가할 것이다. 외부라고 해도 완전히 외부가 아닌 우리집 허브 안의 네트워크 환경, 즉 c-class 내부만 허용할 생각이다.다시 user 테이블을 접속해보니 유저가 추가가 되었다. 이제 유저까지 추가가 되었으니 방화벽을 오픈하고 실제 내 컴퓨터 sql 편집기에서도 접속이 되는지 확인이 되면 설치가 끝난다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/af750c7dde634806afb0a834aff6afc1.html</guid><pubDate>Sun, 23 Dec 2018 22:33:53 GMT</pubDate></item><item><title>[Centos 개발 서버 설치] Plex Media 서버 설치하기</title><link>http://www.nowonbun.com/Dialy/2ee6c45189ec4feaa7e1ef306500728f.html</link><description><![CDATA[다시 주말이 왔으므로 centos(리눅스) 삼바 설치에 이어 plex 설치를 계속했다. 내가 쓰는 내부 서버는 내부 파일 저장 서버나 웹프로그램(가계부) 등을 돌리는 것 이상으로 미디어 서버도 중요하다. 집에 있는 dvd는 lg전자 제품으로 lg smart shared이라는 프로그램으로 dlna 서버를 구축했다. 그래서 dvd를 구매할 필요 없이 인터넷으로 미디어를 다운로드만으로 각종 영화나 tv 예능 등을 텔레비전에서 볼 수 있었다.그러나 이 lg smart share 프로그램은 윈도우 프로그램이고 약 5년 넘게 사용은 했지만, 버그가 꽤 많아서 사용하기가 불편하다. 버그라고 하면 동영상 파일이 인식이 안 된다거나 서버가 갑자기 다운되는 버그가 있었다. 이번에 centos로 갈아타면서 미디어 서버도 바꿀 생각이다. 조사한 결과, plex 미디어 서버는 꽤 유명하고(그러나 나는 요번 검색으로 처음 알았다.) 커뮤니티도 제법 커서 이걸 설치하기로 했다.plex -https://www.plex.tv/ko/먼저 이 프로그램을 다운받기 전에 내 centos의 버전을 확인했다. 확인 결과, centos는 64비트이므로 wget을 이용해서 plex 64비트를 다운받았다.wget을 이용해서 64비트 plex를 다운 받았다.rpm 파일을 다운 받고 나서 yum을 이용해서 설치를 시작했다.설치가 완료되면 service start 명령어를 이용해서 프로그램을 실행시킨다.local이 아닌 곳에서 접속하기 위해서 방화벽을 열어줘야 한다.그러고 나서 관리자 페이지에 접속했다. 접속하면 로그인화면이 나오는데 나는 구글 아이디로 로그인했다.나는 집 밖에서는 접속할 필요가 없으므로 "집 밖에서도 미디어 접근 가능하도록 허용해주세요" 체크를 해제했다. 그리고 설정이 완료되면 먼저 계정 부분에 가서 바로 비밀번호부터 설정했다.라이브러리 항목을 가서 동영상을 모아둘 폴더를 설정했다. 폴더는 예전에 삼바로 설정해둔 폴더 밑에 plex라는 폴더를 만들어서 설정했다.이제 실제 동영상을 넣고 dvd에서 해당 dlna가 인식이 되는지 자막은 잘 나오는지 무료 툴이라서 한 10분 정도 보이고 구매하라고 메시지가 나오는지 확인했다.설정이 끝나고 tv에서 dlna 탐색이 이루어지지 않아서 한참을 헤매다가 포트도 열어야 한다는 글을 발견해서 방화벽 포트를 하나 더 열었다.참조 링크 - https://support.plex.tv/articles/201543147-what-network-ports-do-i-need-to-allow-through-my-firewall/실제 사용해 보니 예전에 썻던 lg smart share보다는 편의성은 조금 떨어졌다. lg smart share의 경우는 폴더 설정만으로 dvd에서 재생할 수 있었는데 plex의 경우는 라이브러리 설정도 필요하고 실제 화면에 접속할 경우 기능이 많아서 그런지 오히려 초심자가 사용하기에는 보기 어려웠다. 현재 자막도 확인을 해보니 smi 자막은 인식도 하지 않는 것 같았다. 자막이야 srt로 변환해 주는 곳이 많으니 크게 상관은 없지만..]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/2ee6c45189ec4feaa7e1ef306500728f.html</guid><pubDate>Sun, 23 Dec 2018 22:14:46 GMT</pubDate></item><item><title> [가계부 프로젝트 10일 차] 로그아웃 기능과 메뉴 설계</title><link>http://www.nowonbun.com/Dialy/05aeea7c3d2d414aa6d2a56e4a7a8b46.html</link><description><![CDATA[메인 화면이 만들어졌으니 화면 상단 오른쪽에 있는 버튼을 누르면 로그아웃 확인 팝업을 띄우고 확인이 되면 로그아웃하는 흐름으로 만들 생각이다.로그아웃의 흐름은 먼저 구글 api를 통해 구글 로그아웃을 하고 컨트롤러 호출해서 session을 초기화하면 된다.여기까지 로그인, 로그아웃 기능이 완료되었다.이제부터는 메뉴를 만들 생각이다. 메뉴를 만들기 전에 어떤 메뉴를 만들 것인지 구상을 해야 한다. 가장 먼저 생각나는 메뉴는 먼저 가계부를 입력해 넣을 가계 메뉴, 그리고 카테고리 설정을 할 카테고리 설정, 마지막으로 유저 권한설정과 유저관리를 할 관리 메뉴를 생각하고 있다.가계 메뉴는 수입, 지출, 저축 내용이 표시되는 메인 기능이다.카테고리 테이블이 두 개가 있다. 그 중 lowcategory 테이블은 마스터로 설정했지만, category는 유저가 입력하게 설정을 했다. 카테고리 메뉴에서는 그 category테이블에 데이터를 입력할 항목이다.관리 메뉴는 유저의 viewrole과 actionrole 설정을 하고, 유저의 그룹관리를 할 항목이다.그리고 마지막으로 다시 홈을 클릭을 했을 때 대쉬보드 메뉴가 보일 수 있는 대쉬보드 메뉴가 있다.먼저 메뉴를 동적으로 만들 생각하니 잠시 고민에 빠졌다. 데이터베이스에 메뉴의 정보를 넣을까? 아니면 하드 코딩으로 코드 상에서 제어를 할까이다. 역시 데이터베이스에 넣는 게 좋을 듯싶어서 테이블을 하나 더 추가했다.테이블 구성은 키, 메뉴 이름, 권한, 표시될 icon, 메뉴를 누르면 이동되는 페이지 url와 마지막으로 메뉴 순서로 구성했다. sql 쿼리로 테이블을 만들고 다시 jpa를 통한 model를 생성했다. viewrole의 경우 새로 reference가 추가되었는데, 그대로 생성하면 기존 내가 설정했던 부분이 없어진다. 그러면 또 모든 model 클래스에 영향이 가기 때문에 viewrole는 덮어쓰기를 하지 않고 수동으로 변수를 추가했다. 사실 테이블 명을 상관 안 하고 생성하면 테이블 추가할 때마다 그냥 덮어쓰면 되는데 테이블명 때문에 어쩔 수가 없다. 편의를 위해 테이블명 어미에 마스터와 트랜잭션을 구분하는 명명을 넣은 건데 작업이 더 힘들어진 느낌이다. 이 부분에 대해서는 어느 쪽이 더 효율적인지 고민해 봐야 겠다.그리고 dao 클래스도 추가했다. 메뉴 테이블은 마스터이기 때문에 다른 마스터 테이블처럼 masterdao를 상속받았다. 그리고 작성후에 factorydao에 마스터를 추가했다.테스트 클래스로 확인해 보니 예상 결과가 나왔다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/05aeea7c3d2d414aa6d2a56e4a7a8b46.html</guid><pubDate>Sat, 22 Dec 2018 01:24:20 GMT</pubDate></item><item><title>[가계부 프로젝트 9일 차] Bootstrap 화면 디자인과 설정.</title><link>http://www.nowonbun.com/Dialy/9b33bfad04354d189e291a00d9aada40.html</link><description><![CDATA[구글 oauth를 이용해 로그인하는 것과 filter부분에 로그인 체크 기능을 만들었다. filter는 나중에 role체크하는 부분을 추가해야 한다. 그 전에 화면이 만들어지고 메뉴를 만들어야 한다.화면 디자인의 경우는 사실 어떤 작업보다 시간이 가장 많이 걸리는 작업이다. html 태그 구성도 해야하고 css도 만들어야하고 동적으로 작동하는 화면의 경우는 사양에 맞게 javascript도 작성하기 때문이다. 10년 전만 해도 화면 디자인 부분은 시간이 정말 많이 걸리고 생각보다 깔끔하지 않아서 웹디자인을 전문적으로 하는 사람과 팀을 꾸려서 했었다. 요즘에는 어떤지 모르겠지만, 디자인 프레임워크가 나온 후론 그냥 프로그래머가 다 작업하는 경우도 많다. 나의 경우도 이제는 디자이너 없이 혼자서 개발한다. 내가 근무하는 곳도 ux디자이너는 있지만 웹디자이너는 없다. ux디자이너는 컨텐츠 배치 디자인을 하는 분야라 디자이너라고 하지는 않는다.가계부 프로젝트는 최근 가장 많이 사용되는 디자인 프레임워크인 bootstrap을 쓸 예정이다. bootstrap은 크롬에 최적화가 되어있는 디자인이다. 가끔 ie나 safari, opera로 확인하면 생각과 다른 디자인이 나오는 경우도 있다. 어떤 경우는 동작이 되지 않는 경우도 있다. 이럴 때는 그 브라우저에 맞게 수정하면 되겠다.최근 디자인 스타일은 material 스타일이 있다. material 스타일은 페이지에 있는 그리드와 팝업 등에 그림자를 주어서 depth를 나타내는 디자인이다. 아마도 google에서 material 디자인이 처음 시작되었다. google도 material 스타일이 적용되어있다. 사실 이 블로그도 material이 적용되어있다. bootstrap에도 4버전에 있는 material 스타일이다. bootstrap material의 pro버전은 유료이지만 share가 무료 버전이다. share라고 해서 기본기능만 있는 건 아니고 웬만한 고급디자인이 아닌 이상 사용하는 데는 괜찮다.그러나 최근 bootstrap + material 버전을 사용해서 프로그램을 많아 만들었는데 디자인이 뭉개지는 현상이 자주 일어난다. share버전이라서 그런가? 쉽게 사용하려고 bootstrap을 쓰고 깔끔하게 보이려 material를 추가했는데 버그 수정하는 시간이 많아지면서 디자인 프레임 워크를 쓰는 이유가 없어졌다.그래서 가계부는 material를 빼고 순수 bootstrap4로만 작성할 생각이다. bootstrap에는 많은 무료 템플릿이 있다. 그중 나는 가장 편하고 많이 사용하는 sb-amdin 테마로 만들 생각이다.https://blackrockdigital.github.io/startbootstrap-sb-admin/처음에 로그인된 후의 main화면에 기본 blank화면을 넣었다.먼저 상단에 있는 검색기능과 메일확인기능 알람기능은 필요가 없으므로 삭제했다. 왼쪽 메뉴는 모바일모드와 pc모드가 있다. 나는 모바일모드가 깔끔하게 보여 pc에서도 그냥 모바일 버전으로 보이게 수정했다.디자인이 끝났으니 라이브러리 링크를 전부 cdn으로 변경한다. cdn이란 웹페이지를 접속할 때 라이브러리를 해당 서버에서 접속하는 것이 아니고 다른 라이브러리를 가지고 있는 서버로부터 받는 것이다. 웹브 라우저에 한 서버에 동시에 열수있는 connection 스레드가 3~5개이다. 시스템이 크고 많은 라이브러리가 있는 경우는 이 css파일과 javascript를 다운받는 시간만 해도 무시 못 한다. 웹페이지에는 css도 있고 image도 있으므로 한 페이지를 열 때 많은 connection이 발생한다. 이때 javascript과 css는 다른 서버에서 다운받음으로 페이지가 열리는 시간을 조금이라도 단축시할 수 있다.https://www.jsdelivr.com/package/npm/startbootstrap-sb-adminsb-admin라이브러리 링크를에 접속하여 css와 javascript 링크를 설정했다.
가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/9b33bfad04354d189e291a00d9aada40.html</guid><pubDate>Thu, 20 Dec 2018 23:44:39 GMT</pubDate></item><item><title>[가계부 프로젝트 8일 차] Startup페이지와 로그인 페이지 만들기.</title><link>http://www.nowonbun.com/Dialy/29b6376cd9724bc68e601a9e705b70d4.html</link><description><![CDATA[프로그램이 처음 tomcat에 기동이 될 때 실행해야 하는 클래스들이 있다. 지금은 master테이블의 정보를 한 번에 읽어드려서 실제 유저로부터 request가 오면 master테이블을 읽을 필요 없이 참조할 생각이다. 만약 시스템 운영 중에 master테이블의 데이터가 바뀌면 reset이 되는 역할도 필요하다. 이 부분은 나중에 admin페이지에서 작성하도록 한다. startup 클래스는 spring구조를 따라가지 않고 순수 servlet 구조로 작성했다.startup클래스는 순수 servlet 구조로 작성하기 때문에 httpservlet 클래스를 상속받았다. 그리고 그 안에는 init함수를 만들고 web.xml에서 초기설정을 호출할 경우 init함수를 호출하게 된다. init함수에서는 factorydao의 master를 초기화하는 함수를 호출한다. 초기화 함수안에는 마스터를 검색해서 메모리에 마스터 데이터를 할당하는 역할을 수행하게 될 것이다. 스타트업을 시작하는 함수를 web.xml에 선언을 해주어야 한다.startup 함수가 실행가 되는지 아닌지는 디버깅으로 확인하는 수 밖에 없다. 그래서 init함수안에 sysout으로 "startup"이라고 출력했다.디버깅으로밖에 확인이 안 되지만 startup이 출력되고 그 위에 persistence접속을 한듯한 로그가 표시된다. 이로써 startup 설정은 완료되었다. 앞으로 마스터뿐 아니라 프로그램이 실행하기 전에 메모리상에 올려야 하는 데이터가 있으면 전부 init에다 추가하면 된다.여기까지 프로그램 개발을 위한 준비(?)가 끝났다고 할 수 있다. 준비라는 표현보다는 웹 프로그램에서 안 보이는 코어 부분가 완료되었다고 보면 된다. 이제부터는 화면을 만들고 그 화면을 처리하는 컨트롤 화면을 만들어야 한다. 그러기 위해서 로그인을 먼저 만들고 로그인이 되면 그 뒤에 hello world가 나오게끔 할 생각이다.로그인 화면의 경우는 이전에 사용하던 거 그대로 사용할 생각이다. 딱히 회원가입이 필요한 것도 아니고 google로그인을 통해 로그인이 되면 끝이다. 이건 이전 가계부와 사양이 같으므로 따로 만들 필요가 없다.이전 화면은 로그인 버튼도 없고 그냥 구글 로그인 버튼만 덩그러니 있다. 이 부분에 대해서는 구글이 로그인되어있는 상태라면 이 화면도 나오지 않고 바로 redirect할 생각이다. google 로그인이 되어 있지 않으면 구글 로그인 화면을 띄우면 된다. 이건 예전에 댓글 기능을 추가할 때와 비슷한 기능이다. 그냥 그 소스도 가져와서 잘 조합해서 만들었다.소스를 보면 브라우저에 구글이 로그인되어있으면 바로 form값에 id, email, name을 넣고 post submit을 한다. 로그인되어있지 않으면 아무 일도 일어나지 않고 바로 화면이 표시된다. 버튼은 만든 것이기 때문에 trigger를 통해 구글 버튼을 클릭하게 해서 로그인 화면이 나오게끔 하였다.실제로 로그인 컨트롤러를 확인해 보면 get방식은 index.jsp를 파싱해서 전의 로그인 화면이 나타난다. post 방식으로 오면 먼저 id, email, name이 null인지 체크를 한다. 이때 null이었을 때 다시 로그인 화면을 보내면 trigger로 포스트를 보낼 수가 있다. 이게 일어날 수 없는 일이지만 만약에 구글 페이지에서 로그인했을 때 그 셋에 하나가 null이 되면 그냥 403 권한에러를 보내는 게 무한루프에 빠지지 않는 것이다. 로그인 한 유저가 만약 데이터베이스에 저장되어있지 않는 유저라고 하면 user를 생성해서 insert를 했다. 그리고 최종적으로 id와 email이 다른 경우 마찬가지로 403 에러를 표시했다. 사실 셋에 하나가 null이거나 id와 email이 일치하지 않는 경우는 부정 login밖에 없으므로 그냥 에러를 내보냈다. 로그인이 완료되면 session에 user정보를 넣고 main 화면으로 redirect했다. redirect화면은 아직 작성 전이므로 hello world만 화면에 표시될 것이다.이제 login 페이지 이외의 모든 페이지는 로그인 체크를 해야 한다. 물론 각 컨트롤러 상단에 session체크를 하면 되지만 좀 더 세련되게 filter controller에 세션 체크를 했다.여기서 확인해 보면 passurl은 xml에 설정한 login화면 빼고는 모두 session체크를 한다. 만약 session체크이 null이라고 하면 최초 로그인 화면으로 redirect하도록 만들었다. 테이블을 보니 예상한 대로 user와 group map에 데이터가 들어가 있다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/29b6376cd9724bc68e601a9e705b70d4.html</guid><pubDate>Wed, 19 Dec 2018 23:16:16 GMT</pubDate></item><item><title>[가계부 프로젝트 7일 차] 프레임워크 설정하기 -3(ORM - DAO만들기)</title><link>http://www.nowonbun.com/Dialy/f4ded5e5104f42e58e3016b6ab455da1.html</link><description><![CDATA[jpa로 생성되는 부분은 데이터베이스 테이블의 형태에 맞는 entity클래스 뿐이다. 따로 jpa에서는 dao라던가 service등을 생성해 주지 않는다. 그래서 dao(database access object)를 만들어야 한다. jpa 사이트를 가면 dao를 만드는 방법에 대해 나와 있다. 예전에는 사이트의 가이드를 보고 만들었지만 이제는 나만의 dao 패턴이 생겼다. 그래서 그냥 사이트 참조없이 바로 만들었다.구조는 먼저 최상위 클래스 abstractdao와 그 밑에 masterdao와 transactiondao를 만든다. abstractdao는 데이터베이스 접속하는 "entitymanagerfactory"을 관리하고 데이터베이스 트랜잭션(테이블 트랜잭션이 아닌)을 관리하는 클래스이다. 그리고 masterdao는 마스터 테이블을 접속하는 오브젝트인데, master는 특성상 프로그램 내에서 오로지 select만 있기 때문에 모두 singleton + flyweight 패턴으로 관리할 생각이다. 그러나 관리자가 직접 데이터베이스를 insert하게 되면 프로그램에 적용되지 않기 때문에 클래스 초기화하는 옵션이 들어간다. transaction 테이블은 생각하기에 특별히 선언되는 함수는 없다. 그냥 masterdao와 구분하기 위한 클래스이다.그리고 factorydao를 만들어서 각 dao클래스를 관리할 생각이다. dao클래스들은 데이터베이스 정보와 커넥션 정보 이외에는 데이터가 없는 실행만 하는 클래스이다. 그래서 여러 번 new선언으로 할당할 필요없이 factorydao에서 처음 할당이 되면 list를 singleton화 시켜서 두 번 할당이 되지 않게 한다. 이렇게 하면 흔히 이야기하는 di의존성 패턴 형태로 구성이 된다.dao 구성은 완료되었으니 테스트 클래스 하나 만들어서 데이터를 가져오는지 확인했다.결과가 나왔다. 이제 controller에서는 factorydao를 통해 dao를 취득하면 singleton패턴과 flyweight패턴으로 인해 최초 한 번만 할당(new)가 되고 계속 같은 클래스를 사용할 수 있다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f4ded5e5104f42e58e3016b6ab455da1.html</guid><pubDate>Tue, 18 Dec 2018 23:43:49 GMT</pubDate></item><item><title>[가계부 프로젝트 6일차] 프레임워크 설정하기 -2(ORM - JPA설정)</title><link>http://www.nowonbun.com/Dialy/49d601fe0e4f47d4aa239d54b4fdfba3.html</link><description><![CDATA[프레임워크 설정이 완료되었다.이제부터는 본격적으로 프로그램과 데이터베이스 연결작업을 해야 한다.한 10년 전 만에 해도 orm 프레임워크가 없었다. 아니 없다기 보다는 많이 사용하는 프레임워크는 아니었다. orm 프레임워크란 데이터베이스의 구조적 개념을 oop의 클래스 개념으로 바꾸는 프레임워크다. 예전엔 이런 프레임워크를 실무 개발하면서 써본 기억이 없다. 보통 프로그램과 데이터 베이스를 연결해서 사용한다면 코드상에서 쿼리를 작성해 그 결과를 웹페이지에 보여주는 형태였다. 그 때 경험이 짧아서 몰랐을 수도 있겠지만, 주위에서도 그런 형식으로 개발하는 경우도 보지 못했다.최근에는 이 orm 프레임워크가 많이 발전하면서 이제는 orm이 없으면 이제는 개발이 어색할 정도이다. 왜냐하면 예전에는 객체 하나를 생성하고 다시 데이터베이스에 입력하기 위해서 데이터를 insert문으로 바꿔야만 했다. 그 것 자체만으로 코딩이 길어지고 힘들었는데 혹시라도 데이터베이스 구조가 바뀌면 관련된 쿼리를 다 수정해야 하는 작업도 있었다. 물론 디자인 패턴 적용을 잘하면 이 수정을 최소화로 할 수 있지만 그래도 관련된 쿼리문을 전부 수정해야 하는 건 변함이 없었다. orm 프레임워크를 사용하면 데이터베이스가 구조가 수정되어도 orm 매핑 클래스만 수정하면 프로그램 전체가 적용된다. 그렇기 때문에 시스템이 커져도 프로젝트 관리가 편해진다.orm 프레임워크는 java는 jpa 프레임워크가 있다. jpa 프레임워크는 hibernate가 발전해서 표준이 되었다. c#의 경우는 entity framework가 있다. 그 둘은 대표적인 프레임워크이고 다른 프레임워크로는 자바는 seasar(doma)가 있고 c#은 hibernater와 seasor(doma)가 있다. 각기 orm은 서로간의 장단점이 있지만 jpa(hibernate)가 가장 편하고 쉬운 것 같다.먼저 java에서 orm을 쓰기 위해서 mavan pom.xml에 jpa 관련 라이브러리를 링크시켜야 한다.그리고 이클립스 개발환경에서 사용하기 위해서는 jpa모드로 변경해야 한다.jpa모드을 변경하면 persistence.xml이 생성이 되는 데 여기에는 데이터베이스 정보를 넣는다. 그리고 generate하면 이클립스에서 데이터베이스부터 table를 읽어드리면 자동으로 테이블별 클래스가 생성된다.설계한 테이블을 보면 테이블명 어미에 마스터는 mst, 트랜젝션은 tsn를 붙였다. 그게 자동으로 생성하면 그대로 클래스 명으로 만들어진다. 이렇게 사용하면 프로그램 내에서 클래스명이 예쁘지 않기 때문에 클래스 명을 변환해서 생성해야 한다.이제 클래스를 생성했다. 다시 클래스 내용을 보면 reference가 연결되어 있는 변수가 테이블 명에 따라 mst혹은 tsn가 붙어있는 걸 확인할 수 있다. 이것 또한 예쁘지 않기 때문에 수동으로 수정해야 한다. jpa 프레임워크가 자동으로 클래스를 선언하고 변수명까지 자동으로 만들어 주는데 제약조건은 제대로 안 걸려 있다. c#의 entity의 경우는 자동으로 제약조건까지 깔끔하게 생성이 되는데 jpa는 조금 부족한 느낌이 많다.그래서 먼저 수정해야 할 것은 트랜잭션 테이블의 auto_increment이다. 예전에 이게 자동으로 선언되지 않아서 insert 할 때마다 오류가 난적이 있었다. 이 것 때문에 하루종일 왜 insert가 안될까 헤맸었다. 지금은 선언해야 한다는 걸 알고 있지만, 기본적인 이런 제약조건도 제대로 생성이 안되는 게 이해가 안된다.트랜잭션 파일은 user와 category, payment 테이블이 있는데 user의 경우는 id를 키로 하기 때문에 auto_increment가 필요없다. category, payment 클래스의 경우는 필요하니 "@generatedvalue(strategy = generationtype.identity)" 어노테이션을 추가했다.이렇게 추가하고 아래의 조건에 따라 reference 옵션을 추가한다.1. many many =&gt; fetch = fetchtype.lazy1.1 join table이 있는 컬럼은 map에만 데이터를 넣을 것이므로 cascade = cascadetype.all를 넣지 않는다.1.2 join table이 없는 테이블은 거의 마스터 데이터이므로 cascade = cascadetype.all를 넣는다.2. one many =&gt; cascade = cascadetype.all, fetch = fetchtype.lazy3. many one =&gt; fetch = fetchtype.lazy기본적으로 "fetch = fetchtype.lazy"는 동시 검색을 하지 않는 것이다. 예를 들면 마스터 low_category를 검색했을 경우, 하위 클래스들의 데이터를 검색할 때 select를 해서 넣는 것이 아니고 다시 list를 호출할 때 select를 하는 형식이다. 필요에 따라서는 검색과 동시에 join을 해서 검색할 수 있지만 (fetchtype.eager), 그렇게 할 경우 최상위 마스터를 검색할 때 모든 테이블의 데이터를 검색하므로 매우 느려진다. 그걸 피하기 위한 것이다. 그리고 cascade의 경우는 n:n또는 1:n은 있는데 n:1은 넣지 않았다. 왜냐하면 n:1의 경우는 n이 마스터인 경우가 많으므로 마스터에 데이터가 insert되면 안 된다. 반대의 경우는 트랜잭션이 때문에 생성옵션을 넣었다. n:n은 마스트의 반대 경우는 casecade를 넣지 않고, 트랜젝션 반대 테이블은 생성옵션이 있어야 한다.jpa를 c# entity 프레임워크와 비교하면 무언가 부족한 느낌이 많다. c# entity 프레임워크는 이렇게 클래스 생성을 하면 제약조건까지 깔끔하게 다 만들어진다. 물론 테이블명과 변수명은 변경을 해야 하지만 제약조건은 깔끔하게 나온다. 그러나 java의 경우는 모델 클래스를 생성해도 하나하나 확인해야 한다. 이게 jpa의 단점일 수도 있지만, 그렇지는 않다. entity 프레임워크는 자동으로 다 만들어주는 대신 이미 만들어진 entity에 대해 수정이 까다롭다. 그런 걸로 보면 java의 경우는 그냥 사용하라는 뜻이 아니고 기본적인 것은 생성하고 나머지 20%는 사용하는 유저가 채워 넣는 구조이다. 이렇게 보면 또 hibernate가 장점이 될 수 있다. orm은 나도 아직 개념이나 이런 특성에 대해선 왜 그런지 모르는 부분이 많다.가계부 프로젝트 github -https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/49d601fe0e4f47d4aa239d54b4fdfba3.html</guid><pubDate>Mon, 17 Dec 2018 23:42:50 GMT</pubDate></item><item><title>[가계부 프로젝트 5일 차] 프레임워크 설정하기 -1(Spring)</title><link>http://www.nowonbun.com/Dialy/1cb972bac45f49e8ad95a702a5036541.html</link><description><![CDATA[본격적으로 프로그램 코딩하기 전에 사전 준비로 프레임워크를 구성해야 한다.java에서는 여러 가지 프레임워크와 개념이 있다. 그 중 최근에는 spring 프레임워크를 많이 쓴다. 각 프레임워크 특징을 여기서 다 설명하기는 힘들지만 spring 가장 대표적인 특징은 di(dependency injection)이라는 의존성 주입이라고 생각한다. 이 의존성 주입이라는 개념은 프로그램 설계할 때 객체 생성,관리가 가장 편하고 이해하기 쉽다.di 의존성이란 객체 할당(new)을 개발자가 하는게 아니라 프레임워크 쪽에서 할당해서 컨트롤러에서 사용하는 것이다. 사실 di 의존성이라는 게 내 생각이지만 singleton pattern의 상속이 안 되는 문제를 보완한 것이라고 생각한다. 나도 무분별하게 객체 할당(new)를 좋아하지 않으므로 이 di 의존성의 개념은 나쁘지 않다.그러나 직접 spring 소스을 분석해 보지는 않았지만 느낌은 reflection 개념과 디자인 패턴의 flyweight pattern를 결합해 놓은 듯하다. reflection 개념은 클래스 할당을 동적으로 할 수 있는 방식이다. 개념으로는 매우 편해보이지만 사실 이게 꽤 느리고 가독성이 매우 떨어진다. singleton 패턴은 사용하는 목적은 같은 객체를 여러 번 선언하지 않고 static으로 한번 할당으로 계속 재 사용하는 패턴인데 전체적인 성능향상을 위한 것이다. 그러나 di 의존성은 refection을 통해 singleton의 상속이 안되는 단점을 보완하였지만 reflection으로 성능을 떨어트리는....이게 뭔지... spring이 di의존성 개념만 있는 것은 아니지만... 특별히 성능향상에 매우 좋은 프레임워크라고는 말하기는 어렵다.이런 이유로 평소에는 java servlet 환경에서 사양에 맞게 필요한부분은 di개념으로 할당하고 singleton 패턴으로 사용할 부분은 singleton 패턴으로 유연하게 만드는 방식을 사용한다.그러나 가계부 프로젝트는 복잡한 사양의 시스템도 아니고 빠르게 만들고 끝내고 싶기 때문에 그냥 spring 프레임워크을 사용했다. 먼저 spring 프레임워크을 사용하기 위해 maven의 pom.xml에서 dependency를 추가하여 라이브러리를 연결했다.그리고 web.xml에서 spring사양에 맞게 url에 대한 호출 클래스를 파싱한다.*.html 형태로 오면 main클래스로 *.ajax 형태로 오면 ajax 클래스를 호출하게끔 router를 만들었다. 그리고 나중에 세션 체크를 위한 공통 filter　체크로 매핑시켜놓았다. 그밖에 기본 페이지인 index.html 지정과 encoding 설정했다.이건 *.html로 호출이 왔을 경우 라우팅 되는 설정파일이다. *.html로 호출하고 string으로 return을 하면 해당 jsp를 읽어드려 데이터값을 매핑시킨다.이건 *.ajax를 호출하면 라우팅되는 설정파일이다. ajax는 json형태로 리턴을 할 예정이기 때문에 매핑시킬 jsp 파일은 필요없다.우선 개발의 시작을 알리는 hello world를 출력하기 위해 기본적인 구성만 하고 디버깅했다.디버깅이 되고 브라우저를 실행시키면 화면에 hello world가 나온다. 이렇게 기본적은 프레임 워크 설정은 끝났다.
가계부 프로젝트 github - https://github.com/nowonbun/privatefinence]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/1cb972bac45f49e8ad95a702a5036541.html</guid><pubDate>Mon, 17 Dec 2018 23:27:16 GMT</pubDate></item><item><title>[Cenos 개발 서버 설치] 삼바(Samba) 설치하기</title><link>http://www.nowonbun.com/Dialy/bc17c18a6f714544b1058062a255c7f8.html</link><description><![CDATA[삼바라는 뜻은 춤의 이름이 아니고 it에서는 네트워크드라이브 프로그램 이름을 뜻한다. 원래 정식 명칭이 삼바 프로토콜 네트워크(smb://) 프로그램이다. 이게 처음에는 프린터 공유를 목적으로 만든 프로토콜 프로그램이라고 기억한다. 그러나 이제는 많은 업무환경에서 파일 공유 서버로 사용하고 있다. 삼바는 같은 c클래스(xxx.xxx.xxx.1 ~ xxx.xxx.xxx.255) ip 내부 또는 가상(vpn) 네트워크환경에서 접속을 편하게 하기 위한 목적이 있다. 그러나 보안이 조금 약하고 내부 네트워크가 아닌 외부에서의 접근 설정이 꽤 어렵다. 외부에서 접근이 어려운 것은 삼바의 설정이기보다는 os에서 외부 접근을 차단시켰다.그럼 개발 환경으로 설치한 centos에 파일을 업로드, 다운로드하기 위해 삼바 프로그램을 설치하겠다.그 전에 삼바를 설치하기 전에 사전 준비작업이 있다. centos는 프로그램을 설치하기 편하게 yum이라는 프로그램이 있다. 리눅스는 프로그램 설치 제거가 window에 비교하면 꽤 어렵다. 기본적으로 소스를 컴파일도 해야 하고 설정도 기본설정으로 되지 않는 경우도 많다. 그러나 centos는 아이폰 os의 ios처럼 app store 같은 프로그램들을 링크해 놓은 곳이 있다. 우리는 거기에 접속해서 프로그램을 내려받으면 간단하게 프로그램 설치, 삭제 그리고 업데이트를 간단하게 할 수 있다. 그떄 프로그램을 관리해 주는 프로그램이 yum이다.yum은 centos 초기설정 그대로 사용할 수 있다. 그렇지만 나는 설정을 조금 바꿨다. 바꿨다 라기 보다는 그냥 예전에 사용하던 링크와 dns 설정을 수정했다. 먼저 도메인 서버 설정을 바꿨다. 도메인 서버 설정 파일은 "/etc/resolv.conf" 에 있다. 거기서 보면 원래 centos의 기본 dns 설정이 있는데 나는 그걸 구글 dns로 바꿨다. 구글 도메인 서버는 8.8.8.8이다. 왜냐하면 내가 생각하기 구글 dns가 가장 많은 도메인을 포워딩하지 않을까 하는 개인적인 생각에서이다.그러고 나서 yum의 설정 베이스를 변경했다. 설정 베이스를 바꾼다는 것은 아까 이야기한 app store의 링크 주소를 바꿨다라는 의미이다. yum의 설정파일은 "/etc/yum.repos.d/centos-base.repo" 에 있다. 여기에 보면 초반 설정은 mirrorlist로 설정이 되어있다. 나는 baseurl로 바꾸고 mirror.centos.org를 전부 "mirror.kakao.com"으로 바꿨다. mirror.centos.org를 사용하지 않고 mirror.kakao.com로 바꾼 이유는 요즘은 어디든 빠르고 상관없을 것 같다. 그러나 예전에는 mirror.centos.org가 상당히 느렸던 걸로 기억한다. 지금은 세계 어디도 빠르지만 예전만 해도 한국 서버가 가장 빠르다고 생각해서이다. 그래서 지금은 설정을 바꾸지 않아도 잘될 것 같지만 그래도 예전에 내가 자주 사용해서 검증된 설정대로 할 생각이다.이게 잘 되었는지 확인하기 위해서는 vim을 설치해 보면 안다. 명령어는 "yum install vim"이다.vim을 설치하니 reference 프로그램이 저렇게 많다. vim이 뭐라고.. 어쨌든 이게 설치가 잘되면 yum 설정이 잘 된 것이다. 이제 원래 목적은 vim 설치가 아니므로 samba를 설치를 시작한다.samba 프로그램이라고 어렵게 설치하는 것은 아니고 그냥 "yum install samba"면 끝이다. 다만 설정이 조금 필요하다.yum을 통해 samba 설치는 끝났다. 이제 설정을 해야 하는데 먼저 samba에 접속하기 위한 방화벽 포트를 풀어야 한다. 먼저 방화벽의 설정을 확인한다.확인해 보니 역시 설치만으로는 방화벽설정을 해주진 않는다. 어떻게 보면 이렇게 하나하나 설정을 해야 하는 점이 리눅스의 장점인데 또 어떻게 보면 귀찮다. 설치하고 방화벽설정을 일일이 해줘야 한다.그리고 삼바 설정파일을 설정했다.처음에는 기본설정들이 있는데 다 필요 없어서 지웠다. 수정한 부분은 workgroup이고 추가한 부분은 shared 세션 부분이다. workgroup은 내가 윈도우환경에서 접속을 할 것이니 윈도우의 기본 group인 workgroup으로 설정했다. shared는 내가 삼바로 접속해서 파일을 업로드할 디렉터리 위치와 권한 설정이다. 그리고 삼바를 기동했다. (명령어: systemctl start smb)그리고 재부팅을 하면 접속하는 데 에러가 없다. 여기까지 삼바 서버를 설치했다. 사실 linux에서 삼바 서버 설치만 잘해도 50% 산은 넘은 거다. 자주 사용하는 프로그램은 yum을 사용해서 설치하고 그렇지 않은 것은 삼바를 통해서 복사한다음에 서버 내에서 설치하면 되기 때문이다. 다음은 lg smartshare의 dlna서버를 대신할 미디어 서버를 조사하고 설치할 예정이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/bc17c18a6f714544b1058062a255c7f8.html</guid><pubDate>Mon, 17 Dec 2018 01:50:37 GMT</pubDate></item><item><title>[Cenos 개발 서버 설치] Centos 설치하기.</title><link>http://www.nowonbun.com/Dialy/eb99142190b5471fbd44b75251fec78b.html</link><description><![CDATA[가계부 데이터베이스 설계까지 진행하다가 주말이기도 해서 먼저 centos 서버를 구성하기로 했다. 평일에는 좀처럼 시간이 나지 않아 서버를 설치할 만큼 시간을 만들기가 어렵다. 원래 내 계획은 집에서 쓰는 서버를 올해 안으로 window 서버에서 centos로 갈아타는 것이다. 그렇기 때문에 c#으로 되어있던 가계부 프로그램도 java로 다시 개발하는 것이다. 먼저 서버를 centos로 바꾸기 전에 centos의 개발환경을 만들고 본 서버의 os를 바꾸기로 생각했다. 나도 리눅스를 다룬지도 시간이 오래되어서 window서버에서 centos로 이전하는 연습이 필요하다.나는 집에서 내부 서버로 쓰는 pc와 로컬로 사용하는 pc가 있지만 사용하지 않는 pc만 집에 한 3대 정도 더 있다. 데스크 톱도 있고 노트북도 있는데 이게 전부 고 사양은 아니고 겨우 부팅될 정도의 저 사양이다. 그래서 사용하지 않고 있다. 그중 하나를 포멧하고 개발환경을 만들어 볼 생각이다. 개발환경이란 실제로 내가 사용하는 서버는 아니고 실제 서버에 사용할 프로그램 install이던가 프로그램의 업데이트를 적용하기 전에 테스트하기 위한 서버이다. 그러니 내가 원래 window서버에서 centos로 바꾸기 전에 mysql과 tomcat 등을 설치해서 가계부 프로그램을 사전 적용해보는 서버이다. 또 내가 서버를 이전할 때 dlna서버와 데이터 서버에 대해서도 미리 설치해 보고 확인해 볼 생각이다.먼저 centos를 설치하기 전에 iso 이미지를 내려받아야 하므로 centos 홈페이지로 접속했다.링크: http://isoredirect.centos.org/centos/7/isos/x86_64/centos-7-x86_64-dvd-1810.iso여기서 나는 iso를 다운받고 usb로 iso 복사했다. iso 복사라는 것은 usb로 부팅해서 os를 설치하는 부팅 usb를 만드는 것이다. 구글에서 iso 복사하는 방법을 검색해 보니 'win32diskimager' 라는 프리웨어 프로그램을 이용하여 만들면 된다고 하였다.출처: https://suwoni-codelab.com/linux/2017/05/22/linux-centos-installusb/win32diskimager: http://sourceforge.net/projects/win32diskimager/그래서 'win32diskimager' 라는 프로그램도 다운받고 usb로 부팅 usb를 만든 다음 개발 서버로 만들 pc에 centos를 설치했다.
centos를 설치하는데 총 20분 정도가 소요된 것 같다. 컴퓨터가 느려서 centos 설치하는데도 시간이 오래 걸렸다. 그냥 pc에 usb를 꼽고 usb 부팅을 한 다음, 그냥 모든 걸 기본설정으로 ok,ok만 하고 설치했다. 마지막으로 root 비밀번호는 내가 자주 사용하는 비밀번호로 설정해서 설치했다.설치가 끝나고 teraterm이라는 ssh 접속 단말기로 개발 서버에 접속한 다음 설치가 잘 되었는지 확인했다.설치가 잘 되었다. 이제부터 리눅스 시작이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/eb99142190b5471fbd44b75251fec78b.html</guid><pubDate>Mon, 17 Dec 2018 01:33:28 GMT</pubDate></item><item><title>[가계부 프로젝트 4일 차] 데이터베이스 설계-3 (가계부 설계)</title><link>http://www.nowonbun.com/Dialy/4259d3eae19b432ebd108599e92bb0c2.html</link><description><![CDATA[이제 가계부의 데이터까지 설계까지 완료되면 데이터베이스 설계는 완료된다. 프로그램상에서 데이터베이스 설계를 어떻게 하는가에 따라 프로그램이 어떻게 바뀌는지 매우 중요한 부분이다. 그래서 처음에 가능하면 앞으로 더 수정 없이 설계하는 게 최고이다. 하지만 현실적으로는 실제 프로그램 코딩이 들어가면 미처 생각지도 못한 부분이 많이 나온다. 또 여러 가지 추가사항에 의해서도 테이블을 수정할 수도 있다. 그러므로 나중에 alter table로 바꾸는 경우도 많이 생기는데 이 부분은 어쩔 수 없다고 생각된다. 그러나 가능하면 최대한 데이터베이스 설계를 잘해서 alter가 없도록 해야 한다.먼저 카테고리를 두 개로 나누었다. 하나는 마스터 로우 카테고리이고, 하나는 트랜젝션 카테고리이다. 마스터 카테고리는 마스터 테이블이기 때문에 먼저 수입, 지출, 저축으로 세 개로 나누고 입력했다. 그 밑의 하위 카테고리 개념으로 트랜젝션으로 설정했다. 수입 중에서 월급, 아르바이트 월급이다. 그리고 지출은 생활비, 공과금, 용돈 식으로 나누기 위함이다. 카테고리는 이렇게 구성하고, 다음은 가계의 데이터를 담는 payment 트랜잭션 테이블이다. 이 테이블은 마스터 로우 카테고리와 트랜잭션 카테고리를 레퍼런스로 갖고, 날짜, 내용, 금액 그리고 비고, 작성날짜, 수정날짜까지 기본으로 가지고 있는 테이블이다.마지막은 localization의 지역화이다.여기까지 내가 구상하고 있는 가계부 프로그램의 데이터베이스 설계가 완성되었다. 더 필요한게 있나.. 아직은 딱히 생각나는 부분이 없다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/4259d3eae19b432ebd108599e92bb0c2.html</guid><pubDate>Thu, 13 Dec 2018 23:00:37 GMT</pubDate></item><item><title>[가계부 프로젝트 3일 차] 데이터베이스 설계-2 (회원관리, 권한관리)</title><link>http://www.nowonbun.com/Dialy/eb81c65f55b74569aa703d879f5ec907.html</link><description><![CDATA[이번에는 가계부의 회원관리 데이터베이스 설계하겠다. 회원 관리 부분은 많은 프로그램이 기본으로 설계되는 부분이다. 최근에는 oauth를 통해 회원관리를 최소화하는 프로그램들도 간혹 있다. 하지만 oauth를 사용해서 회원 정보는 생략하더라도 회원 그룹관리, 권환관리는 필요한 부분이다. 회원관리는 처음 가입할 때 많은 정보를 수집하려고 하면 개인정보 보호법에 따라 수집의 절차가 따라야 하나다. 예를 들면 동의 절차를 받아야 하고, 보관의 기한이 있으며, 폐기할 때는 어떻게 해야 하는지, 어느 부분은 암호화를 해야 하는지등의 절차가 있다. 이를 지키지 않으면 벌금 내거나 특히 동의 없이 제 3자에게 제공하면 징역을 받을 수 있다. 그리고 사이트 강제 폐쇄까지 당할 수 있다.설명은 거창하게 했지만, 실상은 아이디 패스워드, 이름을 대신할 수 있는 별명 정도만 수집하면 개인정보에 걸리는 영역은 없다. 이번 가계부 같은 경우는 우리 가족만 쓰게 될 목표도 있어서 회원가입은 필요 없고 정보 자체도 google oauth를 통해 오는 id, email, 별명, 프로필 이미지 정도만 수집하기 때문에 크게 개인정보위배에 해당되는 내용은 없다.회원 관리의 마스터는 총 3개로 그룹, view권한, action권한이다. 보통, 프로그램들은 그룹 테이블을 마스터 테이블로 만들지 않고 트랜잭션으로 만들어 end user가 그룹관리도 가능하게끔 설계를 하는 게 보통이다. 예를 들면 end user가 사용 상황에 따라 group을 추가하고 사용하는 유저들을 그 그룹에 설정하는 것이다. 그렇게 group를 트랜젝션으로 설계하게 되면 꽤 많은 부분을 생각하고 만들어야 하는데 집에서 쓰는 가계부는 일단 사용 유저가 나 포함 두 명, 세 명으로 한정되어 있기 때문에 굳이 그룹관리를 만들어서 프로그램을 복잡하게 할 필요가 없을 듯 해서 group를 마스터로 정의했다.우리 가족이 아닌 외부에서 접속하게 되면 guest, 일반 사용 유저는 user, 나는 admin으로 슈퍼 유저 그룹의 단 3그룹으로 생각하고 있다.view권한과 action권한은 권한에 대한 정의이다. 먼저 유저에 대해 외부 유저가 로그인하면 최초에 guest그룹에 디폴트로 설정할 생각이다. 그러나 가계부는 우리 가족이 쓰는 정보이기 때문에 이게 불특정 다수에게 공개되면 조금 창피하다. 그럴 때 그룹별로 열람, 수정, 삭제할 수 있는 권한을 각기 주어 guest는 아무것도 할 수 없고 user의 경우는 일단 가계부를 작성하게는 하나 카테고리 추가 삭제 등을 할 수 없다.. admin은 모든 권한을 넣을 생각이다.그리고 user 테이블은 트랜잭션이긴 하지만 기본 키가 idx(int형식의 auto_increment 제약키)형식이 아니고 id자체가 고유키이기 때문에 id로 키를 설정했다. 사실 email까지 같이 이중키를 만들까도 했는데 괜히 테이블구조만 복잡해질 거 같아서 id만 넣었다.마지막은 그룹의 map이다. 그룹 맵이란 사용자와 그룹관계를 n:n으로 설정하는 것이다. 사실 이게 이렇게까지는 필요가 없다. 하나의 유저가 여러 개의 그룹을 속하는 게 오히려 관리 면에서 더 복잡해지기 때문이고 우리 시스템은 사실 그렇게까지는 필요 없다. 그러나 제가 요번에는 가계부에서 끝나는 게 아니고 앞으로 우리 집 스케줄 공유와 게시판 등등으로 시스템을 키워나갈 생각이다. 혹시 나중에 그룹관리가 어떻게 될지 모르니 혹시나 하는 형태로 작성해 넣었다.이번에는 권환테이블과 유저 또는 그룹의 권한 설정이다. 이 역시 n:n의 형태이기 때문에 map으로 작성했다. 내가 생각하는 권한을 이렇다. 먼저 "가"라는 인물이 "a"라는 그룹에 속해있다. 그리고 "add"의 권한을 a그룹은 권한이 없다. 그러나 "가"라는 특정 인물이 권한이 있으면 "add"를 사용할 수 있게 한다. 반대로 a그룹이 "add"의 권한을 가지고 있다. 그러면 "가"라는 인물이 권한이 있던 없든 간에 사용할 수 있다."add"권한은 하나의 그룹만 사용하는 권한이 아니기 때문에 n:n의 조건이 만들어야 한다.데이터베이스에 있는 데이터를 localization을 통해 한글 또는 영어, 일본어로 표시할 생각이다.여기까지 회원관리 및 권한 설계가 완료되었다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/eb81c65f55b74569aa703d879f5ec907.html</guid><pubDate>Wed, 12 Dec 2018 22:53:29 GMT</pubDate></item><item><title>[가계부 프로젝트 2일 차] 데이터베이스 설계-1 (지역화(Localization))</title><link>http://www.nowonbun.com/Dialy/f814f1762de44dce8281d9e16abc39b5.html</link><description><![CDATA[먼저 프로그램을 만들기 위해서는 데이터베이스 설계가 필요하다. 이전 블로그 댓글을 만들 때도 간단한 데이터베이스 설계를 했는데, 그때는 간단한 댓글 입력, 수정, 삭제만 있는 프로그램이라 설계라고 할 것도 별로 없었다. 이번에는 하나의 완전한 프로그램을 만들기 때문에 조금 더 세밀하게 설계를 해볼까 한다.데이터베이스 설계에서 크게 구분하면 먼저 회원관리와 가계부 관리로 분류된다. 그리고 가계부 사용하는 사람, end user가 한국어를 사용하지 못하는 사람도 있으므로 다국어로 만들어야 할 필요가 있다. 다시 정리하면 지역화(localization), 회원관리, 가계부 관리 순으로 데이터베이스를 설계해야겠다..

나는 데이터베이스 설계를 할 때 테이블을 마스터 테이블과 트랜잭션 테이블을 구분해서 작성합니다. 마스터는 시스템을 구성하는 데이터를 갖는 테이블, 트랜잭션은 프로그램상에 작성된 데이터를 갖는 테이블의 의미입니다. 그리고 마스터 테이블은 프로그램상에서 수정할 수 없고 오로지 sql 쿼리로만 수정할 수 있고 트랜젝션은 auto_increament와 idx를 키로 만든 테이블이다. 최근에 기회가 있어 데이터베이스 설계하는 일도 늘고 많은 설계구조를 살펴볼 기회가 있었다. 그런데 의외로 마스터, 트랜젝션 구조로 만들지 않은 프로그램이 많았다. 그래서 내 생각은 꼭 이게 정답은 아닌가 하는 생각도 든다. 다시 설계로 돌아와서 오늘은 지역화 부분을 만들 생각이다.지역화(localization)는 유저가 언어를 선택하면 해당 언어로 표시하기 위한 언어 팩이라고 생각할 수 있다. 지역화는 트랜젝션은 존재하지 않을 것 같고 마스터로서 설정을 미리 해야 하는 데이터라고 생각한다.먼저 언어의 구분으로 mst_languaue_type 테이블을 만들었다. 마스터 데이터로는 한글, 영어, 일어로 구성되어있다. mst_localization 테이블은 실제 key 별로 프로그램 화면상에 표시될 화면이다. 현재는 프로그램 타이틀 데이터를 한글, 영어, 일어를 번역해서 입력했다. 참고로 나는 마스터 테이블의 어두는 mst, 트랜잭션의 어두는 tsn으로 작성한다. 이런건 굳이 표준개발법은 아니다.여기까지 테이블 구성이 어렵지 않다.. 다음은 회원 관리영역이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f814f1762de44dce8281d9e16abc39b5.html</guid><pubDate>Tue, 11 Dec 2018 23:44:15 GMT</pubDate></item><item><title>[가계부 프로젝트 1일 차] 개요</title><link>http://www.nowonbun.com/Dialy/f3de672576d04ff4bb9179ec61e5861a.html</link><description><![CDATA[완벽하지는 않지만 일단 블로그 기능 추가 영역을 마무리한 것에 대해 약간의 성취감이 있다. 명월 일기도 점점 콘텐츠가 쌓여가는 느낌도 있고 개인적으로 무언가 되어가는 느낌이 들어 기분이 좋다.이번 프로젝트는 앞선 글에서 이야기했지만, 개인 서버의 os를 바꾸기 전에 해야 하는 프로젝트 중 하나이다. 가계부는 현재 c#+php으로 작성되어서 사용 중이다. 언어를 혼합해서 만든 프로그램이다. 그래서일까 프로그램에 버그가 많다. 그래서 프로그램을 수정 하기 보다는 새로 만들어보는 게 어떨까 하는 바람으로 시작한다.나는 아직도 개인적으로 부족한 게 많다고 생각해서 프로그램 공부를 소홀히 하지 않으려고 노력하지만, 현업도 있고 개인 생활도 있어서 공부하기가 쉽지 않다. 그래서 내가 가장 재미있게 공부하는 방법 중에 간단한 프로젝트를 만들어서 새로운 opensource가 있으면 적용하고, 운영해보고 틀리는 것이 있으면 수정하면서 공부한다. 공부하는 프로젝트를 선택하는 기준은 다음과 같다.1. 내가 아닌 다른 사람이 잘 사용할 수 있는 프로그램.2. 복잡하지 않고 빠르게 만들 수 있는 프로그램.3. 다음에 새로운 opensource가 생겼을 경우, 부담 없이 적용할 수 있는 프로그램.첫 번째 이유는 프로그램을 자신이 만들 프로그램을 테스트하고 검증을 하면 시야가 좁아져 테스트와 검증의 한계가 생긴다. 그래서 보통 프로그램 검증을 받으려고 하면 많은 사람이 사용하게 하고 검증을 받아야 한다. 많은 사람이 하나의 프로그램을 보면 많은 아이디어도 생기고, 기능에 대한 목적이 분명해서 많은 레뷰를 받을 수 있다. 두 번째는 복잡한 프로그램을 만들면 확실히 배우는 것도 많지만, 공부의 개념으로 하면 너무 어려워서 중간에 질려버립니다. 즉, 내가 끝까지 완료할 수 있을까 하는 생각에 중도 포기 헤 버린다.. 세 번째는 공부로 하는 프로젝트이기 때문에 단순히 프로그램 작성만이 아닌 여러 가지 opensource를 붙여보고 떼어보고 사용하면서 opensource 공부도 챙길 수 있기 때문이다.나는 지금까지 개발경력이 10년 정도이다.. 10년치고는 매우 뛰어난 실력은 아니다. 그래도 기본기에는 웬만큼 충실하다고 생각한다. 여기까지 오기까지 제가 가계부 프로그램을 한 10개도 넘게 만들어 본 것 같다. php, c#, java로도 만들어보고 그 외 node.js, python으로도 해보고 클라이언트는 순수 javascript, jquery+ mobile, jquery +bootstrap등등 한때는 혼합 언어 시스템에 관심이 가서 c# + php 또는 c#+java 등으로도 만들어 봤네요. 그중 최종 버전은 c#+php입니다. c#의 장점과 php의 장점만 선택해서 사용하였는데 이게 혼합 언어 다 보니 예기치 못한 버그들이 많이 생긴다.. 2년 정도 운영해보니 혼합 프로젝트는 정말 아니다는 생각이 든다.이번에는 java + spring + jquery + bootstrap + mariadb로 만들 생각입니다. 이번의 목표는 linux에 들어가는 프로그램, 그리고 유저가 더 쉽게 사용할 수 있는 프로그램이 목표이다. 단계는 데이터베이스 설계, 프레임 워크 설계, 화면 디자인, 모바일과 pc를 분리(단순 반응형이 아닌 웹 디자인을 다르게 갈 생각이다.), 서버사이드 작성, 클라이언트 작성 그리고 테스트, 릴리즈가 목표이다. 처음은 가계부뿐이지만 나중에는 포털식으로 전환해서 게시판, 일정관리 등도 추가할까도 생각하고 있으니 가능하면 회원 관리 부분도 신경 써야 겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/f3de672576d04ff4bb9179ec61e5861a.html</guid><pubDate>Tue, 11 Dec 2018 23:32:33 GMT</pubDate></item><item><title>해야 할 일 정리하기</title><link>http://www.nowonbun.com/Dialy/86c439ae1577450cbbd871632b09d3d9.html</link><description><![CDATA[댓글 기능을 20일 정도 걸려서 일단은 블로그에 댓글 달 수 있도록 만들었다. 아직 내가 생각하기에는 ie에서 제대로 작동 안 하는 문제가 있고 메일 기능 추가(댓글을 작성할 때 "댓글 감사합니다(?)" 같이 작성된 메일과 리플이 달릴 때마다 리플이 달렸다는 메일 보내는 기능도 생각은 했었는데 아직 거기까지는 작업을 하지 않았다. 그리고 애드센스(광고)도 붙여야 한다. 애드센스로 블로그를 하면서 돈을 많이 벌고 싶다는 의미는 아니고 앞으로 내가 하는 개발이 있어서 서버를 렌탈을 해야 한다. 그래서 에드센스 수입이 생기면 그 걸로 서버 비용에 조금 보탤 생각이다.그러나 혹시 블로그로 수익올리려는 사람이 있으면 말리고 싶다. 노력에 비해 수입이 너무 적다. 차차리 유투부가 수입이 짭잘하다고 하는데.결론으로는 아직 남아 있는 기능에 대해서는 좀 댓글 기능을 사용해보고 사양 추가 또는 수정할 생각이다. 그리고 연속해서 20일 댓글기능만 작성하다 보니 조금 질리기도 했다. 올해 말까지 꼭 완료하고 싶은 일도 있으므로 서둘러서 마무리했다.일단 현재 내가 생각하고 해야 할 일에 대해서는 아래 항목과 같다.1. 명월일지 개편-&gt; 이것이 원조 내 블로그이다. 그러나 오랫동안 관리를 하지 않아 엉마진창이다. 그래서 나는 이 블로그를 재편하는 게 급선무이다.현재 디자인도 엉망이 되었고 포스팅 내용도 틀린 부분이 많고 보기 어려워진 부분도 많다.(highlight 소스 부분은 이상하게 표시된.) 이런 저런요건을 보건데 가~~장 우선순위가 높지 않을까 생각된다.2. 서버 os 교체-&gt; 제가 집에서 노트북을 하나 개조(?) 해서 집 nas 서버로 사용하고 있다. 이 서버는 텔레비전과 연결하여 가족들이 영화나 티비 재방송을 볼 수 있도록 했고, 가계부 등 여러 웹 프로그램들을 사용하는 서버가 하나 있다. 현재 이 서버의 버전은 윈도우 2008이고 서비스 기간은 아직 1년 정도 남았다. 내가 알기에는 2020년에 서비스 종료이다.그러나 그전에 이 서버가 너~~~~무 느려서 centos로 바꿀 생각이다.3. 그리그 서버 안에 dlna 미디어 서버(현 lg smart)가 있다. 지금은 윈도우 서버 안에서 lg smart라는 프로그램을 사용하고 있지만 centos 로 바꾸면 plex라는 프로그램을 쓸까 한다.내가 생각하기에 lg smart 프로그램은 버그가 조금 있다.내가 사용법을 잘 모르는가? 자꾸 프로그램이 오류나서 실행 종료되버린다.4. 개인 웹 프로그램 이전.-&gt; 그리고 개인적으로 사용하는 프로그램으로는 가계부 프로그램이 있다. 크고 작은 프로그램이 있지만, 현재는 그냥 삭제해버려도 괜찮을 듯싶다. 가계부는 현재도 자주 사용하고 사용한 기간도 길어서 데이터가 많다. 그래서 백업, 복구 또는 데이터 이행을 통해 프로그램을 새로 만들까, 기존 것을 수정을 할까를 생각해야 한다. 그러나 기존 프로그램은 c#이라 java로 다시 만들어야 한다.5. 그 밖에.-&gt; 지금 블로그의 글을 작성하기 위해서 blogediter의 프로그램을 작성해서 사용하고 있는데 이것을 로컬용이 아닌 서버용으로 작성하고 싶다. 그리고 또 git에 아직 미완 프로그램이 있는데 가능하면 완료하고 싶다.다시 정리해서 가장 급한 우선순위는 역시 명월 일지 재편이 먼저라고 생각한다. 이유는 서비스 블로그이기도 하고 정말 심하게 엉망진창이다. 그러나 나는 서버 os를 먼저 교체할까 생각하고 있다. 솔직히 이건 우리 가족만 사용하는 서버라 천천히 해도 상관없지만, 명월 일지 블로그 editor와 일기 블로그 editor를 개발해서 서버에서 운영할까 생각한다. 로컬 프로그램을 만들어서 사용하다 보니 외부에서는 글을 쓸 수 없는 상태가 되어버려서이다. 내가 집에 늦게 가거나 혹은 여행을 가게 되면 그날 블로그 포스팅은 쓸수가 없다. 그래서 최대한 빨리 서버 교체를 하면서 에디터를 만들까 생각하고 있다.다시 그럼, 서버 os 변경 전에 해야 할 일은 결국에는 가계부 프로그램을 다시 만들어야 한다. 지금 가계부 프로그램은 c#으로 만들었는데.. c#이 centos에서 안되는 건 아니지만 최적은 아니기에 java로 바꿀 생각이다. 그럼 우선순위는 가계부 만들기이다!!!]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/86c439ae1577450cbbd871632b09d3d9.html</guid><pubDate>Mon, 10 Dec 2018 23:07:21 GMT</pubDate></item><item><title>[블로그 구축 20일 차] 블로그 댓글 기능 달기 - 11(admin)</title><link>http://www.nowonbun.com/Dialy/59fc0910cbdb4d8f9a045f5cbe9e5b5f.html</link><description><![CDATA[블로그 댓글 기능의 메인 부분은 전부 만들었다. 댓글 기능의 흐름은 클라이언트(브라우저)에서 유저가 구글 아이디로 로그인하고 댓글을 작성하면 서버로 json 형태로 ajax 통신을 한다. 그리고 서버에서는 그 데이터를 받으면 데이터베이스에 저장한다. 그리고 클라이언트(브라우저)에서 유저가 해당 페이지의 댓글 리스트를 요청한다. 서버에서는 json형태로 작성하여 클라이언트로 댓글 정보를 준다. 이런 흐름으로 프로그램이 작성되었다. 아직은 조그마한 버그가 눈에 띄지만, 차차 조금씩 시간 날 때마다 테스트해가면서 수정할 생각이다.그리고 현재 내가 생각하기에 좀 더 필요한 기능은 댓글의 메일 수신기능과 관리자가 댓글의 내용을 일괄적으로 확인할 수 있는 관리자 페이지이다.댓글 기능 admin기능은 블로그 내에서 관리하는 게 아니고 서버측의 php에서 admin페이지를 하나 만들어서 관리할 생각이다. 그냥 관리자 페이지 없이 데이터베이스에서 직접 sql로 관리해도 문제없지만 그래도 매번 쿼리 치기도 불편하고 쿼리를 잘못 입력하면 댓글이 다 날라갈 수도 있으니 안전하게 관리가 가능한 페이지를 만들기 위해서다.
전체적인 내용은 로그인, 그리고 댓글의 내용을 표시하는 table페이지, 그리고 ajax화면으로는 검색, 수정, 삭제할 수 있는 기능이 있다. 이건 데이터베이스의 관리 페이지이므로 삭제된 데이터도 표시했다. 그리고 삭제된 데이터도 활성링크를 통해 삭제 취소도 할 수 있다. 많은 기능이 한 페이지에 넣어서 소스가 꽤 복잡하다. 사실 나는 이렇게 무식하게 프로그램을 개발하지 않는다. 그러나 댓글기능은 순수히 나만 사용할 것이고 여러 페이지로 개발을 하면 오히려 복잡하지는 않을까 생각해서 간단하게 한 페이지로 만들었다.로그인과 페이지소스는 ajax가 아니므로 응답 헤더에 「content-type: text/html;」로 설정했다. 이렇게 하면 브라우저에서는 html을 서버로부터 수신하면 우리가 볼 수 있게 파싱할 것이다. ajax의 경우는 댓글 기능에서 썼던 common 클래스의 그대로 상속 받아 결과를 json 형식으로 나타나게 했다.검색의 경우는 쿼리에 따로 쿼리에 조건절을 붙이지 않고 전체 데이터를 검색할 수 있게 만들었다. 삭제된 데이터도 보여주어야 하니깐.. 전체적으로 소스를 기존의 검색, 삭제, 수정기능을 조금씩 바꿔서 구현했다.이로써 관리자 페이지도 완성했다. 로그인 기능을 만들어서 아이디와 패스워드를 넣으면 서버에 하드 코딩한 슈퍼 유저의 아이디와 패스워드를 비교해서 로그인한다. 관리자 아이디와 패스워드를 데이터베이스에 넣어서 관리하지 않고 하드 코딩한 이유는 이 페이지를 들어갈 사람은 나밖에 없다. 굳이 데이터베이스를 만들어서 관리할 필요성을 느끼지 못했다. 댓글기능은 여기까지 마무리 지을 예정이다. 아직 메일 수신기능과 몇가지 추가기능은 작성하 지 않았는데 좀 더 이 기능을 운영해보고 필요에 따라 나중에 추가할 생각이다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/59fc0910cbdb4d8f9a045f5cbe9e5b5f.html</guid><pubDate>Mon, 10 Dec 2018 22:50:54 GMT</pubDate></item><item><title>[블로그 구축 19일 차] 블로그 댓글 시스템 달기 -10 (client 작성)</title><link>http://www.nowonbun.com/Dialy/a5bdfd0a09ad4e53a355c5009726220a.html</link><description><![CDATA[이번에는 댓글 수정과 리플을 작성한다. 댓글 수정과 리플은 추가, 삭제와 다르게 조금 복잡하다. 이유는 댓글 작성과 삭제는 달리 동적 움직임이 필요 없이 텍스트 박스에서 글을 쓰고 추가 버튼을 누르면 서버에서 댓글 추가 처리한다. 삭제의 경우는 검색된 글에 삭제 링크를 눌러서 삭제하면 된다. 그러나 수정과 삭제는 조금 내용이 다르다. 처음 댓글의 형태는 검색한 결과형태인 리스트 형식의 결과다. 거기에서 수정 링크를 누르게 되면 해당 댓글란이 텍스트 박스로 바뀌고 수정 버튼을 생성한다. 그리고 최종적으로 수정 버튼을 누르게 되면 수정된다. 리플의 경우도 마찬가지다. 검색 결과 후에는 바로 입력할 수 있는 텍스트값이 보이지 않는다. 리플 달기라는 링크를 누르면 비로소 해당 댓글의 아래에 텍스트 박스를 생성시켜 리플을 달수 있는 항목이 생기고 리플 달기라는 버튼을 누르면 생성된다.수정 링크를 누르면 텍스트 박스와 수정 버튼을 만들어야 한다. 텍스트 박스는 단순히 빈 텍스트 박스를 보여주는 게 아니고 수정할 내용을 글을 텍스트 박스안에 넣어주어야 한다. 즉, element의 nodetext를 취득하고 그 element 하위 노드에 textarea를 만들어서 val 값을 nodetext로 부터 취득한 값을 입력한다. 그런 다음, 수정 버튼을 생성했다. 수정 버튼은 동적 생성이기 때문에 클릭 이벤트를 document에 붙였다.마지막으로 수정 버튼을 누르면 서버로 데이터를 보내 해당 코멘트를 수정한다. 수정 쪽의 요구 파라미터 idx와 id, email 그리고 수정될 내용인 comment 내용이다. 수정이 문제없이 된다.다음은 리플 기능 작성이다. 리플의 이벤트 형태는 수정과 비슷하다. 그러나 동작의 형태가 조금 다른데 우선 텍스트 박스와 리플 달기라는 버튼을 만들어준다. 리플 달기는 코멘트를 새로 만드는 것과 같으므로 굳이 텍스트박스안에 값을 넣을 필요는 없다. 그리고 최종적으로 add.php로 댓글 정보를 보내 댓글을 추가한다. 여기서는 리플 대상이 되는 댓글의 idx를 parent 파라미터에 포함해 보내야 한다. 그래야 해당 리플인지를 알수있다.수정과 리플의 내용은 전반적으로 내용이 비슷하다. 비슷한데도 리플은 추가기능에 공통으로 사용하고 수정은 독립된 클래스이다. 잘 생각 해보면 이것도 고칠수 있을꺼 같기는 한데. 굳이 쿼리상의 insert와 update의 차이도 있으므로 따로 처리했다.여기까지 기본적인 댓글 기능을 완성했다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/a5bdfd0a09ad4e53a355c5009726220a.html</guid><pubDate>Sun, 09 Dec 2018 01:51:28 GMT</pubDate></item><item><title>[블로그 구축 18일 차] 블로그 댓글 시스템 달기 -9 (client 작성)</title><link>http://www.nowonbun.com/Dialy/90f51b80de17467fb55c535980313ff9.html</link><description><![CDATA[이번에는 댓글 기능 추가에서 가장 복잡할 거라고 예상되는 검색 부분이다. 검색해서 받아온 데이터를 동적으로 element를 생성하고 dom 영역에 생성해야 하는 로직이 필요하다고 생각되기 때문이다. 먼저 소스를 전체적으로 작성하고 세부적인 부분을 확인하겠다.
검색은 우리가 검색 버튼을 눌러서 발생하는 이벤트가 아니고 처음 웹페이지가 열리고 호출 또는 추가, 삭제, 수정이벤트가 끝나고 reload 할 때 호출하는 형식이다. 그러니 따로 document.ready에 넣어 이벤트로 만들 필요는 없다. 검색 버튼이 없으니 이벤트로 만들 수가 없다.검색에서 필요한 파라미터는 url, id, email이다. url은 페이지의 주소, id와 email은 로그인 했을 때의 유저 정보가 된다. 로그인하지 않아도 댓글 검색은 이루어져야 하니 id, email에 반드시 유저 정보가 있을 필요는 없다. 그러므로 checklogin의 로그인 체크는 필요가 없다.검색도 공통함수 commentajax를 호출해서 서버에서 데이터를 받아온다. 실제로 데이터를 받아보면 아래와 같은 json 형식으로 된다.구조는 전체 댓글 두 개, idx가 1인 데이터는 child도 한 개가 있다. 처음 데이터의 리스트형식을 getitem라는 내부함수에서 처리한다. getitem에서는 다시 createcomment를 호출해서 element를 작성하고 최종적으로는 id가 commentlist라는 element에 append를 한다.그리고 ismodify 파라미터가 true인 경우는 수정할 수 있게 수정, 삭제 링크를 만든다. 서버에서 ismodify가 true의 조건은 등록 댓글 id, email와 로그인한 id, email이 일치하는 경우였다. 즉, 내가 쓴 댓글을 수정, 삭제가 가능하다는 뜻이다.여기서 나는 새로 생성하는 element를 자바스크립트 안에 코딩했다. 이 방식에 대해서는 여러 방법이 있다. 웹 dom영역에서 template 태그 안에 element를 넣고 jquery의 html함수로 읽어드려 치환하는 방법이 있고 나처럼 자바스크립트 안에 넣는 방법이 있다. 일단 코딩하는 데는 template 태그 안에 넣는 방법이 편하다. 그러나 template 태그 안에 넣으면 element가 전부 노출이 되기 때문에 그걸로 악용하는 사람도 더러 있었다. 당연히 뭐 코딩하는 방법에 따라 다르지만.. 나는 자바스크립트 안에 element를 작성하는 방법을 선호한다. 최종 배포할 때 자바스크립트는 전부 압축을 해버리기 때문에 그러면 보안상으로 조금 안전해진다. 그러나 시스템 망가트리려고 마음먹으면 압축을 해도 소용없다.ㅠㅠ
삭제의 경우는 댓글 검색이 끝나고 삭제 링크를 누르면 발생하는 이벤트다. 링크의 경우는 동적으로 생성되는 element이기에 이벤트를 document에 걸었다. document는 사라지거나 하지 않기 때문에 document에 거는 것이다. 그렇게 해서 삭제 element가 없어졌다 다시 생기더라도 이벤트가 해제되거나 동작 안 하는 경우는 없다.document에 이벤트를 걸 때 생각해야 할 점은 댓글 기능은 워낙 작아서 발생할 가능성이 작지만 큰 프로젝트라면 이벤트가 중복으로 걸 수 있는 위험이 있다. 예를 들면 내용이 비슷한 페이지를 particle로 구성하고 안에 같은 document 이벤트가 있다고 가정할 시 두 번 중첩 이벤트가 걸린다. 두 번 중첩은 이벤트가 두 번 발생할 수 있는 의미다. 그러면 버그가 발생하기 때문에 off.on 형태로도 많이 구성하나 결론적으로 off.on 형식으로 코딩을 하면 그만큼 리소스를 많이 먹기 때문에 시스템이 느려진다.그렇기 때문에 이벤트 target을 정할 때는 이건 동적 소스, 정적소스를 확실히 구분해서 이벤트를 거는 게 좋다.삭제는 서버에서 요구하는 파라미터가 idx, url, id, email이다. idx는 삭제할 타깃이고 url은 정합성, id, email은 권한 체크용으로 받는다. 이 조건이 맞으면 삭제가 진행된다.이제 수정과 리플등록 부분만 작성하면 전체적인 댓글 기능은 완성된다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/90f51b80de17467fb55c535980313ff9.html</guid><pubDate>Thu, 06 Dec 2018 21:53:31 GMT</pubDate></item><item><title>[블로그 구축 17일 차] 블로그 댓글 시스템 달기 -8 (client 작성)</title><link>http://www.nowonbun.com/Dialy/c4097e40237147c696ba6c0af47a8718.html</link><description><![CDATA[앞에서 기본 디자인과 로그인에 대해서 작성했다. 이번에는 공통부분과 댓글 추가하는 부분을 만들어 볼까 한다.검색 부분은 조금 복잡하므로 다음에 한꺼번에 작성할 생각이다.웹 클라이언트에서 사용하는 스크립트는 javascript이다. 그러나 javascript의 바닐라 버전(순수 버전)으로 사용하면 꽤 복잡하다. 사실 한 10년 전만 해도 바닐라 버전만 사용했었는데 최근에는 jquery만 사용하다 보니 다시 바닐라 버전으로만은 못할 것 같다. 이유는 코드가 어마어마하게 길어질 것 같아서이다. 그래서 요즘은 바날라 버전으로 만들기 힘들어서 angularjs, jquery 등 많은 라이브러리가 있다. 그중 나는 jquery만 사용하고 있다. 예전에 angularjs로 만들어 본 적이 있는데 남들은 이게 편하다고 하는데 나는 당최 뭐가 편한지 모르겠다. 그냥 코드만 더 길어지고 복잡만 해지는 것 같던데.. 물론 onepage 시스템을 만들면 편할 거 같은데 굳이 onepage로 시스템을 통으로 만들 필요성을 아직은 느끼질 못하겠다.jquery는 javascript의 라이브러리이다. 이 뜻은 jquery라 javascript의 기반으로 함수를 좀 더 편하게 사용하기 위해 재정의를 했다고 보면 된다. 그 뜻은 jquery를 사용하더라도 javascript를 모르면 사용할 수 없다는 뜻이다.원래 나는 javascript 코드를 만들 때, model-controller로 구성하고 외부 참조변수, 내부 변수 구분해서 작성한다. 그러나 지금 만드는 기능은 워낙 사이즈가 작고 간단한 프로그램이라 오히려 model-controller로 만들어서 하면 더 복잡해질 거 같다. 그래서 그냥 public function으로 만들었다.먼저 commentajax는 추가, 검색, 삭제, 수정이 모두 ajax로 서버로 접속하기 때문에 공통으로 묶었습니다. 이번 서버측 php와 비슷한 설정이다. 서버 모두 post 형식으로 받기 때문에 타입은 post로 고정하고, 모두 json형식으로 데이터를 받기 때문에 데이터 타입도 json으로 고정했다. 성공했을 때는 cb의 콜백함수를 호출하고 댓글을 다시 reload하는 형식으로 만들었다.그리고 에러가 나면 에러 메시지가 나오고 댓글 element를 hide시킨다.checklogin은 우리가 서버로 접속하기 전에 무조건 login상태를 확인하기 위한 공통함수이다. 서버측에서 추가, 검색, 삭제, 수정할때 id와 email값을 받아야 하기 때문에 필수라고 할수 있다.여기는 댓글을 추가하는 부분이다. 기본적으로 나는 javascript를 html 구성 중 가장 밑에 배치하므로 document.ready를 기다릴 필요는 없다. 그러나 코드의 가독성과 앞으로 어떻게 수정될지 모르기 때문에 이벤트를 document.ready안에 넣는다. document.ready는 jquery에서 $(function(){ }); 의 형태로 만들어진다.댓글 추가할 때는 먼저 공통함수의 checklogin로 로그인 체크합니다. 그리고 comment영역에서 엔터를 모두 띄어쓰기로 치환했습니다. 300자 제한을 했는데 모두 엔터를 쳐서 입력하면 댓글 구조가 이상해 지니깐 입니다. 이 부분을 서버 부분에서도 체크하는 게 좋을 것같다. 여기를 만들다 보니 갑자기 체크해야 겠다는 생각이 들었다. 서버측 php도 수정해놔야겠다.그리고 파라미터는 서버 요구사항대로 url, id, email, comment를 받아서 전송한다. id, email은 구글 oauth2에서 받은 정보이다. 그리고 성공 콜백이 오면 등록 메시지 표시하고 코멘트 텍스트 박스를 초기화한다.댓글 추가는 간단해서 어려운 코드가 없다. 다음 검색 부분이 가장 복잡하지 않을까 생각된다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/c4097e40237147c696ba6c0af47a8718.html</guid><pubDate>Wed, 05 Dec 2018 22:28:41 GMT</pubDate></item><item><title>[블로그 구축 16일 차] 블로그 댓글 시스템 달기 -7(client 작성)</title><link>http://www.nowonbun.com/Dialy/commentDisign.html</link><description><![CDATA[벌써 블로그 구축 프로젝트를 시작한 지 보름이 지났다. 그러나 아직　생각처럼 진척이 팍팍 나가지 않는다. 그래서 조금 지루한 감이 없지 않아 있다. 그래도 올해 말에 꼭 하고 싶은 프로젝트가 있으므로 최대한 빨리해서 30일 차 이전에 끝내는 게 목표다.댓글 기능의 서버 쪽 구현은 약 70% 정도 완료가 되었다. 아직 테스트도 제대로 되지 않아서 버그가 많을 거 같긴 하지만, 주요 부분은 일단 구현이 되었다. client까지 빨리 만들고 서버 쪽 관리 페이지와 메일 기능을 추가해서 빨리 완성해야겠다. 블로그를 한 2~3주간 사용해보니 이곳저곳에서 버그도 조금씩 보이고 할 게 많다고 생각된다. 아직 방문자가 없어서 다행이다. ㅎㅎ 이게 진짜 다행인지...이번에는 client쪽을 구현해 볼까 한다. client 쪽이라고 하면 브라우저, 즉 제 블로그에서 javascript(jquery)를 통해 서버로 접속해서 댓글 추가, 검색, 수정, 삭제 부분을 말한다.서버 쪽은 화면 디자인은 필요 없지만 client 영역은 화면 디자인이 필요하니 우선 디자인을 먼저 했다.이 댓글 기능은 블로그에서 사용할 것이기 때문에 최대한 css와 js를 블로그와 일치시켜서 비슷한 환경으로 구성했다. 구성한 방법은 블로그를 소스 보기로 해서 복사한 다음 포스트 내용과 최신 글 내용은 개발하는 데 필요가 없으므로 다 삭제하고 댓글 영역만 복사해서 개발 환경을 설정했다. 개발 환경은 가능하면 실제 사용하는 곳과 최대한 비슷하게 구성을 해야 나중에 릴리즈할 때 어려움이 없다.client의 개발 구성은 먼저 로그인, 예전에 조사했던 google oauth2로 로그인 화면을 만들고, 그다음에는 입력, 검색, 삭제, 수정 순으로 기능을 추가할까 생각하고 있다.로그인 기능은 google의 가이드를 보고 참고했다.https://developers.google.com/identity/sign-in/web/가이드에서는 로그인 박스를 넣을 div를 선언하고 meta태그에 google client id를 넣는다. 그리고 구글에서 제공하는 js를 링크하고 onsignin함수를 넣으라고 되어있다. 그대로 쓰기에는 사양과 다르기 때문에 필요한 부분을 조금 수정했다.https://stackoverflow.com/questions/31331428/how-to-call-getbasicprofile-of-google-to-google-signin-on-only-button-click예전에 조사한 스택 오버플로우에 올린 글이다. 여기에는 div영역의 id를 바꿀 수 있고 이벤트 명도 수정할 수 있다. 구글의 oauth의 경우는 로그아웃되어 있으면 자동으로 구글 로그인 버튼이 나온다.로그인되어있지 않으면 자동으로 로그인 버튼이 hide된다. 나는 로그인되어있으면 댓글을 입력할 수 있는 text-box와 입력 버튼이 보이게끔 작성했다.뭐 여기까지 일반적인 로그인 방법과 댓글 작성하는 디자인이다. 딱히 여기에 대해서 제가 더 글을 쓸 내용이 없다.ui를 구성할 때, 나만의 특별한 기능, 특별한 디자인으로 구성하는 사람도 있지만 나는 가장 보편적인 디자인과 기능을 선호하는 편이다. 왜냐하면, 프로그램을 설계하다 보면 유저의 사용자 학습 부분도 검토해야 하기 때문이다.예를 들면 윈도우 메뉴바는 하단, 시작 버튼은 왼쪽 아래, 맥은 상단에 있다. 이렇게 있는데 나는 독특한 기능이라고 마우스 왼쪽 오른쪽 동시에 누르면 메뉴가 나오게끔 설계를 하면 많은 사람이 메뉴가 어디 갔지? 하면서 메뉴를 찾는 데 시간을 많이 소비하게 된다. 그리고 방법을 알고 있더라도 아직 익숙하지 않기 때문에 많이 헤멜 수도 있다. 그 뜻은 아무리 좋은 기능, 혁신적인 기능이라도 사용자 학습이 되지 않은 기능들은 그냥 불편한 기능일 뿐이다. 그런 면에서 보면 스티브 잡스가 대단하다. 새로운 시스템, 기능이 나와도 사람들이 많은 어려움 없이 쉽게 흡수가 되는 그런 설계를 하는 것. 이건 쉽지만, 매우 어려운 일이다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/commentDisign.html</guid><pubDate>Tue, 04 Dec 2018 23:13:59 GMT</pubDate></item><item><title>[블로그 구축 15일 차] 블로그 댓글 기능 달기 -6(server 작성)</title><link>http://www.nowonbun.com/Dialy/comment_delete_modify20181204.html</link><description><![CDATA[사람마다 설계하는 구조와 방식, 진행 방법이 전부 다르다. 보통 자기만의 경험으로 가장 최적의 방식이 있다. 그래서 내가 작성하는 방식은 반드시 최적은 아니다. 프로젝트마다 다르지만 보통 입력영역을 우선으로 만들고 그다음은 검색, 삭제, 마지막으로 수정하는 영역 순으로 개발한다. 나한테는 이런 순서가 가장 중복작업을 피하고 소스가 가장 깔끔하게 만들어진다고 생각한다.그래서 앞 포스트에서 입력과 검색영역을 만들었다. 다음은 이번에는 삭제와 수정 순으로 만들어 볼까 생각하고 있다.삭제에는 많은 파라미터가 필요 없다. 먼저 키가 되는 idx와 그걸 삭제할 수 있는 권한체크만 가능하면 된다. idx만으로 삭제를 해버리면 누구든 데이터를 삭제할 수 있으므로 아이디 체크가 필요하다. 그래서 파라미터에서 idx는 당연히 받고 url, id, email이 일치하면 그 데이터를 삭제할 수 있게 했다. 추가로 id가 super 유저라고 하면 id, email은 일치하지 않아도 삭제할 수 있게 만들었다. 전체적인 흐름은 추가 소스와 비슷하다. get방식이면 401에러를 리턴하고 등등. 그리고 완료되면 json으로 ok값을 리턴한다.내가 수정 영역을 가장 마지막에 두는 이유는 두 가지 때문이다. 입력과 삭제보다 수정은 조금 더 복잡하다. 그리고 수정은 입력과 삭제의 소스와 비슷하므로 미리 입력과 삭제를 만들면 수정 부분을 좀 더 수월하게 작성할 수 있다. 먼저 파라미터는 입력에서 받았던 파라미터와 비슷한데 그중 수정할 idx 키를 하나 더 받는다. 그리고 수정 권한을 체크하는데 이 부분은 삭제와 비슷하게 url, id, email이 일치하면 수정할 수 있고 일치하지 않으면 수정할 수 없게 한다. 역시 super 유저의 경우는 일치하지 않아도 수정할 수 있다.여기서 나는 입력, 삭제와 다르게 comment_h 테이블(히스토리 테이블)에 insert select를 했다. 이는 수정의 로그를 남기기 위한 건데, 보통은 이 부분을 소스 상에서 처리하지 않고 트리거로 처리가 일반적이다. 그러나 현재 내가 사용하고 있는 서버 호스트는 무료 호스트이고 mysql버전이 꽤 옛날 거다. 꽤 옛날 거라도 해도 triger는 있지만, 혹시나 해서 triger로 처리하지 않고 직접 소스에서 insert select로 작성했다. 덕분에 소스가 조금 지저분해졌다. 만약 이게 복잡한 프로젝트이라고 하면 이렇게 작성할 경우 프로그램 참 어렵게 한다고 하겠지만 간단한 프로그램이니 이렇게 처리했다.여기까지 서버 영역 프로그래밍이 완료되었다. 아직 내가 생각하기에는 admin과 댓글이 달리면 메일을 발송하는 부분이 더 필요한데 우선 댓글 기능을 활성화하는 게 목표이기 때문에 일단 일차 릴리즈가 완료가 되면 추가사항으로 개발할 생각이다.위 흐름표는 지금 내가 생각하고 있는 댓글 기능에 대한 설계도(?)이다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/comment_delete_modify20181204.html</guid><pubDate>Tue, 04 Dec 2018 01:47:01 GMT</pubDate></item><item><title>[블로그 구축 14일 차] 블로그 댓글 기능 달기 -5(server 작성)</title><link>http://www.nowonbun.com/Dialy/22c4b209f70d4f4b95b2bc822da6fc69.html</link><description><![CDATA[상위 common 추상 클래스와 database connection을 만들었다. 하루 만에 다 만들기에는 개인적인 시간이 충분하지 않기 때문에 단계별로 작업할 생각이다.댓글 추가 페이지는 add.php로 만들었다. add.php 안에서 contoller 클래스를 선언하고 common.php에서 만들었던 common 클래스를 상속받아서 만들었다. 소스의 흐름은 post 형식으로만 사용이 가능하게 했다. 그뜻은 get 방식으로 오면 401에러를 발생시킨다. 왜냐하면, ajax를 통해 post 메소드가 아닌 직접 접속하게 되면 에러페이지를 내보내기 위해서이다. 그리고 각 파라미터값을 변수로 변환하고 데이터 검사를 한 후에 데이터베이스에 insert했다. insert가 잘 되면 json 형식의 result를 키로 ok 값을 리턴하고 그렇지 않으면 ng를 리턴하게 설정했다.여기서 add.php만 보면 어제 추가한 common 클래스에는 없던 validateurl 함수와 validate가 있다. 이 두 함수를 common 클래스에 넣은 이유는 url검사와 데이터 null검사는 add에서만 사용하는 것이 아니고 검색, 수정, 삭제할 때도 사용할 것 같아서 공통 클래스에 작성했다. 그렇게 하면 다른 클래스에도 같은 함수를 만들지 않아도 공통으로 쓸 수 있다. 나는 copy-phase를 매우 싫어하기 때문에 가능하면 이렇식으로 공통함수를 관리하는 편이다.댓글 추가하는 부분은 데이터를 insert하는 부분이라 데이터 검사만 잘 되면 크게 어려운 부분은 없다.데이터를 insert했으니 이번에는 select 검색하는 클래스를 만들었다. 구조는 add부분과 비슷하다. post형식으로 받고 파라미터 검사하고 데이터베이스에서 select하는 것이다. 여기서는 select한 값을 comment 클래스를 할당하여 list형식으로 만들었다. 이렇게 하면 결괏값을 10개 검색했다고 하면 10개의 comment 클래스가 list에 할당되는 형태이다. 이렇게 되면 데이터베이스 구조와 클래스 구조를 비슷하게 생각할 수 있다. sort를 할 수도 있고 필요 없는 데이터는 뺄 수도 있고. 이것이 자바나 c#에서의 orm 개념이다.검색의 기준은 url로 파라미터로 요청이 오면 해당 키의 댓글만 검색하는 형태이다. 아직 클라이언트를 만들이지는 않았지만 url은 location.origin + location.pathname 형태로 오기 때문에 같은 페이지의 경우면 같은 값으로 요청된다. 그리고 결국에 reponse는 json형식으로 변환해야 하기 때문에 comment class형태에서 array 형태로 변환했다. 중간에 parent키가 null인 경우는 최상위 댓글이고 parent가 null아니면 리플의 형태이기 때문에 그것에 맞게 array를 작성했다. java나 c#은 클래스를 json으로 변환하는 내부 함수? 라이브러리가 있는데 php는 없는 듯싶어서 저런 식으로 작성됐다. 혹시 있을지도 모르겠지만.. 어떻게 보면 이게 정말 가시적인 형태라 이해하기는 편한데 소스가 길어지니 귀찮게 느껴진다.common 클래스도 수정했다. 앞에서 이야기한 추가 부분의 validate함수를 공통으로 만들었습니다. 단순히 null체크와 url이면 host 주소 검사, idx면 정수검사를 추가했습니다. 그리고 super user의 영역인데 super user는 하드 코딩으로 넣어놨습니다. 관리자는 나밖에 없으니 굳이 데이터베이스로 회원관리를 만들어 관리할 필요는 없을 것 같아서 이다.다시 검색영역으로 돌아가서 ismodify 컬럼을 보면 댓글이 본인 것이면 수정할 수 있고 본인 것이 아니면 수정할 수 없게 한 파라미터가 있다. 여기에 super 유저라면 보든 댓글의 수정이 가능하게 바꾸려고 만든 부분이다. super user도 검색뿐 아니라 수정, 삭제에서도 필요할 것 같아서 공통에 넣었다.댓글 기능에 대한 소스는 아래 github에 있습니다.github - https://github.com/nowonbun/blogcomment]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/22c4b209f70d4f4b95b2bc822da6fc69.html</guid><pubDate>Sun, 02 Dec 2018 17:12:05 GMT</pubDate></item><item><title>[블로그 구축 13일 차] 블로그 댓글 기능 달기 -4 (server 작성)</title><link>http://www.nowonbun.com/Dialy/32d7d7135654429faf3cbdfe618bae00.html</link><description><![CDATA[데이터베이스 설계도 완료했으니 이제 본격적인 코딩이다. 본래는 프로그램 설계를 하고 코딩해야 정상적인 프로젝트 흐름이지만 복잡한 프로그램도 아니고 간단하니 바로 코딩 시작합니다.서버 스크립트 사용 언어는 예전에 무료 호스팅 우비에서 사용하기로 했으니 php로 작성했다.개인적으로 좋아하는 언어는 java와 c#같은 oop(object-oriented programming: 객체지향 프로그래밍)가 좋은데 무료 호스팅에서는 그 언어들을 지원하지 않는다. 왜 그럴까? java도 무료 언어인데. 이런 점이 참 아쉽다.그렇다고 php가 성능이 떨어지는 언어는 아니다. 가볍고 빠르고 꽤 직관적인 언어라 구현이 매우 빠르다. 메모리 직접 참조가 없는데도 메모리 릭도 거의 없다.. 꽤 편리하고 좋은 언어다. 단점은 java처럼 메모리를 직접 관리하는 영역이 없어서 디자인 패턴 적용이 쉽지가 않다. 그리고 스레드를 직접 컨트롤할 수 있는 것도 아니다. 또 댓글 기능처럼 소형 프로젝트는 괜찮으나 대형 프로젝트로 가면 소스가 엄청나게 많으므로 관리도 만만치 않다.그러나 댓글 기능은 복잡한 프로그램을 하는 게 아니고 간단하게 글쓰기, 수정하기, 삭제하기 그리고 검색하기를 ajax로 값을 가져올 수 있으면 되기 때문에 php로도 충분하다.구성은 다음과 같이 생각하고 있다.common.php - 공통 부분 (comment entity, abstract controller, db connection)add.php - 입력 부분modify.php - 수정 부분delete.php - 삭제 부분select.php - 검색 부분먼저 common.php를 만들었다.
위 클래스는 comment 클래스이다. 이 클래스의 목적은 데이터베이스의 값을 가져와서 클래스로 담을 생각이다. 댓글 하나의 정보가 하나의 클래스가 된다. 여러 개의 데이터를 가져오면 comment 클래스를 리스트에 담아서 사용할 생각이다. 그럼 sort나 값을 다루기도 편하다. orm 개념이라 java나 c#에서 많이 설계하는 형태이다. php 세계에서는 어떻게 할까? 비슷할 거 같다.추가로 데이터베이스와 다른 변수가 child가 있다. 이건 comment 클래스의 리스트를 넣을 생각인데 댓글의 하위 리플 댓글 리스트가 여기에 들어간다. php는 자료형을 선언하는 게 아니라서 소스만 보고는 어떤 데이터 형태가 들어가는지 확인하기가 어렵다.
먼저 common 클래스에는 데이터베이스 커넥션(dbconn)과 입력, 수정, 삭제, 검색의 상위 클래스(common)을 만들었다. 네 가지 기능의 공통적인 함수를 common 클래스에 넣었다. 그리고 일단 네 가지 액션 모두 데이터베이스 접속을 하는 것 같고, 웹 해더영역도 ajax로만 사용하기 때문에 header를 공통에 선언했다. 그리고 나는 cross 플랫폼이기 때문에 해더에 모든 사이트에서 허용한다고 설정했다. 이걸 안 하면 아마 ajax로 받아오는 곳에서 security 에러 난다.그리고 execute를 호출하면 하위 클래스에선 run함수가 호출하게 된다. 나는 항상 프로그램 설계를 할 때 하위 클래스(업무 영역)이 직접 호출하게 하지 않는다. 이유는 관리적인 문제 때문인데 하위 클래스를 직접 호출하는 영역이 많아질수록 에러가 발생했을 때 찾기가 어려워져서다. 이게 정답은 아니고 그냥 사람마다 설계하는 스타일인데 나는 이렇게 작성하는 것을 좋아한다. 그리고 run에서는 array값을 리턴을 받고 array로 받으면 json으로 변환하여 리턴하는 형태로 만들었다.php가 함수 return 타입과 변수 타입을 선언하지 않기 때문에 코드만으로 무슨 값이 오는지 알 수가 없다. 그런 면은 다른 언어보다 가독성이 참 떨어진다. 주석으로 설명해야 하나? 나는 코드에 주석 다는 걸 별로 좋아하지 않는데..]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/32d7d7135654429faf3cbdfe618bae00.html</guid><pubDate>Sat, 01 Dec 2018 23:02:57 GMT</pubDate></item><item><title>[블로그 구축 12일 차] 블로그 댓글 기능 달기 - 3 (DB 설계)</title><link>http://www.nowonbun.com/Dialy/commentDatabase20171130.html</link><description><![CDATA[기본적인 자료조사는 끝났고, 드디어 프로그래밍을 위한 첫 단계인 데이터베이스 설계이다. 데이터베이스는 처음 설계하면 나중에 운영하는 중에는 바꾸기가 매우 어려운 영역이다. 그래서 나는 가장 중요하다고 생각하는 부분이 설계라고 생각한다.설계 방식은 사람마다 방식이 다르고 구조도 많이 다르다. 구조를 설계하는 방법에는 데이터베이스 정규화라고 어느 정도 정해진 규칙이 있다. 그러나 실무에서는 요구사항과 차이가 있는 경우도 있고 로그나 성능을 위해서 반드시 정규화의 규칙을 따라서 설계할 필요는 없다. 상황에 따라 데이터 중복이나 레퍼런스를 연결 안 하는 경우도 있다. 그러나 가능하면 정규화에 맞추어서 만드는 것이 이상적이다. 그래서 설계는 딱 정해진 규칙이 없고 그냥 많이 만들어보고 많이 운영해보고 문제점을 느끼면 다음 설계부터는 고려해서 다시 설계하고... 데이터베이스 설계영역은 그래서 경험이 많이 중요하다.
블로그 댓글 기능을 위한 데이터베이스 설계는 일단 마스터 테이블은 만들지 않았다. 트랜잭션 테이블 하나와 히스토리 테이블이다. 두 테이블은 idx에 auto_increament 제약을 주어서 테이블 키로 설정했다. 그리고 url 컬럼은 어느 댓글 페이지인지 구분할 생각이다. 그러니깐 location.origin + location.pathname 을 넣는 다는 의미다. location.href을 안 넣는 이유는 사용하는 페이지에 파라미터가 있으면 다른 페이지로 인식돼버리기 때문이다. id와 email은 oauth로부터 받은 id를 넣을 것이고 ip는 client ip주소이. 혹시나 나중에 ddos 대책을 위해 넣어 놨다. comment는 댓글 내용이 된다. 그리고 parent는 self reference를 걸었는데 여기는 댓글의 리플을 위한 항목이다. isdeleted는 삭제할 경우 물리적 삭제가 아닌 논리적 삭제를 할 예정이다.comment_h의 테이블은 댓글 수정이 있으면 로그를 남겨놓기 위한 테이블이다. triger는 작성하지 않고 소스 상에서 insert select 할 예정이다. 왜냐하면, 무료 웹 호스팅이다 보니 mysql버전이 낮다. 그러다 보니 triger로 예기치 못한 에러가 나올 수 있으니 최대한 안전하게 처리하기 위함이다.여기까지 데이터베이스 설계가 완료되었다. 다음은 댓글 서버스크립트(php)를 만들 생각이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/commentDatabase20171130.html</guid><pubDate>Sat, 01 Dec 2018 13:30:44 GMT</pubDate></item><item><title>[블로그 구축 11일 차] 블로그 댓글 기능 달기 - 2 (구글의 oauth)</title><link>http://www.nowonbun.com/Dialy/oAuth20181130.html</link><description><![CDATA[블로그에 댓글 기능의 요구 사항은 정리되었다. 다시 정리하면, 먼저 "우버 사이트의 무료 웹호스팅을 통해서 ajax로 댓글을 만든다. 중간에 로그인 인증은 구글 oauth를 사용한다." 이다.우선 웹호스팅의 데이터베이스 설계를 하기 전에 무슨 데이터를 취급하는지 조사를 할 필요가 있다. 댓글이니 우선 댓글 내용이 필요하고 어떤 url의 댓글인지 key가 필요하고, 또 누가 댓글을 썼는지 아이디의 정보가 필요하다.그중 아이디의 정보는 대형 포털사이트를 로그인하면 oauth2의 인증시스템을 통해서 로그인에 대한 키 정보를 알려주는 시스템이 있다. 다시 말하면 회원 관리를 굳이 만들지 않아도 로그인 기능을 지원해주는 서비스이다. 회원 정보의 이름이던가 이메일주소 등등이 있다. 다른 뉴스사이트 등은 동시에 여러 인증을 사용하는데, 나는 그냥 구글 인증만 사용할 생각이다. 왜냐하면, 여러 개 관리하기도 귀찮고 나중에 지역화(localization), 다시 말해 일본어 버전, 영어 버전도 만들 생각이다. 그때 네이버나 다음의 포털사이트는 일본이나 미국에서는 사용하지 않기 때문에 필요가 없다. 또 블로그 시스템을 언어별로 각기 개발하기보단 하나의 시스템으로 통합 관리하고 싶으므로 세계적으로 가장 많이 사용되는 구글 인증을 사용할 생각이다.또 나만의 생각일 지도 모르겠는데 많은 유저들이 google 아이디 하나쯤은 가지고 있을 거라는 추측이 있기 때문이다. 왜냐하면, android의 playstore를 사용하려면 구글 아이디가 필요하므로 많은 유저가 가지고 있을 거라 생각된다.우선 구글 api를 뒤적뒤적 찾아보았다.https://developers.google.com/identity/sign-in/web/위 링크를 통해 접속해보니 딱, 내가 필요한 소스가 예제로 작성까지 되어있다. 보아하니 브라우저에 구글 아이디가 로그인되어 있으면 onsignin의 함수가 실행되고 아니면 실행이 안 되는 구조이다. 그러나 로그인이 되지 않았을 때 실행이 안 되는 건 조금 문제가 있을 것 같다. 왜냐하면, 로그인이 확인된 것은 내가 쓴 댓글과 댓글을 작성할 때 필요하지만, 로그인이 안 되어있을 때는 댓글을 쓰는 텍스트박스와 버튼을 모두 disabled 할 생각이다. 그런데 이벤트가 없다니 어떻게 해야 할지...그래서 뒤적뒤적 찾아보니 스택 오버플로우에 나와 같은 고민으로 올린 글을 발견했다.https://stackoverflow.com/questions/31331428/how-to-call-getbasicprofile-of-google-to-google-signin-on-only-button-click이 두 소스를 응용해서 사용하면 내가 원하는 구조가 나올 것 같다.다시 머릿속으로 구조를 정리해 보았다.먼저 페이지가 load 할 떄 구글 로그인이 되어있으면 등록할 수 있는 텍스트 박스, 그리고 다른 댓글에는 replay 달기 버튼이 추가되고, 내가 작성한 댓글에는 수정과 삭제까지 가능하도록 동적으로 버튼을 만든다. 다음은 로그인되어 있지 않을 때는 로그인을 요구하는 구글 버튼이 보이고 등록하는 텍스트 박스는 disabled 해버린다. 다른 댓글에도 replay 달기 버튼을 모두 숨기고, 당연히 로그인되어 있지 않으니 모든 댓글은 수정과 삭제 버튼이 숨겨져 있어야 한다. 그리고 댓글에서 로그인해서 수정하거나 삭제, 등록하게 되면 ajax를 통해 서버 단(php)로 정보를 송신한다. 그리고 서버단(php)에서는 수정하거나 삭제, 등록하는 처리하는 웹페이지를 통해 처리하면 된다.그럼 구성은 어느 정도 완료가 되었고 데이터베이스를 설계하기 위해 데이터는 무엇이 있는지 조사해야겠다.id 가 있고, full name, email, token 등이 있다. 여기서 제가 필요한 데이터는 id와 email 뿐이다. 다른 건 필요 없다.여기까지 했으면 oauth의 조사는 끝났다.여기까지 했으면 oauth의 조사는 끝냈습니다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/oAuth20181130.html</guid><pubDate>Fri, 30 Nov 2018 01:09:33 GMT</pubDate></item><item><title>[블로그 구축 10일 차] 소스 코드 보기 Grid 부착하기 highlight.js</title><link>http://www.nowonbun.com/Dialy/highlight20181128.html</link><description><![CDATA[댓글 기능 만들다가 갑자기 다른 방향으로 좀 튀었다. 앞으로 댓글 기능을 만들다가 포스팅을 하기 위해서는 소스 내용이 조금 첨부가 돼야 할 것 같아서 급히 오픈소스를 추가했다.소스 코드 보기 grid가 무엇이냐면 프로그램 개발업계에서 일하고 있는 사람들은 웹 게시판에 글을 작성하다가 보면 간혹 소스코드를 올릴 때가 있다. 근데 소스코드를 덩그러니 게시가 되면 가장 기본적인 코드 라인이던가 코드 색깔 등이 보이지 않는다. 간단히 말해, 우리가 쓰는 ide 툴처럼 소스가 보이지 않고 메모장에 작성한 것처럼 보인다. 그렇게 하면 게시한 사람도 소스가 지저분해 보이고 보는 사람도 한 번에 분석하기가 힘들다. 흔히들 가독성이 떨어진다고 이야기하는 것이다.그래서 오픈소스 중에 highlight.js가 있는 데 오픈 소스를 link를 하고 pre 태그 안에 소스를 작성해 놓으면 소스가 깔끔하게 보인다. 간단히 말해 아래와 같이 보이게 된다.딱 보기에도 보기 편해 보인다. 그럼 지금부터 제 블로그에 부착할 생각이다.highlight 홈페이지에 접속해서 사용법을 조사했다.https://highlightjs.org/usage/들어가 보니 내용이 엄청나게 심플하다. 그냥 pre 태그 안에 code 태그를 작성하고 넣으면 되는 구조다. 그러나 직접 결과 확인해 보니 내가 상상한 모습의 결과물이 아니다.내가 생각한 모습은 줄번호도 있고 좀 더 심플한 모습일 거라 생각했는데.. 그래서 다시 구글링하다가 어떤 고수가 highlight에 대해 포스팅을 해놓은 글이 있다.참조 - http://lerv.me/25그 글의 내용은 highlight는 줄번호를 지원하지 않는다고 한다. 예전에 내 기억으로는 되었던 거로 기억하는 데.. 다시 블로그를 자세히 읽어보니 누군가가 github 줄번호가 나오게끔 하여 놓았다고 한다. 그래서 github에 접속해서 확인해 봤다.https://github.com/wcoder/highlightjs-line-numbers.js/tree/master/src이번에는 줄번호가 나오긴 하는데... 나오기는 하는데... 또 내가 상상했던 그런 모습이 아니다.그래서 내가 직접 소스를 열고 확인해서 수정했다.

원래 타이틀 영역은 없었는데.. 제가 만들었습니다. 그리고 테두리도 심플하게 보라색으로 하고 번호와 소스간에 여백도 조금 넣었습니다.이제야 내가 원하는 스타일로 나왔다. 이제 이걸 써서 코드 게시를 해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/highlight20181128.html</guid><pubDate>Wed, 28 Nov 2018 23:20:06 GMT</pubDate></item><item><title>[블로그 구축 9일 차] 블로그 댓글 기능 추가 - 1 (요구분석)</title><link>http://www.nowonbun.com/Dialy/CommentSystem20181127.html</link><description><![CDATA[이제 블로그를 시작한 지 약 1주일 정도가 지났는데.. 아직 글이 어수선하다. 이번 블로그는 기술적인 내용은 생략하고 내가 프로그램 개발을 하면서 생기는 문제점과 고민을 적어서 공유하려고 했는데. 글솜씨던가 내용적인 면에서 아직 부족한 게 많다. 최근에는 블로그를 어떻게 만들어야 할까? 프로그램을 어떻게 개선해야 할까보다 글을 어떻게 써야 할까 하는 고민이 더 많은 것 같다. 아직 시작이기도 하니 시간이 지나면 조금 나아질까?이번 포스트부터는 블로그 댓글 기능을 달아볼 생각이다. 예전에 이야기했듯 내 블로그는 블로그 호스팅이나 웹호스팅에서 구축한 것이 아니다. 그러다 보니 동적 웹 시스템이 개발되지 않고 오로지 정적으로만 개발되는 형태이다.(정적 페이지라는 것은 html로 전개된 웹사이트입니다.) 그러나 포스트의 내용 같은 경우는 한번 작성만 하면 그다음부터는 수정할 내용이 거의 없으므로 정적으로만 해도 크게 힘들 것은 없는데, 문제는 댓글을 어떻게 처리할지 문제이다.댓글의 경우는 내가 작성하는 것이 아니고 내 블로그 글을 보는 불특정 유저가 글을 보고 밑에 코멘트를 작성하는 형태이다. 그러면 먼저 제일 필요한 것이 유저가 댓글을 작성할 수 있는 텍스트 박스가 우선 필요하다. 그리고 텍스트 박스에 글을 쓰고 저장하게 되면 그 내용을 받는 서버와 데이터베이스가 필요하다. 최종적으로 다시 저장된 내용을 해당 블로그 밑에 표시가 되어야한다.여기서 내가 구성하는 형태는 github 내에서는 데이터베이스가 없으므로 어떻게든 해결이 되지 않는다. 뭐 자바스크립트 내에서 github의 pull push가 가능하게 프로그래밍하면 가능하려나.. 가능하다고 하더라고 github 아이디를 가지고 있어야 하고 pull, push를 해서 모든 코멘트를 유저의 컴퓨터에 저장해야 하는 말도 안 되는 상황이 된다. 그럼 어떻게 해볼까 고민하던 중에 ajax로 데이터베이스가 있는 다른 웹 서버에서 하면 어떨까 생각해봤다. 형태는 php + mysql가 좋겠다.그럼 php + mysql의 형태로 호스팅하는 데를 찾아보니 무료로 호스팅을 제공하는 업체가 꽤 있다. 그중 내가 살펴본 무료 웹 호스팅은 우비라는 곳이다.무료로 제공하는 옵션은 다음과 같다.하드용량 100m - 나는 ajax가 가능한 페이지만 만들 생각이기 때문에 그렇게 많은 하드 용량은 필요없다.트래픽량 100m - 역시 json형태의 데이터만 주고받기 때문에 트래픽도 제약이 있어도 상관없다.mysql 무제한 제공 - 오... 이게 최고다.일일 히트 수 1만 - 이게 조금 걸리는 부분인데 1만 히트면 일단 1만 접속까지 제공하는 건데.. 아직은 1만은 꿈같은 이야기이니 그건 그때 가서 생각하는 게 낫겠다.웹 호스팅은 정해졌고 이제 어떻게 작성할 생각이냐면, 어차피 댓글 내용은 검색엔진에 걸리지 않아도 되는 영역이다. 그러니 꼭 정적으로 html에 넣을 필요 없이 동적으로 html를 작성해도 상관없다. 그럼 각 post 페이지에 ajax를 이용해서 위 댓글 사이트에 접속해서 url를 키로 댓글 데이터를 가져오면 된다. 그리고 가져온 댓글 데이터를 jquery의 append 함수를 이용해서 동적으로 생성되게 만든다. 아! 그리고 익명은 제한하고 구글의 oauth인증을 써서 로그인한 유저가 댓글을 작성할 수 있게 하면 된다.이렇게 하면 댓글 기능이 만들어질 수 있을 것 같다.우선! oauth 조사(아이디 키?)를 해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/CommentSystem20181127.html</guid><pubDate>Tue, 27 Nov 2018 23:04:36 GMT</pubDate></item><item><title>[블로그 구축 8일 차] 블로그 최적화 2 (Open graph)</title><link>http://www.nowonbun.com/Dialy/Opengraph20181126.html</link><description><![CDATA[나는 검색엔진에 필요한 매타태그를 블로그에 장착했다. 그러나 아직까진 갑자기 검색엔진에 상위 랭크되는 로또가 발생하진 않았다. 일단 블로그의 대표 url로 되는 사이트에 결정적인 글의 수가 매우 부족한 게 원인이라고 생각된다. 같은 대표 url(canonical 태그) 혹은 sitemap이나 rss에 적어도 글이 100개 정도 돼야 상위 랭크는 아니어도 조금씩 보이기 시작할 것이다. 내 경험상.. 예전에 tistory에서 운영할 때는 그랬던 거로 기억한다. 그렇다고 한 번에 포스트를 밀어 넣으면 스팸 사이트로 인식해 버리니 역시 시간이 많이 필요한 작업이다. 신문이나 뉴스사이트는 어떨까? 거기는 하루에도 수십 건의 기사가 올라오는데 검색엔진에 잘 검색되는 것 같은데.. 경험이 부족한 나는 아직 여러 테스트를 해봐야 알 것 같다.오늘은 이전과 같이 매타태그를 등록하는 건 같은데, 검색보다는 편의를 위한 매타태그를 작성할 생각이다. 일단은 이 부분도 검색과 관계가 전혀 없는 건 아니다. 사이트에 open graph가 등록되어있으면 웹 마스터로서는 사이트의 완성도가 높다고 판단하고 사이트 품질에도 점수가 꽤 올라간다.최근, it 접속 환경을 보면 예전 10년 전과 많이 다르게 모바일 사용이 많이 늘었다. 그리고 모바일을 통해 웹서핑하면서 좋은 글이 있으면 친한 친구나 지인에게 url 링크를 걸어서 알려주기도 한다.특히 카카오톡으로 url를 찍어서 보내면 링크 미리 보기 화면이 나오는데 이미지가 깨끗하게 나오는 때도 있는가 한편 이상한 이미지가 깨지거나 요약 글도 엉성하게 표시되는 때도 있다. 이것이 open graph를 설정했는지 안 했는지의 차이가 된다.나는 아직 open graph를 등록시키지 않아서 블로그의 미리 보기가 엉망으로 나오는 걸 확인할 수 있다.즉, open graph는 대표 이미지와 요약 글을 알려주는 태그이다. 먼저 open graph 태그가 무엇이 있는지 조사해 보았다.http://ogp.me/나는 open graph 태그를 전부 다 사용할 건 아니고, 필요한 것만 쓰면 될 것 같다.og:title - 표시될 제목이다.og:description - 요약내용이다.og:url - 대표 url이다.og:site_name - 키워드를 입력하는 것같다.og:type - 사이트 타입이다. 이 경우는 블로그라는 타입이 없으므로 article을 넣을 것이다.og:image - 미리 보기에 표시될 이미지이다.og:image:type - 이미지 타입이다.(예: image/jpeg)og:image:width - 이미지 너비 사이즈이다.og:image:height - 이미지 높이 사이즈이다.og:image:alt - 이미지 설명이다.그 외에도 많은 태그가 존재하는데 나는 더는 필요 없다.. 그리고 블로그에 태그를 설정했다.우와... 예상은 했지만 이렇게 깔끔하게 나오니깐 또 블로그가 성장한 느낌이 든다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/Opengraph20181126.html</guid><pubDate>Mon, 26 Nov 2018 23:01:54 GMT</pubDate></item><item><title>[블로그 구축 7일 차] 에디터 수정하기 (SummerNote Image 입력 태그 수정...)</title><link>http://www.nowonbun.com/Dialy/SummerNoteModified.html</link><description><![CDATA[이번에는 블로그를 작성하는 에디터를 수정할 생각이다. 이게 버그는 아니고 opensource 사양이 내가 현재 사용하는 블로그의 사양과 조금 차이가 있어서이다.아래의 이미지는 먼저 내가 사용하는 블로그 에디터이다.내가 사용하는 에디터는 summernote라는 에디터 오픈소스입니다.https://summernote.org/잠깐 summernote에 대해 소개를 하면, 많은 사람이 웹이라는 환경을 통해서 글을 작성하고 읽고 정보를 공유하는 데 많이 사용한다. 그냥 글을 작성하는 데는 웹 태그인 testarea를 많이 사용하지만, 글에 효과를 주기 위해서는 무언가 부족함이 있다. 그 글의 효과란 글자마다 폰트사이즈와 폰트를 달리할 수 있고, 사이즈를 변경할 수 있으며 링크를 달거나, 이미지까지 넣을 수 있는 에디트를 말한다. 흔히 리치 텍스트 박스 또는 wysiwyg 에디터라고도 이야기한다.인터넷이 찾아보면 많은 에디터 소스가 있다. 물론 가장 좋은 건 유료 에디터 소스가 가장 좋지만, 내가 유료를 쓸만할 정도의 여유는 없으니, 무료 오픈소스을 검색했다. 그렇게 무료 오픈소스를 찾던중 summernote 에디터가 가장 깔끔하고 괜찮게 보였다. 예전에는 fckeditor가 많이 사용했던 거로 기억하고 나도 그 에디터를 많이 사용했는데, 최근에는 업데이트도 없어서 흥미가 가지 않았다. 그에 반해 summernote는 최근까지 업데이트가 있고 꾸준히 버그 리포트등도 있으므로 사용하면서 문제점이 발생해도 대응할 수 있다.내가 인식하는 에디터의 문제점을 찾아보았다. 사실 문제점이나 버그가 아니고 내가 사용하는 사양에 대해 조금 버전 업을 하는 것이다.에디터를 살펴보면 이미지를 삽입할 수 있는 버튼이 있다. 이미지를 삽입하면 이미지 태그가 자동 생성된다.이미지 태그가 잘못되지는 않았는데.. 지금 블로그에서는 태그에 몇 가지 class가 추가가 되어야 한다.그럼 내가 해야 할 목표는 찾았고 어떻게 해야 할지 확인해 보았다. 먼저 min형태의 압축된 코드가 아닌 일반 소스를 다운 받아서 찾아 확인했다. summernote.js의 소스는 약 5000줄의 javascript이다. 뭐 그렇게 많은 소스는 아니지만, 우리가 img 태그하나 고치자고 4000줄 소스를 다 뒤지거나 디버깅을 할 수 없다.그렇다면 어떻게 인식하는 게 좋은지 생각해보았다. 모든 프로그램은 표준 코딩방식이 있고 디자인패턴이 있으므로 특이하게 작성할 리는 없다. 그렇다면 내가 이미지 버튼을 누르고 이미지를 누르면 이미지 태그가 생긴다는 것을 확인할 수 있다. 그럼 조금은 찾기 쉬운 방식으로는 이미지 버튼 클릭 이벤트를 찾아보는 게 빠르겠다고 판단했다.그냥 단순히 img로 해서 글자 열 검색을 해보았다. 그랬더니 이벤트 관리 함수가 한 번에 나왔다. 그리고 나는 image size를 넣는 부분을 제거하고 div를 생성하고 class를 넣었다.이번에도 크게 어려운 부분이 없어서 간단하게 수정할 수 있었다. 그래도 버그 수정과 다른 점은 내가 만든 소스가 아닌 오픈소스를 수정했다는 것이다. 사람들은 오픈소스나 표준소스를 수정하기 두려워하는 사람들이 많다. 물론 상용 중인 시스템 내의 오픈소스를 수정하는 것은 리스크가 매우 큰 일이다. 왜냐하면, 오픈소스를 사용하는 레퍼런스들은 대부분 테스트가 검증된 소스들이기 때문에 수정한다는 것은 많은 부분을 테스트해야 한다는 조건이 따른다.그러나 반대로 오픈소스라도 버그가 없다는 것을 100% 확신할 수 없으므로 표준 코딩방식과 디자인 패턴을 익혀서 많은 소스를 읽을 수 있는 능력을 더 훈련해야 겠다. 좀 더 어려운 문제가 생기면 좋겠다..그래야 조금 더 많은 것을 해볼 수 있지 않을까? 버그가 발생하면 안 되지만..]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/SummerNoteModified.html</guid><pubDate>Sun, 25 Nov 2018 23:19:03 GMT</pubDate></item><item><title>[블로그 구축 6일 차] 중간 버그 수정(IE 대응, Image, 매타태그 에러, 추가사항)</title><link>http://www.nowonbun.com/Dialy/04befa464ea84cb69ccd2706cdfdc425.html</link><description><![CDATA[원래는 블로그 최적화를 끝내고 나서 버그 수정을 하려고 했는데 너무 눈에 거슬리는 버그가 많아서 버그 수정을 먼저 했다.지금 파악한 버그 내용은 ie 브라우저에서 내 블로그를 접속했을 때다. 지금 블로그의 경우는 chrome을 주요 툴로 이용하고 있으므로 화면이 chrome에 최적화가 되어있다.chrome을 주요 툴로 이용하는 이유는 chrome 사용자가 예전보다 늘었기 때문이다. 여러 기사에서는 한국의 경우는 인증서 제도 때문에 아직 ie를 사용하는 경우도 많다고 한다.나는 ie는 주요 툴로 이용하기에는 너무 느리게 느끼고 firefox보다는 많이 사용하는 chrome을 선택했다.그러나 chrome을 최적화라고 생각한다고 해서 safari나 ie를 무시할 수 없으므로 중간중간 다른 브라우저도 확인하면서 디자인이 제대로 되나 확인해야 한다.그러다가 어제 ie에서 접속하던 중 밑의 최신 글 항목에서 chrome과 다른 형태의 디자인을 발견했다.원인은 bootstrap의 row class 때문인데. 이게 li 태그 안에서 chrome과 ie에서 동작하는 형태가 다르다... 일단 확인이 되었으니 수정했다.그다음은 image인데..현재 블로그 안에서 모든 image는 680 x 340의 형태로 고정이 되어있다. 모바일에서는 확대 축소가 pc보다는 쉬우므로 확대해서 보기 쉽지만, pc의 경우는 그게 쉽지가 않기 때문에 조금도 보기 쉽게 수정할 필요가 있었다.w3school 사이트에 가보니 bootstrap으로 된 예제 소스가 있다.https://www.w3schools.com/howto/howto_css_modal_images.asp이걸 그대로 쓰기에는 나와 환경이 다르므로 자바스크립트를 수정했다.위 이미지를 클릭해보면 이미지가 확대되어서 보이는 것을 확인할 수 있다.그리고 네이버 웹 마스터에서 메타테그가 에러가 나는 것을 확인했다.이게 내가 메타태그 사양을 잘 못 이해해서 발생한 에러이다. 내용은 제한 글자 수가 초과이다.나는 description 태그에 본문 내용을 전부 넣으면 좀 더 검색엔진에 좋을 것 같다는 생각이 들어서 입력한 것인데 오히려 에러가 발생했다.리스트에서는 컴파일러에서 정한 데이터를 넣었는데...수정내용은 포스트 태그에도 리스트와 같이 정한 데이터를 넣으면서 해결되었다.홈페이지는 수정은 완료했지만, 웹 마스터의 재등록은 아마 시간이 걸린다.블로그를 시작하고 첫 버그 수정이었다. 워낙 간단한 버그 수정이라 금방 해결했다. 아직은 개발진행에 순조롭다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/04befa464ea84cb69ccd2706cdfdc425.html</guid><pubDate>Sun, 25 Nov 2018 00:30:50 GMT</pubDate></item><item><title>[블로그 구축 5일 차] 블로그 최적화 1 (매타태그)</title><link>http://www.nowonbun.com/Dialy/c2a8d6de887a4f399d4797e5ca05ecf5.html</link><description><![CDATA[애널리틱스를 블로그에 설치했고 웹 마스터에도 블로그를 등록했다.아직 네이버와 다음에 사이트 등록은 하지 않았다. 사이트 등록은 웹 마스터와 다르게 그냥 "이런 사이트가 있습니다" 하는 등록이다. 그것은 포스트 내용이 조금 늘어난 후에 등록해도 늦지 않기 때문에 일단 우선순위를 조금 미룰 생각이다.이제 다음은 이제 구글이나 네이버에서 크롤링을 좀 더 정확하기 위해 웹사이트에 매타태그를 붙이는 것이다. 매타태그란 사이트의 내용을 요약하는 태그이다.잠깐 나는 크롤링이 어떻게 움직일까 생각해 봤다. 아마도 배치프로그램 같은 형태로 포털사이트에 등록된 사이트의 주소로 httpconnection이나 http 랜더링 엔진(예: gecko)를 통해 웹페이지를 수집하지 않을까 예상한다.이때 내가 블로그 태그를 전부 div태그를 이용해서 글을 작성하면 크롤링은 내 블로그 페이지에 작성된 글에 대해 어떤 정보를 가졌는지 파악하기 어려울 것이다.검색 최적화 내용에 따르면 우선 중요한 태그는 title과 article 그리고 h1~h6이다.title 태그는 브라우저의 창에도 표시되는 만큼 가장 중요하고 article은 기사의 내용 영역이라고 지정하는 것이고 부제목 역할을 하는 h1~h6이다. 그래야만 크롤링이 내 블로그를 스크래핑할 때 여기 영역은 포스팅 글이구나 또는 제목이 구나를 인식할 수 있다.그리고 나서 크롤링이 글들을 수집해서 분석까지 해주면 너무너무 좋겠지만, 현실적으로 세계에 퍼져있는 사이트가 엄청 많으므로 분석하기야 하겠지만, 시간이 오래 걸릴 것이다. 특히, 내 블로그 같은 경우는 이제 시작한 시기이기 때문에 우선순위가 매우 낮아서 분석하지 않을 가능성도 매우 크다. 다시 말해, 제 블로그가 매우 높은 트래픽을 유지하면 구글이나 네이버로서도 신경 쓰면서 분석을 해주겠지만, 지금 시점은 아니란 소리다.그래서 나는 크롤링이 좀 더 분석하기 쉽게 하기 위해 어느 정도 글 요약을 해줘야 한다.그 태그가 canonical, alternate, description, keyword, author, distribution, copyright, robots 태그이다.먼저 canonical은 대표 url 넣는 곳이다. 내 블로그만 보더라고 각 페이지마다 고유의 url 주소가 있다. 이렇게 각기 url이 있지만, 기본 호스트 주소가 있기 때문에 크롤링이 각기 다른 사이트로 인식하지는 않지만 그래도 명시를 해주면 빨리 인식을 할 수 있다.alternate의 경우는 rss나 sitemap의 링크 url 주소이다. 웹 마스터에 등록은 했지만 그래도 크롤링에게도 직접 알려주었다.description는 블로그의 본문 글의 요약 글이다. 이건 rss에서 썼던 description에 들어간 값이랑 같은 값을 넣었다.keyword는 검색엔진에서 좀 더 검색키워드로 캐치할 수 있게 하는 키워드 목록이다.author는 작성자태그이지만 나는 내 email 주소를 넣었다.distribution, copyright는 그렇게 중요하지는 않지만 일단 똑같이 email을 넣었다.robots는 크롤링의 허용태그인데.. 저는 무조건 all로 설정했다.이렇게 작성해 놓으면 크롤링이 내 블로그를 검색할 때 좀 더 정확하게 또 따로 분석이 없이 빠르게 검색엔진에 등록된다.실제는 어떨까요? 시간을 두고 하나하나 실험을 해봐야겠다.아직 방문자가 0이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/c2a8d6de887a4f399d4797e5ca05ecf5.html</guid><pubDate>Sat, 24 Nov 2018 00:46:01 GMT</pubDate></item><item><title>[블로그 구축 4일 차] 웹마스터 등록하기...(rss, sitemap)</title><link>http://www.nowonbun.com/Dialy/8b6c0fc7f7624c37a4e30d9e8e012230.html</link><description><![CDATA[앞에서 애널리틱스를 블로그에 붙였으니 이번에는 웹 마스터에 블로그를 등록할 생각이다. 애널리틱스는 방문객 접속 분석 툴이면 웹 마스터는 검색엔진에 내 사이트에 무슨 내용이 있다고 등록하는 것이다. 구글의 경우는 크롤링이라는 웹 수집기가 존재해서 따로 웹 마스터를 등록하지 않아도 시간이 지나면 검색엔진에 노출되고 검색된다. 그러나 그럴 경우 시간이 매우 많이 걸리기 때문에 나는 웹 마스터에 블로그를 등록할 생각이다. 그러면 크롤링이 좀 더 효과적으로 데이터를 수집하고 그 내용을 이용해서 검색엔진의 상단에 글을 올릴 수 있다.웹 마스터에 대해 구글 검색했다. 그 결과, 애널리틱스와 마찬가지로 많은 사이트들가 가장 많이 등록하는 웹 마스터는 구글이고 그다음이 네이버인 것 같다. 두 웹 마스터에 나는 sitemap과 rss를 등록할 생각이다. 먼저 sitemap을 살펴보면, sitemap은 내용의 정보보다는 사이트의 구조의 중심으로 되어있고 url, 중요도 등이 등록된 xml 문서이다.https://www.sitemaps.org/ko/protocol.htmlrss의 경우도 sitemap와 구조는 비슷하지만 sitemap보다는 조금 더 자세한 내용이 구성되어있다. 그 내용은 각 column에 description항목이 있고 각 사이트의 요약내용을 수집해 갈 수 있는 feed이다.https://validator.w3.org/feed/docs/rss2.html다시 sitemap과 ress 에대해 구글에서 검색해 보니 블로그 url를 입력하면 해당 블로그를 분석해서 sitemap과 rss를 자동으로 생성해주는 사이트도 있다. 그러나 나는 매일 글을 업데이트하는데 할 때마다 자동 생성 사이트에서 sitemap과 rss를 만드는 것이 시간이 더 걸리고 귀찮을 것같다. 나는 블로그 글을 github에 등록하기 위해서 html를 compile과 output을 해주는 배치프로그램이 있다. 그 배치프로그램에서 html를 생성할 때 rss와 sitemap도 같이 생성하게 하면 따로 sitemap과 rss를 자동 생성 사이트에서 생성하지 않아도 rss와 sitemap을 만들 수 있다.내 compile과 output을 해주는 배치 프로그램의 url주소는 다음과 같다.https://github.com/nowonbun/blogcompiler프로그램 구조를 간단히 살펴보면, entity 프레임워크로 데이터에스에서 데이터를 읽어드려서 html로 변환한다. 거기에 rss와 sitemap.xml형식에 맞게 파일 한두 개 추가하는 건 간단히 할 수 있다.프로그램 작성은 끝났고 이제 실제 github에 등록시키고 제대로 나오는지 확인해 봤다.sitemap - http://www.nowonbun.com/sitemap.xmlrss - http://www.nowonbun.com/rss이제 나는 이것을 가지고 구글과 네이버 웹 마스터에 등록까지 완료했다.웹 마스터라는 것은 rss를 등록한다고 바로 검색엔진에 상위 랭크되고 최적화가 이루어지는 건 아니다. 단지 크롤링이 작업하는 데 도움이 되는 것일 뿐.그러니 등록을 한다 해도 블로그 글들이 검색엔진에 보이기까지는 시간이 조금 걸리지 않을까..참고로 아직까지 검색엔진을 통한 방문객은 현재 0이다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/8b6c0fc7f7624c37a4e30d9e8e012230.html</guid><pubDate>Fri, 23 Nov 2018 00:00:00 GMT</pubDate></item><item><title>한국어 맞춤법/문법 검사기</title><link>http://www.nowonbun.com/Favorites/speller20181122.html</link><description><![CDATA[오늘 소개할 사이트는 맞춤법 교정사이트이다.http://speller.cs.pusan.ac.kr/나는 문서를 작성할 때 또는 블로그 포스팅을 작성할 때 등등, 주위에서 글을 작성할 때가 매우 많은 것 같다. 그런 상황에서 내가 작성한 글을 다른 사람에게 확인을 받거나 맞춤법을 검사받기가 쉽지 않다. 특히 블로그에 글을 쓸 때도 맞춤법이 맞는지 확인받고 싶은데 누구에게 매일 확인 받기도 쉽지 않다. 특히 내가 작성한 글에 틀린 점을 찾기도 어렵고 다른 사람에게 부탁하자니 모두 바쁘기도 하고, 나는 블로그에 매일매일 글을 올려야 하는 상황인데 매일 누군가에게 검사를 받는 환경을 만들기가 어렵다.맞춤법은 글을 쓸 때 매우 중요하다고 생각한다. 이유는 나는 누군가의 글을 읽을 때 오타를 발견하면 그 오타 때문에 신경이 엄청나게 쓰이고 그런 오타가 몇 개 이상 발견되면 갑자기 글의 흥미가 확 떨어지기 때문이다. 그래서 나는 기본 중의 기본, 잘해야 본전인 것이 맞춤법이라고 생각한다.그래서 나는 맞춤법을 검사해주는 시스템이 있지 않을까 생각하다가 찾은 사이트가 여기이다. (이 사이트가 딱히 명칭이 없어서 여기라고 표현했다.)처음 여기 접속했을 때는 다른 사이트처럼 예쁜 디자인이나 광고 등은 전혀 없고 맞춤법 기능만 있는 사이트라는 점이 매우 인상적이었다. 나는 오히려 이런 사이트들이 기능에 더 충실하다고 생각하는 고정관념이 있다. 아래에는 부산대학교 인공지능 연구실과 함께 만든다고 쓰여있는 것을 보니, 내 생각에는 문자 인공지능과 관련된 시스템인 것 같다.여기를 찾기 전에 구글에서 맞춤법 검사의 키워드로 검색했었다. 그랬더니 많은 맞춤법 교정 사이트가 검색되었다.. 특히 인크루트 등에서 많이 제공한다. 내 생각에는 이력서 쓸 때 아무래도 맞춤법이 중요하니깐. 각기 장점은 있겠지만 타 사이트는 수정만 해주고 무엇이 틀린 지 정확한 해설이 없다. 그러나 여기는 왜 틀린 지 해설도 해주는 것이 매우 인상적이다. 국어 공부할 때도 도움이 될 것 같다.그러나 여기 사이트도 장점만 있는 것은 아니다. 단점이라고 생각하면 한 번에 많은 글을 검사를 못 하는것 같다. 최대 1000자 내외 정도. 그래서 긴 글을 검사할 때는 나누어서 검사해야 하는 불편함이 있다.맞춤법을 한번 검사해 보았다.검사를 하게 되면 왼쪽에는 교정대상이 있고 오른쪽에는 교정설명이 있다. 교정 내용이 비교적 잘 설명이 되어있어서 맞춤법 공부하는 데도 도움된다. 한글 맞춤법이라는 게 공부를 해도 해도 틀리는 게 맞춤법이니깐...이렇게 소개했는데 많은 사람이 이 사이트를 잘 활용했으면 좋겠다는 생각이 든다.]]></description><category>즐겨찾기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Favorites/speller20181122.html</guid><pubDate>Thu, 22 Nov 2018 22:29:42 GMT</pubDate></item><item><title>[블로그 구축 3일 차] 블로그 분석 툴(애널리틱스) 구성하기...</title><link>http://www.nowonbun.com/Dialy/analytics20181121.html</link><description><![CDATA[먼저 이 아무것도 없는 블로그에 내가 해야 할 일은 애널리틱스를 설치하는 것이다. 애널리틱스란 블로그에 얼마나 많은 접속자가 어디에서, 몇 시에, 어느 페이지를, 어떤 경로로 들어오는지 확인할 수 있고 분석을 해 주는 툴이다. 애널리틱스를 통해서 내 블로그에 주요 접속하는 유저는 어떤 사람이고 어떤 글에 많은 흥미를 보이는지 분석할 수 있다. 그것을 통해 관련 글을 더 보강하고 또 확장해서 그와 관련된 사람들과 소통도 할 수도 있고 더 많은 유저를 유입을 시킬 수 있다.정리하면 애널리틱스를 통해 블로그를 어떻게 홍보할 것인지 어떤 방향으로 가야 할 것인지 생각할 수 있게 도와주는 툴이리고 생각하면 된다. 나는 따로 블로그를 홍보할 생각은 없지만 적어도 어떻게 유입이 되는지 알아야 나중에 검색엔진의 상단에 어떻게 올릴지 작전을 짤 수 있다.그럼 애널리틱스를 제 블로그에 설치를 시작한다. 구글에서 검색해 보니 애널리틱스는 구글과 네이버 애널리틱스에 대한 내용이 많다. 그중 구글 애널리틱스가 가장 많이 사용하고, 그다음에는 네이버 애널리틱스가 사용되는 것같다.. 다음은 애널리틱스가 없나요? 제가 검색해 본 결과에는 나오지 않네요.그럼 구글 애널리틱스를 먼저 설치하기 위해서 먼저 구글에서 애널리틱스를 검색해서 로그인한다.그리고 블로그 사이트를 등록하면 애널리틱스에서 3~4줄짜리 코드를 준다.그 코드를 블로그 사이트 최상단에 넣으면 된다. head 태그 맡으로...두번째 네이버도 설치하겠다. 네이버 애널리틱스도 구글에서 검색한다. 먼저 사이트 등록을 하면 구글처럼 분석 스크립트를 준다.나는 이 분석 스크립트를 head 태그의 google 애널리틱스 밑에다가 넣었다.그럼 구글 애널리틱스와 네이버 구글 애널리틱스에 대해 살펴 보면, 구글의 경우는 실시간, 잠재고객, 그리고 모바일에 대한 접속 정보도 있다.내 생각인데, 구글의 경우는 너무 많은 정보가 있지 않나 생각된다. 오히려 정보가 너무 많아서 사용하기 어렵다는 느낌이 강하다. 예를 들면 메뉴 중에 벤치마킹이 있는데 이것은 무슨 의미일까? 정작 내가 필요한 오늘 접속자와 시간별, 기기별 등의 내용인데 그 정보들은 어디 있는지 모든 메뉴를 찍어봐야 알 수 있다. 다음은 네이버 애널리틱스를 살펴보겠다.내용 자체는 굉장히 심플하다. 구글에서 내가 찾기 힘들다는 부분도 확실히 찾기도 쉽고 편리하다.　그러나 이건 역으로 정보가 상당히 부족하다는 느낌이 든다. 아직은 나도 네이버 애널리틱스를 많이 사용해 보지 않아서 어떤 게 더 편하고 좋다라고 비교하기가 힘들다. 한 6개월 이상 사용해보고 기회 있을 때 리뷰를 해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/analytics20181121.html</guid><pubDate>Wed, 21 Nov 2018 22:43:11 GMT</pubDate></item><item><title>이미지 용량 줄이는 사이트 - tinypng.com</title><link>http://www.nowonbun.com/Favorites/tinypng.html</link><description><![CDATA[오늘 소개할 사이트는 이미지 용량 줄이는 사이트이다.https://tinypng.com/나는 블로그를 운영하니깐 이미지 활용이 매우 많다. 그러나 내 생각에는 꼭 블로그 운영뿐 아니라 회사 문서를 작성하거나 프로젝트 과제 작성 등을 할 때도 많은 사람이 이미지를 꽤 사용한다고 생각한다.그러나 그 이미지들이 고품질의 고화질로 사용하면 매우 좋지만, 웹사이트이니만큼 용량과 속도에도 생각을 안 할 수 없다. 꼭 웹사이트가 아니더라도 문서를 작성하는데 용량이 큰 이미지를 첨부시키면 파일 용량이 100메가 이상이 된다. 이런 용량이 큰 문서를 열면 로딩 시간이 느려지고 메일 보내기 등 많은 부분에 제약이 걸리게 된다. 단지 이미지 한두 개 때문에..내 생각에는 이미지 품질은 사진 전시회를 하지 않는 이상 고품질, 고화질 이미지가 필요 없다. 이미지의 활용은 문서 내용을 조금 더 정확하게 전달하거나 글만 있는 문서는 읽으면 질리기 쉬운데, 그런 문제를 해결하기 위해 이미지를 사용하는 경우가 많다.그래서 이번에 소개할 사이트는 tinypng이다. tinypng사이트는 이미지 파일의 용량을 줄여주는 사이트이다. 그러나 이미지 용량 줄이는 파일은 png, jpg만 취급한다. 만약 bmp 등 다른 이미지 파일이면 png나 jpg로 변환시켜야 한다.먼저 테스트해 볼 이미지를 준비하고 용량을 줄여보겠다.테스트할 이미지의 용량은 230kb 정도이다.테스트 결과 거의 50% 이상 줄어 둔다.재미로 이렇게 용량이 줄어든 파일을 계속 변환시켜보면 이미지 용량이 계속 줄어든다.이미지 용량을 계속 줄이다 보면 이미지 화질이 많이 떨어질 거로 생각했었는데 눈으로 보기에는 그렇게 차이는 없어 보인다.그러나 크게 용량이 줄어든 것은 첫 번째뿐이다. 두 번째부터는 그렇게 많이 줄어든다는 느낌이 없다. 내 생각에는 두 번째 이상은 할 필요가 없을 것 같다.]]></description><category>즐겨찾기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Favorites/tinypng.html</guid><pubDate>Tue, 20 Nov 2018 22:35:11 GMT</pubDate></item><item><title>[블로그 구축 2일 차] 블로그 구성에 대해...</title><link>http://www.nowonbun.com/Dialy/BlogStructure20181119.html</link><description><![CDATA[앞 포스팅에서 문제점을 파악하고 우선으로 해야 할 일을 정했다. 그러나 내가 앞으로 블로그 구축이라는 프로젝트를 하면서 느끼는 점을 공유하기 위해서는 먼저 이 시스템에 관해 설명할 필요가 있을 것 같다.이 블로그(www.nowonbun.com)를 운영하는 웹호스팅은 github(https://github.com/)에서 운영하고 있다. github의 원래의 목적은 웹호스팅이 아니고 소스 버전 관리 툴이다. 소스 버전 관리란 svn과 비슷한 건데.. 우리가 흔히 프로젝트 할 때 커밋 또는 업데이트하는 툴이다.그래서 원래의 목적은 소스 버전 관리인데 github.com은 html을 올리면 웹호스팅 기능까지 제공한다.그런데 나는 좋은 웹호스팅, 블로그 호스팅이 있음에도 github.com를 선택한 이유는 예전 tistory와는 다르게 해외 트래픽도 꽤 안정적으로 빠르기 때문이다. tistory가 일본에서 접속하면 꽤 느리다. 구글 웹 마스터는 사이트의 접속 속도도 체크하기 때문에 한국 구글의 검색엔진에는 무난하게 상위 랭크가 되지만 외국에서는 상위 랭크가 잘 되지 않는다. 즉, tistory에서 영어로 된 블로그를 만들어도 국내에서만 검색이 되고, 일본 구글이나 미국 구글에서는 검색되지 않을 확률이 높다. 네이버 블로그는 이유는 모르겠지만, 정책이 그런지 구글에서 검색이 잘 안 된다.나의 계획은 처음에는 한글로 된 블로그로 시작하지만, 나중에는 영어, 일본어로 만들 생각이 있으므로 github.com에 자리를 잡았다. 그렇지만 github.com는 다른 사람에게는 추천할 만한 호스팅 사이트는 아니다. 왜냐하면, 일단 github에서 블로그를 운영하기 위해서는 git에 대한 지식이 없으면 절대 사용할 수 없다. 보통 개발자들은 프로젝트를 하기 위해 소스 버전 관리가 사용하기 때문에 경력이 조금이라도 있으신 사람들은 git를 무난하게 익히고 사용할 수 있다. 그러나 프로그램을 모르는 초심자들은 git를 사용하려면 몹시 어려울 것이다. 그리고 또 그것에 관해 공부해야 할 게 많기도 하다.그리고 git의 웹 호스팅은 다른 블로그 호스팅처럼 디자인 테마나 템플릿을 제공하지 않는다. 그래서 여기서 블로그를 하기 위해서는 처음부터 만들어야 한다. 이 블로그 역시 디자인부터 제가 다 만든 것이다. 그래서 처음 구축을 위해서 한 달정도의 시간을 소비했다. 그리고 여기까지 하기 위해서는 프로그램을 잘 아는 사람도 크게 제약 없이 구축이 가능하다. 그러나 git에서 블로그를 운영하기 어려운 이유가 데이터베이스가 없다. 그리고 웹호스팅도 web api 스크립트로 이루어진 동적 페이지가 아닌 오로지 html 정적 페이지이다. 즉, 데이터를 html형태로 변환해주는 툴을 만들어야 한다. 그 모든 걸 감수해서 만들어야 하므로 추천하지 않는다.나는 이 블로그를 구축하기 위해 로컬에서 글을 쓸 수 있는 에디터를 만들었고, html로 변환하는 compile 배치프로그램을 만들었다.이런 불편함을 감수하고서라도 github를 사용하고 아래에 내가 만든 에디터와 compile 배치프로그램 소스가 있으니 참고해 봐도 좋다.여기까지가 제 블로그의 구성에 대한 간략한 설명이었습니다.이런 불편함을 감수하고서라도 github를 사용해야 한다면 아래에 제가 만든 에디터와 output하는 배치프로그램 소스가 있으니 한번 사용해 보세요.[blogeditor]https://github.com/nowonbun/blogeditor[blogcompiler]https://github.com/nowonbun/blogcompiler이제 블로그 구성에 대해 이해했으니, rss와 sitemap.xml을 살펴보고 작성해야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/BlogStructure20181119.html</guid><pubDate>Mon, 19 Nov 2018 22:41:17 GMT</pubDate></item><item><title>[블로그 구축 1일 차] 현재 문제점 파악하기...</title><link>http://www.nowonbun.com/Dialy/BlogStart1.html</link><description><![CDATA[우선 일을 시작하면서 새로운 것을 만들 때는 그것을 왜 만드는지, 기존에 한 것을 수정할 때는 무슨 문제가 있어서 수정하는지를 파악하는 게 우선이라고 생각한다. 그래서 내가 가장 먼저 해야 할 일이라고 생각하는 것은 여기 블로그에 많은 방문객이 오고 오류도 없는 정상적인 블로그 사이트 버전을 만드는 것이 첫 번째 목표이다.먼저 여기 블로그의 플랫폼은 github라는 프로그램 소스 저장소에 html을 등록시켜 웹 호스팅으로 전환한 사이트이다. 이 시스템의 문제점은 웹서비스를 할 때 우리가 흔히 다루는 웹 애플리케이션 서버(was)가 아니라 단순 웹서버이다. 그러다 보니 동적 웹서비스를 구축할 수 없다. 그래서 이 시스템은 내 로컬 mysql에 포스트 내용을 editor 프로그램으로 글을 등록을 시키고 compile하는 프로그램으로 데이터를 가져와서 html을 생성한다. 그리고 생성된 html을 github에 커밋을 해서 운영하고 있다. 그렇게 사용하기 불편한 github 호스팅을 사용하는 이유는 트래픽 속도 때문이다. 현재 내가 알고 있는 플랫폼 중에는 google blog과 github가 가장 빠른 것 같다. 예전 티스토리에서 운영을 할 때 한국에서는 문제가 없었다. 티스토리가 국내에서는 빠르기 때문이다. 그러나 지금 내가 구상하고 있는 블로그는 한글뿐 아니라 일본어, 영어로도 작성할 계획이 있으므로 외국 트래픽도 신경을 안 쓸 수가 없다. 구글은 트래픽의 속도로도 검색순위를 평가하기 때문이다.그래서 github를 사용하기로 했는데 문제점은 보통 블로그 플랫폼에서 제공하는 기능이 github는 하나도 없다는 게 문제다. 그 뜻은 내가 일일히 다 설계해야 하고 화면 디자인해야 한다. 그중 가장 빨리해야 할 일은 구글과 네이버의 아날리틱스, 웹 마스터 등록, 댓글 기능 추가를 해야한다..그 중에서도 웹 마스터를 가장 먼저 해야 한다. 웹 마스터 등록을 하는 이유는 검색 포털 시스템에 제 블로그를 노출하기 위해서이다. 내가 고민해서 쓴 글들이 아무도 읽지 않는다면 의미가 없으니깐. 그래서 포털 사이트의 검색엔진에 등록을 시키는 작업이 웹 마스터 등록이다.먼저 대표적인 검색 포털 시스템인 구글의 경우는 sitemap.xml를 등록하면 웹 마스터에 등록된다. 그러나 네이버의 경우는　sitemap.xml과 rss를 제출해야 한다. 구글도 rss를 제출해도 되긴 하는데, rss에 대해서는 반영이 잘 안 하는 것 같은 느낌이 든다. 그리고 도움말에는 sitemap.xml을 제출하라고 설명되어 있으니 그대로 하는 게 좋을 것 같다.아날리틱스는 접속 현황을 분석할 수 있는 도구다. 이 도구도 구글과 네이버가 둘 다 존재합니다만 이상하게 서로 제출되는 데이터는 항상 다르다.왜 그랬는지 예전에 알고 있었는데 지금은 기억이 나질 않는다. 그래서 두 개를 등록시키면 서로간의 부족한 부분이 보안이 되었던 건 기억을 한다. 블로그가 다시 커지면 분석해봐야겠다.내가 왜 이 두 작업을 가장 먼저 하는가 하면, 2년전에 나는 일본 블로그를 운영한 적이 있다. 그때 초창기에 웹 마스터를 등록하지 않고 블로그를 운영했다. google blog여서 자동으로 될 줄 알았다. 그러나 2~3개월 운영을 한 후에 google blog여도 따로 등록을 해야하는 것을 알고 등록을 했었다.처음에 웹 마스터를 등록하지 않았는데 구글 크롤링이 어떻게 탐색한 것인지 모르겠지만, 구글 검색에 노출되기 시작했었다.　그러고 나서 웹 마스터에 등록해야겠다고 알아차렸을때 웹마스터에 sitemap.xml을 제출했었다. 그런데 갑자기 이전에 조금씩 노출되기 시작하던 검색 결과가 없어져 버렸다. 그것에 관해 이리저리 검색했는데도 명쾌한 답을 주는 곳도 없고..내 생각에는 검색엔진에 웹 사이트에 대한 검색 노출 데이터? 인텍스?가 따로 있는 거 같은데 웹 마스터를 등록해서인지 검색 데이터가 초기화되어 버린 느낌이 들었다. 어쨌든 검색엔진에서 블로그 노출이 조금씩 되던 것이 갑자기 되지 않다 보니 순간 흥미를 잃어버리고 그대로 포기해 버린 뼈아픈 기억이 있다.그래서! 이번에는 웹 마스터부터 등록해서 나중에 검색엔진에서 갑자기 빠져버리는 현상을 방지하기 위해 최우선의 작업으로 결정했다.이제 sitemmap.xml 구조를 살펴봐야겠다.]]></description><category>개발일기</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/Dialy/BlogStart1.html</guid><pubDate>Mon, 12 Nov 2018 23:27:49 GMT</pubDate></item><item><title>블로그를 다시 시작하며...</title><link>http://www.nowonbun.com/index.html</link><description><![CDATA[나는 예전에 명월일지(http://nowonbun.tistory.com) 의 블로그로 활동했었다. 약 4년 만에 블로그를 다시 시작하는 것 같다. 처음 약 10년 전에 네이버에서 첫 블로그를 시작했고, 6년 전에는 티스토리로 옮기고 활동하다가 4년 전부터는 글을 거의 작성하지 않기 시작하며 활동을 접었다. 가끔 티스토리에 포스트 댓글이 달리거나 메일이 오면 답신을 했지만, 글을 올리는 게 없다 보니 접은게 맞다. 활동이 없다 보니 관리도 소홀해지고 디자인도 점점 엉망진창이 되면서 블로그도 망가지면서 현재에 이르게 되었다. 마음 같아서는 예전에 공들여서 만든 블로그를 다시 살리고 싶은데, 지금으로써는 어떻게 해야 할지 엄두가 나지 않는다. 그래서 고민한 결과, 우선 명월 일기라는 타이틀로 블로그를 다시 시작하고 예전의 블로그를 조금씩 조금씩 수정하면 어떨까 하는 생각으로 이 블로그를 시작하게 되었다.일기와 일지의 어감이 발음이 비슷하면서도 의미상으로 차이가 있다. 일기는 활동한 일에 대한 느낌과 감정을 작성하는 것이고 일지는 업무 등의 중요한 일을 좀 더 객관적으로 작성하는 것이지 않을까 싶다. 나의 생각이니 다를 수도 있다. 이렇게 생각해 보니 10년 전에 첫 블로그를 시작했을 때가 생각난다.원래 블로그를 시작하게 된 배경은 처음 사회생활에 시작할 때였다. 나름 대학교 전공으로 프로그래밍에 자신 있다고 생각했으나, 현실 실무에서는 대학에서 배우던 방식으로 흘러가지 않고 어떻게 보면 비효율적으로 그러나 매우 생산적인 형태로 프로젝트를 한다고 느끼게 되었다.그래서 실무 프로그래밍이던가 실무적인 프로젝트 등을 공부하려고 했으나 그런 부분은 따로 정리해 둔 책도 없고 들을 수 있는 것은 선배의 조언뿐인 현실에서, 내가 블로그로 정리해 보면 어떨까 하는 생각으로 시작했던 것 같다.그와 더불어 업계의 선후배들과 가능하면 많은 교류 하면서 빠르게 배우고 의견을 주고받고 싶다는 생각으로 시작했던 것 같다. 그러나 블로그라는 게 시작하게 되면 아무래도 방문 접속자 수를 신경 안 쓸 수가 없어지고, 그러다 보니 빠른 속도로 포스트 내용을 업데이트하다 보니 강좌 같은 내용으로 포스트를 채워 버렸다.나는 처음에는 원래 cs 개발자였다. 지금은 cs 개발보다는 웹 개발 비중이 월등히 높지만, 블로그를 운영하면서 웹이라는 것을 알게 되었고 그래서 웹 프로그래밍을 공부하고 나중에는 검색 최적화, http 규약 등 많은 것을 배우는 계기가 되었다. 지금 생각해보면 블로그를 통해 꼭 소통만이 아닌 개인적인 스킬 향상에도 많은 도움이 되었던 것 같다. 그러나 예전 블로그의 현재 상태를 보니 한숨만 나올 정도로 엉망진창이 되었다. 이번에는 블로그를 다시 시작한 만큼 끝까지 해볼 생각이다. 그 끝이 어디까지인가가 궁금하지만..그리고 블로그의 타이틀처럼, 일지가 아닌 일기의 형식으로 개발하면서 느끼는 고충과 고민을 적어서 많은 사람과 공감이 되는 블로그를 만들어 보고 싶다.이번 블로그 플랫폼은 github 플랫폼이다. 예전에는 티스토리였으나 티스토리는 한국 내에서는 트래픽 속도가 빠른데 외국에서는 매우 느린 단점이 있다. 그에 반해 github는 지역의 관계없이 매우 빠르다. 그러나 github는 사실 웹호스팅의 플랫폼이 아닌 프로그램 소스 관리 저장소이다. 웹호스팅은 옵션일 뿐이다. 그래서 github는 다른 플랫폼과 다르게 디자인 테마를 제공하거나 데이터베이스를 제공하지 않는다. 지금 보는 현재 디자인도 순수로 전부 제작했다. 그래서 아직 부족한 부분이 많이 보인다. 댓글 기능도 아직 개발 전이다. 이런 부족한 부분은 천천히 블로그를 운영해 가면서 채워나갈까 생각하고 있다.나의 개발 활동 무대는 일본이다. 내가 한국보다는 일본이 더 좋아서 여기에서 생활하는 건 아니고 어쩌다 보니 여기까지 흘러온 것 같다. 그러다 보니 보통사람과 조금 다른 경험도 많이 쌓이게 되었다. 예를 들면 일본에서 생활하다 보니 차별 아닌 차별을 당한 경험도 있고, 일본에 있는 한국계 회사에 다니면서 느끼는 고충들.. 그리고 외국 회사에 대한 문화 차이.. 생활하면서 느끼는 문화 차이 등등의 경험이 있다.나는 그런 경험들을 통해 한국에서 일본에 진출하려는 사람들, 또는 일본회사와 미국회사의 문화에 대해 궁금하신 사람들. 또 예전에 참 개발자에 대한 안 좋은 기사와 방송이 많아서 프로그램을 정말 좋아하는데 직업으로 망설이시는 사람들, 현업에 있으면서 앞으로 어떻게 해야 할까 하는 사람들과 경험을 공유하면서 많은 소통을 하고 싶다.아직은 블로그에 적응되지 못해서 글이 어수선하고 두서가 없다. 원래 글재주가 뛰어난 편은 아니었지만, 간만에 쓰다 보니 더 어수선한 것 같다. 어쨌든 앞으로 블로그를 어떻게 운영해 나갈지에 대해 또 많은 고민이 시작되겠지만, 열심히 해 볼 생각이다.]]></description><category>홈</category><author>nowonbun@gmail.com</author><guid>http://www.nowonbun.com/index.html</guid><pubDate>Mon, 12 Nov 2018 21:17:52 GMT</pubDate></item></channel></rss>