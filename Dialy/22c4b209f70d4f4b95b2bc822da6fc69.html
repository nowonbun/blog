<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="naver-site-verification" content="32aa8ce7d767e05669cb5b31f2579de56cc15359" />
    <meta name="keywords" content="명월 일기, 프로그램 개발, 프로젝트 구축, 개발 노하우" />
    <meta name="description" content="상위 common 추상 클래스와 database connection을 만들었다. 하루 만에 다 만들기에는 개인적인 시간이 충분하지 않기 때문.." />
    <meta name="Author" content="nowonbun@gmail.com" />
    <meta name="distribution" content="nowonbun@gmail.com" />
    <meta name="copyright" content="nowonbun@gmail.com" />
    <meta name="title" content="명월의 개발 일기 : [개발일기] : [블로그 구축 14일 차] 블로그 댓글 기능 달기 -5(server 작성)" />
    <meta name="robots" content="ALL">
    <meta property="og:title" content="명월의 개발 일기" />
    <meta property="og:description" content="상위 common 추상 클래스와 database connection을 만들었다. 하루 만에 다 만들기에는 개인적인 시간이 충분하지 않기 때문.." />
    <meta property="og:url" content="http://www.nowonbun.com/Dialy/22c4b209f70d4f4b95b2bc822da6fc69.html" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="명월 일기, 프로그램 개발, 프로젝트 구축, 개발 노하우" />

    <meta property="og:image" content="http://www.nowonbun.com/img/ogimage.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="200" />
    <meta property="og:image:height" content="200" />
    <meta property="og:image:alt" content="명월 일기 타이포 그래피" />
    <meta name="google-signin-client_id" content="220458850151-75q8c5ids3m5krr49qj4tif6t84liubj.apps.googleusercontent.com">

    <title>명월의 개발 일기 : [개발일기] : [블로그 구축 14일 차] 블로그 댓글 기능 달기 -5(server 작성)</title>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="/css/compiled-4.5.9.min.css" rel="stylesheet">
    <link href="/css/style.min.css" rel="stylesheet">
    <link href="/css/common.css" rel="stylesheet">
    <link href="/css/post.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/rainbow.min.css" rel="stylesheet">
    <link href="/css/highlight.init.css" rel="stylesheet">
    <link href="/css/comment.css" rel="stylesheet">

    <link rel="icon" type="favicon.ico" href="/img/favicon.ico">
    <link rel="canonical" href="http://www.nowonbun.com" />
    <link rel="alternate" type="application/rss+xml" title="명월의 개발 일기" href="http://www.nowonbun.com/rss" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-58360998-4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-58360998-4');
    </script>
    <script type="text/javascript" src="//wcs.naver.net/wcslog.js"></script>
    <script type="text/javascript">
        if (!wcs_add) var wcs_add = {};
        wcs_add["wa"] = "c2a9ed02f53908";
        wcs_do();
    </script>
</head>
<body lang="ko">
    <div id="bodyMain" class="container wow fadeIn animated" style="visibility: visible; animation-name: fadeIn;">
        <header class="mt-5">
            <section class="card my-blog-header">
                <div class="background"></div>
                <div class="card-body text-center py-3 px-3 my-3">
                    <h1 class="mb-4" style="margin:0px!important;">
                        <strong>명월의 개발 일기</strong>
                    </h1>
                </div>
                <nav class="navbar navbar-expand-lg navbar-light white menu-nav-tool-blog">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="menuToggler">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/'>홈</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog  active ' href='/DialyList.html'>개발일기</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/ExperienceList.html'>개발경험</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/JapanLifeList.html'>일본생활</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/KoreanLifeList.html'>한국생활</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/CodingNoteList.html'>코딩노트</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/FavoritesList.html'>즐겨찾기</a></li>

                        </ul>
                    </div>
                </nav>
            </section>
        </header>
        <main class="mt-5">
            <div class="row mb-3">
                <div class="col-12 d-flex align-items-stretch">
                    <div class="card my-blog-post">
                        <div class="card-body">
                            <h2 class="card-title">
                                [블로그 구축 14일 차] 블로그 댓글 기능 달기 -5(server 작성)
                            </h2>
                            <div class="row justify-content-end mb-3 date-items">
                                <div class="col-12" style="line-height:10px;text-align:right;">
                                    <div class="date-type-1">
                                        <span class="my-list-date font-7">작성일시 : 2018년 12월 02일 17시 12분</span><br />
                                        <span class="my-list-date font-7">최종수정일시 : 2018년 12월 15일 02시 29분</span>
                                    </div>
                                    <div class="date-type-2">
                                        <span class="my-list-date font-7">작성: 2018-12-02 17:12</span><br />
                                        <span class="my-list-date font-7">최종수정: 2018-12-15 02:29</span>
                                    </div>
                                    <div style="display:inline-block">
                                        <img src="/img/copyrightmark.png" style="height: 25px;margin-top: -13px;margin-left: 11px;">
                                    </div>
                                </div>
                            </div>
                            <div class="card-text pt-3 pb-3">
                                <!--<div class='view overlay rounded z-depth-1 post-image-area'>
                                    <img class='article-image img-fluid' src='#####IMAGE#####' />
                                    <div class='mask rgba-white-slight'></div>
                                </div>
                                <p class="image-comment">#####IMAGECOMMNET#####</p>-->
                                <article>
                                    <p>&nbsp;상위 common 추상 클래스와 database connection을 만들었다. 하루 만에 다 만들기에는 개인적인 시간이 충분하지 않기 때문에 단계별로 작업할 생각이다.</p><pre><code class="PHP" data-type="add.php 댓글 추가 페이지">&lt;?php
include_once $_SERVER ['DOCUMENT_ROOT'] . '/common.php';
class Controller extends AbstractDao{
  protected function run(){
    if(strtoupper ( $_SERVER ['REQUEST_METHOD'] ) == 'POST'){
      $url = $_REQUEST["url"];
      $ip = $_SERVER["REMOTE_ADDR"];
      $id = $_REQUEST["id"];
      $email = $_REQUEST["email"];
      $comment = $_REQUEST["comment"];
      $parent = (int)$_REQUEST["parent"];
      if($parent &lt; 1){
        $parent = null;
      }
      parent::validateUrl($url);
      parent::validate($ip);
      parent::validate($id);
      parent::validate($email);
      parent::validate($comment);
      $stmt = parent::getStmt ( "INSERT INTO COMMENT_T (URL, IP ,ID, EMAIL, COMMENT, PARENT, CREATEDDATE, LASTUPDATED) VALUES (?, ?, ?, ?, ?, ?, now(), now())" );
      $stmt-&gt;bind_param ( "sssssi", $url, $ip, $id, $email, base64_encode  ($comment), $parent);
      if ($stmt-&gt;execute ()) {
        parent::close();
        return array ("result" =&gt; "OK");
      } else {
        parent::close();
        return array ("result" =&gt; "NG");
      }
    } else {
      header ( "HTTP/1.1 401 Unauthorized"  );
      http_response_code ( 401 );
      die ();
    }
  }
}
$obj = new Controller();
?&gt;
&lt;?=$obj-&gt;execute()?&gt;</code></pre><p>&nbsp;댓글 추가 페이지는 add.php로 만들었다. add.php 안에서 contoller 클래스를 선언하고 common.php에서 만들었던 common 클래스를 상속받아서 만들었다. 소스의 흐름은 POST 형식으로만 사용이 가능하게 했다. 그뜻은 GET 방식으로 오면 401에러를 발생시킨다. 왜냐하면, ajax를 통해 POST 메소드가 아닌 직접 접속하게 되면 에러페이지를 내보내기 위해서이다. 그리고 각 파라미터값을 변수로 변환하고 데이터 검사를 한 후에 데이터베이스에 Insert했다. Insert가 잘 되면 Json 형식의 result를 키로 OK 값을 리턴하고 그렇지 않으면 NG를 리턴하게 설정했다.</p><p><br></p><p>&nbsp;여기서 add.php만 보면 어제 추가한 common 클래스에는 없던 validateUrl 함수와 validate가 있다. 이 두 함수를 common 클래스에 넣은 이유는 url검사와 데이터 NULL검사는 add에서만 사용하는 것이 아니고 검색, 수정, 삭제할 때도 사용할 것 같아서 공통 클래스에 작성했다. 그렇게 하면 다른 클래스에도 같은 함수를 만들지 않아도 공통으로 쓸 수 있다. 나는 Copy-phase를 매우 싫어하기 때문에 가능하면 이렇식으로 공통함수를 관리하는 편이다.</p><p><br></p><p>&nbsp;댓글 추가하는 부분은 데이터를 Insert하는 부분이라 데이터 검사만 잘 되면 크게 어려운 부분은 없다.</p><pre><code class="PHP" data-type="select.php 댓글 검색 페이지">&lt;?php
include_once $_SERVER ['DOCUMENT_ROOT'] . '/common.php';
class Controller extends AbstractDao{
  protected function run(){
    if(strtoupper ( $_SERVER ['REQUEST_METHOD'] ) == 'POST'){
      $url = $_REQUEST["url"];
      $pid = $_REQUEST["id"];
      $pEmail = $_REQUEST["email"];
      parent::validateUrl($url);
      $stmt = parent::getStmt ( "SELECT IDX, ID, EMAIL, PARENT, CREATEDDATE, LASTUPDATED, COMMENT from COMMENT_T WHERE URL=? AND ISDELETED=0 ORDER BY IDX DESC" );
      $stmt -&gt; bind_param ( "s", $url );
      $stmt-&gt;execute ();
      $stmt-&gt;bind_result ( $idx, $id, $email, $parent, $createdate ,$lastupdated, $comment );
      $rslt = array ();
      while ( $stmt-&gt;fetch () ) {
        $clz = new Comment ();
        $clz-&gt;setIdx ( $idx );
        $clz-&gt;setId ( $id );
        $clz-&gt;setEmail ( $email );
        $clz-&gt;setParent ( $parent );
        $clz-&gt;setCreatedate ( $createdate );
        $clz-&gt;setLastupdated ( $lastupdated );
        $clz-&gt;setComment ( base64_decode  ($comment) );
        array_push ( $rslt, $clz );
      }
      parent::close();
      
      $ret = array ();
      for($i=0;$i&lt;count($rslt);$i++){
        if($rslt[$i]-&gt;getParent() == null){
          $rslt[$i]-&gt;setChild($this-&gt;getChild($rslt, $rslt[$i]-&gt;getIdx(),$pid, $pEmail));
          array_push ( $ret, $this-&gt;createJsonArray($rslt[$i],$pid, $pEmail) );
        }
      }
      return $ret;
    } else {
      header ( "HTTP/1.1 401 Unauthorized"  );
      http_response_code ( 401 );
      die ();
    }
  }
  
  private function getChild($list, $idx, $pid, $pEmail){
    $ret = array();
    for($i=count($list)-1;$i&gt;=0;$i--){
      if($idx == $list[$i]-&gt;getParent()){
        $list[$i]-&gt;setChild($this-&gt;getChild($list, $list[$i]-&gt;getIdx(),$pid, $pEmail));
        array_push ( $ret, $this-&gt;createJsonArray($list[$i],$pid, $pEmail) );
      }
    }
    return $ret;
  }
  
  private function createJsonArray($node, $id, $email){
    $pos = strpos($node-&gt;getEmail(),"@");
    if($pos &gt; 1){
      $emailb = substr($node-&gt;getEmail(),0, $pos);
    } else {
      $emailb = $node-&gt;getEmail();
    }
    $emailb = substr($emailb,0,3)."******";
    return array (
      "idx" =&gt; $node-&gt;getIdx(),
      "email" =&gt; parent::isSuperUser($node-&gt;getId(), $node-&gt;getEmail())?"admin":$emailb,
      "parent" =&gt; $node-&gt;getParent(),
      "createdate" =&gt; $node-&gt;getCreatedate(),
      "lastupdated" =&gt; $node-&gt;getLastupdated(),
      "comment" =&gt; $node-&gt;getComment(),
      "ismodify" =&gt; trim($node-&gt;getId()) == trim($id) &amp;&amp; trim($node-&gt;getEmail()) == trim($email) || parent::isSuperUser($id, $email),
      "child" =&gt; $node-&gt;getChild() != null? $node-&gt;getChild():null
    );
  }
}
$obj = new Controller();
?&gt;
&lt;?=$obj-&gt;execute()?&gt;</code></pre><pre><code class="PHP" data-type="common.php 공통 페이지(수정)">abstract class AbstractDao {
  private $db;
  private $mysqli;
  
  private $sui = "";
  private $sue = "";
  private $host = "";
  
  protected function getStmt($qy) {
    $this-&gt;db = new DBConn ();
    $this-&gt;mysqli = $this-&gt;db-&gt;get ();
    $stmt = $this-&gt;mysqli-&gt;prepare ( $qy );
    return $stmt;
  }
  protected function close() {
    $this-&gt;mysqli-&gt;close ();
  }
  public function validateIdx($val){
    if($val == null){
      header ( "HTTP/1.1 401 Unauthorized"  );
      http_response_code ( 401 );
      die ();
    }
    if($val &lt; 1){
      header ( "HTTP/1.1 401 Unauthorized"  );
      http_response_code ( 401 );
      die ();
    }
  }
  public function validateUrl($val){
    if($val == null || trim($val) == ""){
      header ( "HTTP/1.1 401 Unauthorized"  );
      http_response_code ( 401 );
      die ();
    }
    if(preg_match("/".$this-&gt;host."/i", $val) == 0){
      header ( "HTTP/1.1 401 Unauthorized"  );
      http_response_code ( 401 );
      die ();
    }
  }
  public function validate($val){
    if($val == null || trim($val) == ""){
      header ( "HTTP/1.1 401 Unauthorized"  );
      http_response_code ( 401 );
      die ();
    }
  }
  public function execute(){
    header("content-type: application/json; charset=utf-8");
    //header("Access-Control-Allow-Origin:*");
    header("Access-Control-Allow-Origin:http://".$this-&gt;host);
    return json_encode($this-&gt;run());
  }
  protected abstract function run();
  protected function getSuperId(){
    return $this-&gt;sui;
  }
  protected function getSuperEmail(){
    return $this-&gt;sue;
  }
  protected function getHost(){
    return $this-&gt;host;
  }
  protected function isSuperUser($id, $email){
    return trim($this-&gt;sui) == trim($id) &amp;&amp; trim($this-&gt;sue) == trim($email);
  }
}</code></pre><p>&nbsp;데이터를 Insert했으니 이번에는 select 검색하는 클래스를 만들었다. 구조는 add부분과 비슷하다. POST형식으로 받고 파라미터 검사하고 데이터베이스에서 SELECT하는 것이다. 여기서는 select한 값을 comment 클래스를 할당하여 list형식으로 만들었다. 이렇게 하면 결괏값을 10개 검색했다고 하면 10개의 comment 클래스가 list에 할당되는 형태이다. 이렇게 되면 데이터베이스 구조와 클래스 구조를 비슷하게 생각할 수 있다. sort를 할 수도 있고 필요 없는 데이터는 뺄 수도 있고. 이것이 자바나 C#에서의 ORM 개념이다.</p><p><br></p><p>&nbsp;검색의 기준은 url로 파라미터로 요청이 오면 해당 키의 댓글만 검색하는 형태이다. 아직 클라이언트를 만들이지는 않았지만 url은 location.origin + location.pathname 형태로 오기 때문에 같은 페이지의 경우면 같은 값으로 요청된다. 그리고 결국에 reponse는 json형식으로 변환해야 하기 때문에 comment class형태에서 array 형태로 변환했다. 중간에 parent키가 null인 경우는 최상위 댓글이고 parent가 null아니면 리플의 형태이기 때문에 그것에 맞게 array를 작성했다. java나 C#은 클래스를 json으로 변환하는 내부 함수? 라이브러리가 있는데 php는 없는 듯싶어서 저런 식으로 작성됐다. 혹시 있을지도 모르겠지만.. 어떻게 보면 이게 정말 가시적인 형태라 이해하기는 편한데 소스가 길어지니 귀찮게 느껴진다.</p><p><br></p><p>&nbsp;common 클래스도 수정했다. 앞에서 이야기한 추가 부분의 validate함수를 공통으로 만들었습니다. 단순히 null체크와 url이면 host 주소 검사, Idx면 정수검사를 추가했습니다. 그리고 super user의 영역인데 super user는 하드 코딩으로 넣어놨습니다. 관리자는 나밖에 없으니 굳이 데이터베이스로 회원관리를 만들어 관리할 필요는 없을 것 같아서 이다.</p><p><br></p><p>&nbsp;다시 검색영역으로 돌아가서 ismodify 컬럼을 보면 댓글이 본인 것이면 수정할 수 있고 본인 것이 아니면 수정할 수 없게 한 파라미터가 있다. 여기에 super 유저라면 보든 댓글의 수정이 가능하게 바꾸려고 만든 부분이다. super user도 검색뿐 아니라 수정, 삭제에서도 필요할 것 같아서 공통에 넣었다.</p><p><br></p><p>댓글 기능에 대한 소스는 아래 github에 있습니다.&nbsp;</p><p><a href="http://github -  https://github.com/nowonbun/BlogComment" target="_blank">github -&nbsp; https://github.com/nowonbun/BlogComment</a></p>
                                </article>
                            </div>
                            <div class="row justify-content-end mb-3 date-items">
                                <div class="col-12 font-7 text-align-right gray-font">
                                    <p class="mb-0"><span class="text-align-left" style="display:inline-block;">블로그의 글은 모두 개인 경험과 지식으로 나온 글이기에 정확하지 않을 수 있습니다. 표준 또는 사실과 다른 글이 있으면 댓글 또는 메일 보내주세요.</span></p>
                                    <p class="mb-0">Mail: <a href="mailto:nowonbun@gmail.com">nowonbun@gmail.com</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class='row mt-3 mb-3'><div class='col-12 d-flex align-items-stretch'><div class='card my-style-custom'><div class='my-pre-post-nav'><div class='row'><div class='col-12 mb-1'><p class='my-pre-list-title' style='margin-bottom:0px;'><a class='prenext-link' href='/Dialy/32d7d7135654429faf3cbdfe618bae00.html'> <span class='my-pre-next-icon'><i class='fa fa-chevron-up'></i>이전글</span>[블로그 구축 13일 차] 블로그 댓글 기능 달기 -4 (server 작성)</a><span class='my-list-date float-right date-type-1 font-7'>2018년 12월 01일 23시 02분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-01 23:02 작성</span></p></div> <div class='col-12 my-blog-line'></div> <div class='col-12 mt-1'><p class='my-pre-list-title' style='margin-bottom:0px;'><a class='prenext-link' href='/Dialy/comment_delete_modify20181204.html'> <span class='my-pre-next-icon'><i class='fa fa-chevron-down'></i>다음글</span>[블로그 구축 15일 차] 블로그 댓글 기능 달기 -6(server 작성)</a><span class='my-list-date float-right date-type-1 font-7'>2018년 12월 04일 01시 47분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-04 01:47 작성</span></p></div></div></div></div></div></div>
            <fieldset class="box-shadow-0 px-3 py-3 blog-radius mb-3 my-style-custom">
                <legend class="box-shadow-0 blog-legend px-3 blog-radius mb-0">
                    <label>최신글</label>
                </legend>
                <ul class="pl-3">
                    <li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/ec8433b8f37e45878361ea5fc3a3b677.html'>[개발일기] [가계부 프로젝트 13일 차] 모바일 디자인 설계 변경하기<span class='my-list-date float-right date-type-1 font-7'>2019년 01월 24일 22시 40분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2019-01-24 22:40 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/984b765782ca4da18d84bad4f0e2676d.html'>[개발일기] [가계부 프로젝트 12일 차] Admin 페이지 작성하기<span class='my-list-date float-right date-type-1 font-7'>2019년 01월 23일 23시 14분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2019-01-23 23:14 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/JapanLife/2742d61631164435bc05759e9a2dc97e.html'>[일본생활] 일본 취업의 느낀 점.<span class='my-list-date float-right date-type-1 font-7'>2019년 01월 12일 00시 49분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2019-01-12 00:49 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Experience/93a62c184de645a0883e6e45871ffc55.html'>[개발경험] 슈퍼 개발자 그리고 구루라 불리는 그들.<span class='my-list-date float-right date-type-1 font-7'>2019년 01월 11일 00시 14분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2019-01-11 00:14 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Experience/e7e3aa7732b94f52b993e5f45b962c37.html'>[개발경험] 블로그의 선택과 경험들.<span class='my-list-date float-right date-type-1 font-7'>2019년 01월 08일 23시 01분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2019-01-08 23:01 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Experience/6f8079e8ca7744bc8919d110539ce845.html'>[개발경험] 코드 리뷰에 대한 문화<span class='my-list-date float-right date-type-1 font-7'>2019년 01월 07일 22시 35분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2019-01-07 22:35 작성</span></a></div></li>
                </ul>
            </fieldset>
            <fieldset class="box-shadow-0 px-3 py-3 blog-radius mb-3 my-style-custom">
                <legend class="box-shadow-0 blog-legend px-3 blog-radius">
                    <label>댓글 달기</label>
                </legend>
                <div id="commentSystem">
					<div id="googleSigninButton"></div>
                    <div id="commentInsertForm" class="comment-form-border"  style="display:none;">
						<div style="text-align:right;">
							<button type="button" class="btn btn-sm btn-outline-success waves-effect" id="createComment">작성하기</button>
						</div>
						<div class="md-form comment-form">
						  <textarea id="commentText" class="form-control md-textarea comment-textarea" maxlength="300" length="300" rows="3"></textarea>
						  <label for="commentText" class="comment-textarea-label">댓글 작성하기</label>
						</div>
					</div>
					<div id="commentList" class="comment-list"></div>
                </div>
            </fieldset>
        </main>
        <footer class="page-footer text-center font-small mdb-color mt-4 wow fadeIn my-blog-footer">
            <div class="footer-copyright py-1">
                2018 Copyright: <a href="#" target="_blank">www.nowonbun.com </a>
            </div>
        </footer>
        <div id="ImgModal" class="modal">
            <span class="close">&times;</span>
            <img class="modal-content">
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/js/compiled-4.5.9.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
    <script src="/js/highlightjs-line-numbers.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>hljs.initLineNumbersOnLoad();</script>
    <script type="text/javascript" src="/js/post.js" charset="utf-8"></script>
    <script type="text/javascript" src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
    <script type="text/javascript" src="/js/comment.min.js"></script>
</body>
</html>