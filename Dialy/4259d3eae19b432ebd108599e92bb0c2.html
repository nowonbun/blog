<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="naver-site-verification" content="32aa8ce7d767e05669cb5b31f2579de56cc15359" />
    <meta name="keywords" content="명월 일기, 프로그램 개발, 프로젝트 구축, 개발 노하우" />
    <meta name="description" content="이제 가계부의 데이터까지 설계까지 완료되면 데이터베이스 설계는 완료된다. 프로그램상에서 데이터베이스 설계를 어떻게 하는가에 따라 프로그램이 .." />
    <meta name="Author" content="nowonbun@gmail.com" />
    <meta name="distribution" content="nowonbun@gmail.com" />
    <meta name="copyright" content="nowonbun@gmail.com" />
    <meta name="title" content="명월의 개발 일기 : [개발일기] : [가계부 프로젝트 4일 차] 데이터베이스 설계-3 (가계부 설계)" />
    <meta name="robots" content="ALL">
    <meta property="og:title" content="명월의 개발 일기" />
    <meta property="og:description" content="이제 가계부의 데이터까지 설계까지 완료되면 데이터베이스 설계는 완료된다. 프로그램상에서 데이터베이스 설계를 어떻게 하는가에 따라 프로그램이 .." />
    <meta property="og:url" content="http://www.nowonbun.com/Dialy/4259d3eae19b432ebd108599e92bb0c2.html" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="명월 일기, 프로그램 개발, 프로젝트 구축, 개발 노하우" />

    <meta property="og:image" content="http://www.nowonbun.com/img/ogimage.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="200" />
    <meta property="og:image:height" content="200" />
    <meta property="og:image:alt" content="명월 일기 타이포 그래피" />
    <meta name="google-signin-client_id" content="220458850151-75q8c5ids3m5krr49qj4tif6t84liubj.apps.googleusercontent.com">

    <title>명월의 개발 일기 : [개발일기] : [가계부 프로젝트 4일 차] 데이터베이스 설계-3 (가계부 설계)</title>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="/css/compiled-4.5.9.min.css" rel="stylesheet">
    <link href="/css/style.min.css" rel="stylesheet">
    <link href="/css/common.css" rel="stylesheet">
    <link href="/css/post.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/rainbow.min.css" rel="stylesheet">
    <link href="/css/highlight.init.css" rel="stylesheet">
    <link href="/css/comment.css" rel="stylesheet">

    <link rel="icon" type="favicon.ico" href="/img/favicon.ico">
    <link rel="canonical" href="http://www.nowonbun.com" />
    <link rel="alternate" type="application/rss+xml" title="명월의 개발 일기" href="http://www.nowonbun.com/rss" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-58360998-4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-58360998-4');
    </script>
    <script type="text/javascript" src="//wcs.naver.net/wcslog.js"></script>
    <script type="text/javascript">
        if (!wcs_add) var wcs_add = {};
        wcs_add["wa"] = "c2a9ed02f53908";
        wcs_do();
    </script>
</head>
<body lang="ko">
    <div id="bodyMain" class="container wow fadeIn animated" style="visibility: visible; animation-name: fadeIn;">
        <header class="mt-5">
            <section class="card my-blog-header">
                <div class="background"></div>
                <div class="card-body text-center py-3 px-3 my-3">
                    <h1 class="mb-4" style="margin:0px!important;">
                        <strong>명월의 개발 일기</strong>
                    </h1>
                </div>
                <nav class="navbar navbar-expand-lg navbar-light white menu-nav-tool-blog">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="menuToggler">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/'>홈</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog  active ' href='/DialyList.html'>개발일기</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/ExperienceList.html'>개발경험</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/JapanLifeList.html'>일본생활</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/KoreanLifeList.html'>한국생활</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/CodingNoteList.html'>코딩노트</a></li>
<li class='nav-item'><a class='nav-link text-uppercase waves-effect waves-light menu-nav-blog ' href='/FavoritesList.html'>즐겨찾기</a></li>

                        </ul>
                    </div>
                </nav>
            </section>
        </header>
        <main class="mt-5">
            <div class="row mb-3">
                <div class="col-12 d-flex align-items-stretch">
                    <div class="card my-blog-post">
                        <div class="card-body">
                            <h2 class="card-title">
                                [가계부 프로젝트 4일 차] 데이터베이스 설계-3 (가계부 설계)
                            </h2>
                            <div class="row justify-content-end mb-3 date-items">
                                <div class="col-12" style="line-height:10px;text-align:right;">
                                    <div class="date-type-1">
                                        <span class="my-list-date font-7">작성일시 : 2018년 12월 13일 23시 00분</span><br />
                                        <span class="my-list-date font-7">최종수정일시 : 2018년 12월 17일 22시 43분</span>
                                    </div>
                                    <div class="date-type-2">
                                        <span class="my-list-date font-7">작성: 2018-12-13 23:00</span><br />
                                        <span class="my-list-date font-7">최종수정: 2018-12-17 22:43</span>
                                    </div>
                                    <div style="display:inline-block">
                                        <img src="/img/copyrightmark.png" style="height: 25px;margin-top: -13px;margin-left: 11px;">
                                    </div>
                                </div>
                            </div>
                            <div class="card-text pt-3 pb-3">
                                <!--<div class='view overlay rounded z-depth-1 post-image-area'>
                                    <img class='article-image img-fluid' src='#####IMAGE#####' />
                                    <div class='mask rgba-white-slight'></div>
                                </div>
                                <p class="image-comment">#####IMAGECOMMNET#####</p>-->
                                <article>
                                    <p>&nbsp;이제 가계부의 데이터까지 설계까지 완료되면 데이터베이스 설계는 완료된다. 프로그램상에서 데이터베이스 설계를 어떻게 하는가에 따라 프로그램이 어떻게 바뀌는지 매우 중요한 부분이다. 그래서 처음에 가능하면 앞으로 더 수정 없이 설계하는 게 최고이다. 하지만 현실적으로는 실제 프로그램 코딩이 들어가면 미처 생각지도 못한 부분이 많이 나온다. 또 여러 가지 추가사항에 의해서도 테이블을 수정할 수도 있다. 그러므로 나중에 alter table로 바꾸는 경우도 많이 생기는데 이 부분은 어쩔 수 없다고 생각된다. 그러나 가능하면 최대한 데이터베이스 설계를 잘해서 alter가 없도록 해야 한다.</p><pre><code class="SQL" data-type="가계부 설계">CREATE TABLE MST_LOW_CATEGORY(
  CODE CHAR(1) NOT NULL,
  NAME NVARCHAR(255) NOT NULL,
  ISACTIVE BIT DEFAULT 1 NOT NULL,

  PRIMARY KEY(CODE)
);

INSERT INTO MST_LOW_CATEGORY (CODE, NAME, ISACTIVE) VALUES('i','Income',1);
INSERT INTO MST_LOW_CATEGORY (CODE, NAME, ISACTIVE) VALUES('e','Expenditure',1);
INSERT INTO MST_LOW_CATEGORY (CODE, NAME, ISACTIVE) VALUES('s','Saving',1);

CREATE TABLE TSN_CATEGORY(
  IDX INT NOT NULL AUTO_INCREMENT,
  LOWCATEGORYCODE CHAR(1) NOT NULL,
  NAME NVARCHAR(255) NOT NULL,
  ISDELETED BIT DEFAULT 0 NOT NULL,

  PRIMARY KEY(IDX),
  FOREIGN KEY (LOWCATEGORYCODE) REFERENCES MST_LOW_CATEGORY (CODE)
);

CREATE TABLE TSN_PAYMENT(
  IDX INT NOT NULL AUTO_INCREMENT,
  LOWCATEGORYCODE CHAR(1) NOT NULL,
  CATEGORYKEY INT NOT NULL,
  `DATE` DATETIME NOT NULL,
  CONTENTS NVARCHAR(255) NOT NULL,
  MONEY DECIMAL(20) NOT NULL,
  COMMENT NVARCHAR(255),
  ISDELETED BIT DEFAULT 0 NOT NULL,
  CREATEDDATE DATETIME DEFAULT NOW() NOT NULL,
  CREATER VARCHAR(255) NOT NULL,
  UPDATEDDATE DATETIME NULL,
  UPDATER VARCHAR(255) NULL,

  PRIMARY KEY(IDX),
  FOREIGN KEY (LOWCATEGORYCODE) REFERENCES MST_LOW_CATEGORY (CODE),
  FOREIGN KEY (CATEGORYKEY) REFERENCES TSN_CATEGORY (IDX),
  FOREIGN KEY (CREATER) REFERENCES TSN_USER (ID),
  FOREIGN KEY (UPDATER) REFERENCES TSN_USER (ID)
);</code></pre><p>&nbsp;먼저 카테고리를 두 개로 나누었다. 하나는 마스터 로우 카테고리이고, 하나는 트랜젝션 카테고리이다. 마스터 카테고리는 마스터 테이블이기 때문에 먼저 수입, 지출, 저축으로 세 개로 나누고 입력했다. 그 밑의 하위 카테고리 개념으로 트랜젝션으로 설정했다. 수입 중에서 월급, 아르바이트 월급이다. 그리고 지출은 생활비, 공과금, 용돈 식으로 나누기 위함이다. 카테고리는 이렇게 구성하고, 다음은 가계의 데이터를 담는 Payment 트랜잭션 테이블이다. 이 테이블은 마스터 로우 카테고리와 트랜잭션 카테고리를 레퍼런스로 갖고, 날짜, 내용, 금액 그리고 비고, 작성날짜, 수정날짜까지 기본으로 가지고 있는 테이블이다.</p><pre><code class="SQL" data-type="지역화">INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Income','0',N'수입',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Income','1',N'Income',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Income','2',N'収入',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Expenditure','0',N'지출',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Expenditure','1',N'Expenditure',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Expenditure','2',N'支出',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Saving','0',N'저축',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Saving','1',N'Saving',1);
INSERT INTO MST_LOCALIZATION (`KEY`, `TYPE`, `VALUE`, ISACTIVE) VALUES(N'Saving','2',N'貯蓄',1);</code></pre><p>&nbsp;마지막은 Localization의 지역화이다.</p><p><br></p><p>&nbsp;여기까지 내가 구상하고 있는 가계부 프로그램의 데이터베이스 설계가 완성되었다. 더 필요한게 있나.. 아직은 딱히 생각나는 부분이 없다.</p>
                                </article>
                            </div>
                            <div class="row justify-content-end mb-3 date-items">
                                <div class="col-12 font-7 text-align-right gray-font">
                                    <p class="mb-0"><span class="text-align-left" style="display:inline-block;">블로그의 글은 모두 개인 경험과 지식으로 나온 글이기에 정확하지 않을 수 있습니다. 표준 또는 사실과 다른 글이 있으면 댓글 또는 메일 보내주세요.</span></p>
                                    <p class="mb-0">Mail: <a href="mailto:nowonbun@gmail.com">nowonbun@gmail.com</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class='row mt-3 mb-3'><div class='col-12 d-flex align-items-stretch'><div class='card my-style-custom'><div class='my-pre-post-nav'><div class='row'><div class='col-12 mb-1'><p class='my-pre-list-title' style='margin-bottom:0px;'><a class='prenext-link' href='/Dialy/eb81c65f55b74569aa703d879f5ec907.html'> <span class='my-pre-next-icon'><i class='fa fa-chevron-up'></i>이전글</span>[가계부 프로젝트 3일 차] 데이터베이스 설계-2 (회원관리, 권한관리)</a><span class='my-list-date float-right date-type-1 font-7'>2018년 12월 12일 22시 53분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-12 22:53 작성</span></p></div> <div class='col-12 my-blog-line'></div> <div class='col-12 mt-1'><p class='my-pre-list-title' style='margin-bottom:0px;'><a class='prenext-link' href='/Dialy/eb99142190b5471fbd44b75251fec78b.html'> <span class='my-pre-next-icon'><i class='fa fa-chevron-down'></i>다음글</span>[Cenos 개발 서버 설치] Centos 설치하기.</a><span class='my-list-date float-right date-type-1 font-7'>2018년 12월 17일 01시 33분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-17 01:33 작성</span></p></div></div></div></div></div></div>
            <fieldset class="box-shadow-0 px-3 py-3 blog-radius mb-3 my-style-custom">
                <legend class="box-shadow-0 blog-legend px-3 blog-radius mb-0">
                    <label>최신글</label>
                </legend>
                <ul class="pl-3">
                    <li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/05aeea7c3d2d414aa6d2a56e4a7a8b46.html'>[개발일기]  [가계부 프로젝트 10일 차] 로그아웃 기능과 메뉴 설계<span class='my-list-date float-right date-type-1 font-7'>2018년 12월 22일 01시 24분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-22 01:24 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/9b33bfad04354d189e291a00d9aada40.html'>[개발일기] [가계부 프로젝트 9일 차] Bootstrap 화면 디자인과 설정.<span class='my-list-date float-right date-type-1 font-7'>2018년 12월 20일 23시 44분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-20 23:44 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/29b6376cd9724bc68e601a9e705b70d4.html'>[개발일기] [가계부 프로젝트 8일 차] Startup페이지와 로그인 페이지 만들기.<span class='my-list-date float-right date-type-1 font-7'>2018년 12월 19일 23시 16분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-19 23:16 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/f4ded5e5104f42e58e3016b6ab455da1.html'>[개발일기] [가계부 프로젝트 7일 차] 프레임워크 설정하기 -3(ORM - DAO만들기)<span class='my-list-date float-right date-type-1 font-7'>2018년 12월 18일 23시 43분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-18 23:43 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/49d601fe0e4f47d4aa239d54b4fdfba3.html'>[개발일기] [가계부 프로젝트 6일차] 프레임워크 설정하기 -2(ORM - JPA설정)<span class='my-list-date float-right date-type-1 font-7'>2018년 12월 17일 23시 42분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-17 23:42 작성</span></a></div></li><li class='row'><div class='col-12 mb-0'><i class='fa fa-caret-right mr-2'></i><a href='/Dialy/1cb972bac45f49e8ad95a702a5036541.html'>[개발일기] [가계부 프로젝트 5일 차] 프레임워크 설정하기 -1(Spring)<span class='my-list-date float-right date-type-1 font-7'>2018년 12월 17일 23시 27분에 작성된 글...</span><span class='my-list-date float-right date-type-2 font-7'>2018-12-17 23:27 작성</span></a></div></li>
                </ul>
            </fieldset>
            <fieldset class="box-shadow-0 px-3 py-3 blog-radius mb-3 my-style-custom">
                <legend class="box-shadow-0 blog-legend px-3 blog-radius">
                    <label>댓글 달기</label>
                </legend>
                <div id="commentSystem">
					<div id="googleSigninButton"></div>
                    <div id="commentInsertForm" class="comment-form-border"  style="display:none;">
						<div style="text-align:right;">
							<button type="button" class="btn btn-sm btn-outline-success waves-effect" id="createComment">작성하기</button>
						</div>
						<div class="md-form comment-form">
						  <textarea id="commentText" class="form-control md-textarea comment-textarea" maxlength="300" length="300" rows="3"></textarea>
						  <label for="commentText" class="comment-textarea-label">댓글 작성하기</label>
						</div>
					</div>
					<div id="commentList" class="comment-list"></div>
                </div>
            </fieldset>
        </main>
        <footer class="page-footer text-center font-small mdb-color mt-4 wow fadeIn my-blog-footer">
            <div class="footer-copyright py-1">
                2018 Copyright: <a href="#" target="_blank">www.nowonbun.com </a>
            </div>
        </footer>
        <div id="ImgModal" class="modal">
            <span class="close">&times;</span>
            <img class="modal-content">
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/js/compiled-4.5.9.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
    <script src="/js/highlightjs-line-numbers.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>hljs.initLineNumbersOnLoad();</script>
    <script type="text/javascript" src="/js/post.js" charset="utf-8"></script>
    <script type="text/javascript" src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>
    <script type="text/javascript" src="/js/comment.min.js"></script>
</body>
</html>